
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NJDBTSMZ');</script>
    <!-- End Google Tag Manager -->
    
    <script> 
      const BASE_URL = "/"
      const HAS_GOOGLE_TOKENS = false;
    </script>
    <script src="/js/accountMain.js?v=3" type="module"></script>
    <script src="https://accounts.google.com/gsi/client" async></script>
    

    <!-- style and themes -->
    <link rel="stylesheet" href="css/style.css?v=1.44.0">

    <link rel="stylesheet" href="css/theme/theme.css?v=1.7.0">
    <link id="theme-style" rel="stylesheet" href="css/theme/colors/oled.css">
    <script src="/js/theme.js"></script>
    
    <!-- Material Web Components -->
    <script src="/js/bundle.js"></script>
    
    <script src="/js/components/cocounut-chart.js"></script>



    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <!-- <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> -->

    
    <meta name="csrf-token" content="4a6809bd8b50b0018c1230c8b4eca515ea57c7465641f0677b256854f12f80eb">

    <meta name="description" content="Empresa de desarrollo de software de verdadera calidad y enfoque en el detalle.">
    <meta name="author" content="Luis David Elizarraraz Mondaca">
    <meta name="keywords" content="codemelon, melon mindd carded, Stepbro Software, stepbro, Luis David Elizarraraz Mondaca, Davo, desarrollo web, software, aplicaciones">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Codemelon">
    <meta property="og:url" content="https://codemelon.net">
    <meta property="og:type" content="website">

    <!-- Manifest -->
    <title>Melon Mind</title><link rel='shortcut icon' type='image/png' href='https://codemelon.net/apps/mind/assets/favicon.png'><link rel="manifest" href="/apps/mind/back-end/config/site.webmanifest?v=1" >
            <meta property="og:title" content="Melon Mind" />
            <meta property="og:description" content="Software profesional para psicólogos: Gestiona eficientemente pacientes, citas, expedientes clínicos, facturación y más en una sola plataforma integrada" />
            <meta property="og:image" content="https://codemelon.net/apps/mind/assets/icon.png" />
            <meta property="og:url" content="https://mind.codemelon.net" />
            <meta property="og:type" content="website" />

            <script type="application/ld+json">
              {
                "@context": "https://schema.org",
                "@type": "WebApplication",
                "name": "Melon Mind",
                "description": "Software profesional para psicólogos: Gestiona eficientemente pacientes, citas, expedientes clínicos, facturación y más en una sola plataforma integrada",
                "url": "https://mind.codemelon.net",
                "image": "https://codemelon.net/apps/mind/assets/icon.png",
                "applicationCategory": "ProductivityApplication",
                "operatingSystem": "All"
              }
            </script>
              
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- fonts / icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">  -->
    <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      
    />
    
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Urbanist:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
  </head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJDBTSMZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<transparent>
  <window 
    id="window-settings"
    class="increased semi-slim on-background-text"
    
    data-flip-id="animate"
    >
    <div class="simple-container padding-16 only-on-mobile b-padding-0">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    
    <holder class="padding-0 overflow-hidden direction-row w-section-holder" style="background:var(--md-sys-color-surface-container-low)">
        <!-- nav -->
        <div class="simple-container direction-column w-nav-parent flex-wrap" style="z-index:1">
            <!-- <span class="body-large bottom-margin-8 on-surface-variant-text">Configuración</span> -->
            <md-icon-button class="bottom-margin-16 hide-on-mobile" onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
            <button 
                class="w-nav-button"
                data-w-section="w-section-account"
                onclick="toggleWSection('w-section-account', this)"
                active
                >
                <md-ripple></md-ripple>
                <md-icon>account_circle</md-icon>
                <span>Cuenta</span>
            </button>
            <button 
                class="w-nav-button"
                data-w-section="w-section-appearance"
                onclick="toggleWSection('w-section-appearance', this)"
                >
                <md-ripple></md-ripple>
                <md-icon>palette</md-icon>
                <span>Apariencia</span>
            </button>
            <button 
                class="w-nav-button"
                data-w-section="w-section-information"
                onclick="toggleWSection('w-section-information', this)"
                >
                <md-ripple></md-ripple>
                <md-icon>info</md-icon>
                <span>Información</span>
            </button>
            <!-- <span class="label-medium hide-on-mobile dm-sans outline-text top-margin-16 bottom-margin-8 left-margin-16">Melon Mind</span> -->
            

            <span class="label-medium hide-on-mobile dm-sans outline-text top-margin-16 bottom-margin-8 left-margin-16">Melon Mind</span>
            <button 
                class="w-nav-button"
                id="button-open-request-billing-system"
                data-w-section="settings-w-section-request-billing"
                onclick="toggleWSection('settings-w-section-request-billing', this)"
                >
                <md-ripple></md-ripple>
                <md-icon>euro</md-icon>
                <span>Facturación</span>
            </button>
            <button 
                class="w-nav-button"
                data-w-section="settings-w-section-billing"
                onclick="toggleWSection('settings-w-section-billing', this)"
                name='button-open-billing-data'
                data-feature="billing"
                >
                <md-ripple></md-ripple>
                <md-icon>euro</md-icon>
                <span>Facturación</span>
            </button>
        </div>

        <!-- Accout -->
        <div class="w-section padding-24 overflow-auto simple-container direction-column grow-1 gap-8" active id="w-section-account">
            <div class="simple-container direction-row justify-center">
                
                                <div class="simple-container padding-40 border-radius-64 surface-variant relative user-select-none">
                                    <span id="response-settings-account-username-first-letter" name="account-first-letter" class="display-large absolute-centered bricolage weight-600">...</span>
                                </div>
                                            
            </div>
            <div class="simple-container justify-center">
                <span id="response-settings-account-username-title" name="account-username" class="body-large dm-sans weight-500">...</span>
            </div>
            <div class="simple-container direction-column v-margin gap-8 grow-1">
                
                <div class="content-box direction-row light-color padding-24 border-radius-16 justify-between">
                    <div class="simple-container"><span class="label-large">Correo</span></div>
                    <div class="simple-container"><span id="response-settings-account-email" name="account-email" class="body-large">...</span></div>
                </div>
                <div class="content-box direction-column light-color padding-24 border-radius-16 justify-between">
                    <div class="simple-container justify-between">
                        <div class="simple-container"><span class="label-large">Nombre de usuario</span></div>
                        <div class="simple-container"><span id="response-settings-account-username" name="account-username" class="body-large">...</span></div>
                    </div>
                    <div class="simple-container justify-right">
                        <span 
                            class="label-small data-line interactive"
                            onclick="toggleDialog('dialog-account')"    
                            >
                            <md-ripple aria-hidden="true"></md-ripple>
                            Editar
                        </span>
                    </div>
                </div>
                <!-- <div
                    class="content-box outline-with-shadow padding-16 border-radius-16 align-center user-select-none cursor-pointer primary-text"
                    >
                    <md-ripple></md-ripple>
                    <span class="simple-container align-center gap-8"><md-icon class="filled">rocket_launch</md-icon>Mi suscripción</span>
                </div> -->
                <!-- <div
                    data-flip-id="animate"
                    name="button-open-subscription-sub-section"
                    style="box-shadow: 0 16px 24px -6px rgba(255, 255, 255, 0.3) inset;"
                    class="content-box primary-container on-primary-container-text outline-with-shadow padding-16 border-radius-16 align-center user-select-none cursor-pointer "
                    >
                    <md-ripple></md-ripple>
                    <span class="simple-container align-center gap-8 dm-sans weight-600"><md-icon class="filled">rocket_launch</md-icon>Mi suscripción</span>
                </div> -->
                <div
                    data-flip-id="animate"
                    name="button-open-subscription-sub-section"
                    class="content-box padding-16 border-radius-16 align-center user-select-none cursor-pointer hover-outline"
                    >
                    <md-ripple></md-ripple>
                    <span class="simple-container align-center gap-8 inter">Administrar suscripción</span>
                </div>
                <!-- <div class="simple-container grow-1"></div> -->
                                <div 
                    class="content-box direction-row light-color padding-16 border-radius-16 justify-center user-select-none cursor-pointer"
                    onclick="toggleDialog('dialog-logout-confirmation')"
                    >
                    <md-ripple></md-ripple>
                    <span class="body-medium error-text inter">Cerrar sesión</span>
                </div>

                
            </div>
        </div>

        <!-- Appearance -->
        <div class="w-section padding-24 overflow-auto simple-container direction-column grow-1" id="w-section-appearance">
            <div class="simple-container direction-column grow-1 gap-16">
                <div class="simple-container gpa-8 direction-column">
                    <span class="headline-medium dm-sans weight-500">Apariencia</span>
                    <span class="body-large outline-text dm-sans">Modifica la apariencia de la app a un color de tu preferencia</span>
                </div>
                <div class="theme-selector-parent v-margin" id="app-theme-selector-parent">
                    <div 
                        class="ball" 
                        data-theme="black"
                        onclick="changeTheme(this)" 
                        >
                        <span style="background:#000000;"></span>
                        <span style="background:#122644;"></span>
                        <span style="background:#b4c7ed;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="blue"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#0045b2;"></span>
                        <span style="background:#0066ff;"></span>
                        <span style="background:#b3c5ff;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="green"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#006d34;"></span>
                        <span style="background:#5de989;"></span>
                        <span style="background:#9fffb3;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="brown"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#944b00;"></span>
                        <span style="background:#ff9947;"></span>
                        <span style="background:#ffbc8d;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="cold-blue"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#006590;"></span>
                        <span style="background:#55c0ff;"></span>
                        <span style="background:#96d3ff;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="pink"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#8900a3;"></span>
                        <span style="background:#c400e8;"></span>
                        <span style="background:#f7acff;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="purple"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#5e00d0;"></span>
                        <span style="background:#853fff;"></span>
                        <span style="background:#d2bcff;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="oled"
                        onclick="changeTheme(this)"
                        active
                        >
                        <span style="background:#000000;"></span>
                        <span style="background:#0f0f0f;"></span>
                        <span style="background:#0a0a0a;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="super-blue"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#0028db;"></span>
                        <span style="background:#4058ff;"></span>
                        <span style="background:#afb8ff;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="red"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#a50012;"></span>
                        <span style="background:#db3331;"></span>
                        <span style="background:#ff958b;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="orange"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#F47700;"></span>
                        <span style="background:#FFB347;"></span>
                        <span style="background:#B9A598;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <!-- <div 
                        class="ball" 
                        data-theme="frutiger-aero"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:blue;"></span>
                        <span style="background:cyan;"></span>
                        <span style="background:red;"></span>
                        <md-ripple></md-ripple>
                    </div> -->
                    <div 
                        class="ball" 
                        data-theme="modern-1"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:linear-gradient(45deg   , #E7A4DC 0%, #D56CC5 53.2%, #6042E1 100%)"></span>
                        <span style="background:linear-gradient(180deg, #E7A4DC 0%, #D56CC5 53.2%, #6042E1 100%)"></span>
                        <span style="background:linear-gradient(0deg, #E7A4DC 0%, #D56CC5 10.2%, #6042E1 100%)"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="pastel-pink"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#C76BAE;"></span>
                        <span style="background:#E893D3;"></span>
                        <span style="background:#E8C2E3;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="funny"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#006874;"></span>
                        <span style="background:#4fd8eb;"></span>
                        <span style="background:#9af0ff;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <!-- <div 
                        class="ball" 
                        data-theme="new"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#F4442E;"></span>
                        <span style="background:#758BFD;"></span>
                        <span style="background:#03045E;"></span>
                        <md-ripple></md-ripple>
                    </div>
                    <div 
                        class="ball" 
                        data-theme="new2"
                        onclick="changeTheme(this)"
                        >
                        <span style="background:#758BFD;"></span>
                        <span style="background:#F4442E;"></span>
                        <span style="background:#03045E;"></span>
                        <md-ripple></md-ripple>
                    </div> -->
                </div>
                <div class="simple-container">
                    <div 
                        class="content-box direction-row padding-16 border-radius-16 justify-center user-select-none cursor-pointer"
                        onclick="resetTheme()"
                        >
                        <md-ripple></md-ripple>
                        <span class="body-medium">Restablecer tema</span>
                    </div>
                </div>
                <div class="simple-container direction-column gap-16">
                    <div class="simple-container gpa-8 direction-column">
                        <span class="headline-small">Navegación</span>
                        <span class="body-large on-surface-variant-text">Elige el estilo de navegación que más te guste </span>
                    </div>
                    <div class="simple-container flex-wrap gap-8 nav-selector-parent" id="nav-selector-parent">
                        <div 
                            class="nav-option hide-on-mobile" 
                            data-nav-option="1"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Clásica
                        </div>
                        <div 
                            class="nav-option"
                            data-nav-option="2"
                            onclick="changeNav(this)" 
                            active
                            >
                            <md-ripple></md-ripple>
                            Moderna
                        </div>
                        <div 
                            class="nav-option hide-on-mobile"
                            data-nav-option="3"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Inferior
                        </div>
                        <div 
                            class="nav-option hide-on-mobile"
                            data-nav-option="2 glass-nav"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Detallada
                        </div>
                        <div 
                            class="nav-option hide-on-mobile"
                            data-nav-option="6"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Interesante
                        </div>
                        <div 
                            class="nav-option"
                            data-nav-option="7"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Dock
                        </div>
                        <div 
                            class="nav-option hide-on-mobile"
                            data-nav-option="8"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Bonita
                        </div>
                        <div 
                            class="nav-option hide-on-mobile"
                            data-nav-option="9"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Minimalista
                        </div>
                        <div 
                            class="nav-option hide-on-mobile"
                            data-nav-option="10"
                            onclick="changeNav(this)"
                            >
                            <md-ripple></md-ripple>
                            Neutral
                        </div>
                    </div>
                    <div class="simple-container">
                        <span class="label-large outline-text">
                            Los cambios solo se verán reflejados dentro de una aplicación
                        </span>
                    </div>
                </div>
                
            </div>
        </div>

        <!-- Billing -->
        <div class="w-section padding-24 overflow-auto simple-container direction-column grow-1" id="settings-w-section-billing">
            <!-- <div class="simple-container justify-between gap-16">
    <span class="headline-medium weight-500 bottom-margin-24 dm-sans on-background-text">Facturación</span>
    <md-switch icons id="billing-system-switch"></md-switch>
</div> -->


<div 
    class="simple-container direction-column gap-8 on-background-text dm-sans-all" 
    data-feature="billing"
    >
    <form 
        id="form-user-billing-data" 
        class="simple-container direction-column gap-16" 
        style="padding-bottom:64px;"
        autocomplete="off"
        >

        <span class="headline-small">Datos personales</span>
        <div class="simple-container direction-column gap-8">
            <span class="label-large outline-text dm-sans">Nombre Completo</span>
            <input name="billing_name" class="background outline-1 focus-primary no-reset" type="text">
        </div>
        <div class="simple-container direction-column gap-8">
            <span class="label-large outline-text dm-sans">NIF / CIF</span>
            <input name="billing_nif_cif" class="background outline-1 focus-primary no-reset" type="text">
        </div>

        <span class="headline-small top-margin-24">Direccion fiscal</span>
        <div class="simple-container flex-wrap gap-16">
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Calle</span>
                <input name="billing_address_street" class="background outline-1 focus-primary no-reset" type="text">
            </div>
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Número, Apartamento, Puerta</span>
                <input name="billing_address_number" class="background outline-1 focus-primary no-reset" type="text">
            </div>
        </div>
        <div class="simple-container flex-wrap gap-16">
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Ciudad</span>
                <input name="billing_address_city" class="background outline-1 focus-primary no-reset" type="text">
            </div>
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Provincia</span>
                <input name="billing_address_state" class="background outline-1 focus-primary no-reset" type="text">
            </div>
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Código Postal</span>
                <input name="billing_address_zip_code" class="background outline-1 focus-primary no-reset" type="text">
            </div>
        </div>

        <div class="simple-container justify-right" style="background: linear-gradient(360deg, var(--md-sys-color-background), transparent); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; box-sizing:border-box;">
            <md-filled-button type="submit">Guardar</md-filled-button>
        </div>

        <div class="simple-container align-center justify-between gap-8 top-margin-24">
            <span class="headline-small weight-500">Series y numeración</span>
            <md-filled-tonal-button type="button" name="button-open-create-invoice-series"><md-icon slot="icon">add</md-icon>Crear serie</md-filled-tonal-button>
        </div>

        <span class="body-large outline-text">Ordinarias</span>
        <div class="simple-container direction-column gap-8" id="container-invoice-series-ordinary">
            <table class="style-4" name="container-table"></table>
            <div name="container-pagination"></div>
        </div>

        <span class="body-large outline-text">Rectificativas</span>
        <div class="simple-container direction-column gap-8" id="container-invoice-series-rectified">
            <table class="style-4" name="container-table"></table>
            <div name="container-pagination"></div>
        </div>

        <!-- <div class="content-box direction-row align-center border-radius-16 padding-16 secondary-container on-secondary-container-text">
            <md-icon>warning</md-icon><span class="dm-sans"> Solo puedes configurar tu serie de facturación antes de empezar a facturar en Melon Mind</span>
        </div>
        <div class="simple-container direction-column gap-8 grow-1">
            <span class="label-large outline-text dm-sans">Número de la última factura antes de usar Melon Mind</span>
            <input name="billing_invoice_last_number" class="background outline-1 focus-primary" type="number" placeholder="0">
        </div>

        <div class="simple-container flex-wrap gap-16 align-center">
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Formato de númeración</span>
                <input name="billing_invoice_number_format" class="background outline-1 focus-primary" type="text" value="F[YY]%%%%%">
            </div>
            <md-icon class="hide-on-mobile t-padding-16">arrow_right_alt</md-icon>
            <md-icon class="only-on-mobile" style="min-width:100%">arrow_downward</md-icon>
            <div class="simple-container direction-column gap-8 grow-1">
                <span class="label-large outline-text dm-sans">Formato de númeración</span>
                <input name="billing_invoice_number_format_preview" class="background outline-1 focus-primary" type="text" placeholder="F[YY]%%%%%">
            </div>
        </div> -->


        

    </form>



</div>        </div>
        
        <div class="w-section padding-24 overflow-auto simple-container direction-column grow-1 dm-sans-all on-background-text" id="settings-w-section-request-billing">
            <div 
    data-step="1" 
    active 
    class="simple-container direction-column gap-24 grow-1 align-center justify-center animation-loading-1"
    >

    <md-icon style="--md-icon-size: 80px;" class="primary-text">euro_symbol</md-icon>
     <!-- <img src="//apps/mind/assets/billing_icon.png" alt="Icono de facturación" style="width:160px"> -->

    <div class="simple-container direction-column gap-8">
        <span class="headline-large weight-600 text-center line-height-1">Activa tu sistema de facturación</span>
        <span class="headline-small outline-text text-center text-wrap-pretty">Comienza a generar facturas profesionales desde Melon Mind</span>
        <!-- <span class="body-large text-center outline-text weight-500">Para cumplir con los requisitos fiscales, primero necesitamos verificar tu información fiscal.</span> -->
    </div>

    <div class="simple-container direction-column align-center gap-16">
        <button name="button-start-request-billing" class="style-1 primary-container on-primary-container-text"><md-ripple></md-ripple>Solicitar acceso</button>
    </div>
</div>

<div 
    data-step="2" 
    class="simple-container direction-column gap-24 grow-1"
    >

    <div class="simple-container">
        <md-filled-tonal-icon-button class="solid" name="button-go-step-1"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
    </div>

    <form id="form-request-billing" class="simple-container direction-column align-center justify-center grow-1 gap-24">
        <div class="simple-container direction-column gap-8">
            <span class="headline-large weight-600 text-center line-height-1">Ingresa tus datos fiscales</span>
            <span class="body-large outline-text text-center">Esta información será usada para darte de alta correctamente ante el sistema de facturación. Asegúrate de que los datos coincidan con tu constancia fiscal.</span>
        </div>

        <div class="simple-container gap-16 direction-column width-100 max-width-400">
            <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">Nombre Completo</span>
                <input name="billing_name" class="background outline-1 focus-primary no-reset" type="text">
            </div>
            <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">NIF / CIF</span>
                <input name="billing_nif_cif" class="background outline-1 focus-primary no-reset" type="text">
            </div>
            <span class="headline-small top-margin-24">Dirección fiscal</span>
                <div class="simple-container flex-wrap gap-16">
                    <div class="simple-container direction-column gap-8 grow-1">
                        <span class="label-large outline-text dm-sans">Calle</span>
                        <input name="billing_address_street" class="background outline-1 focus-primary no-reset" type="text">
                    </div>
                    <div class="simple-container direction-column gap-8 grow-1">
                        <span class="label-large outline-text dm-sans">Número, Apartamento, Puerta</span>
                        <input name="billing_address_number" class="background outline-1 focus-primary no-reset" type="text">
                    </div>
                </div>
                <div class="simple-container flex-wrap gap-16">
                    <div class="simple-container direction-column gap-8 grow-1">
                        <span class="label-large outline-text dm-sans">Ciudad</span>
                        <input name="billing_address_city" class="background outline-1 focus-primary no-reset" type="text">
                    </div>
                    <div class="simple-container direction-column gap-8 grow-1">
                        <span class="label-large outline-text dm-sans">Provincia</span>
                        <input name="billing_address_state" class="background outline-1 focus-primary no-reset" type="text">
                    </div>
                    <div class="simple-container direction-column gap-8 grow-1">
                        <span class="label-large outline-text dm-sans">Código Postal</span>
                        <input name="billing_address_zip_code" class="background outline-1 focus-primary no-reset" type="text">
                    </div>
                </div>

            <div class="simple-container justify-right">
                <md-filled-button type="submit" class="primary-container on-primary-container-text" trailing-icon>Continuar<md-icon slot="icon">arrow_forward</md-icon></md-filled-button>

            </div>

        </div>


    </form>

</div>

<div 
    data-step="3" 
    class="simple-container direction-column gap-24 grow-1 justify-center align-center"
    >
    <md-icon class="pretty-minimal filled primary-text">check_circle</md-icon>
    <div class="simple-container direction-column gap-8">
        <span class="headline-large weight-600 text-center line-height-1 line-height-1">Tu solicitud ha sido enviada</span>
        <span class="headline-small outline-text weight-500 text-center">Te avisaremos cuando este listo</span>
    </div>
    <span class="body-large weight-500 outline-text text-center">Hemos recibido tu información fiscal. Nuestro equipo la revisará y te contactará en un plazo máximo de 2 días hábiles para completar la activación.</span>

</div>
        </div>

        <!-- Info -->
        <div class="w-section padding-24 overflow-auto simple-container direction-column gap-16 grow-1" id="w-section-information">
            <div class="simple-container gpa-8 direction-column">
                <span class="headline-medium" data-shared_element_info_title>Información</span>
                <span class="body-large outline-text" data-shared_element_stepbro_notes_subtitle>Información sobre Stepbro Apps y Desarrolladores</span>
            </div>

            <div class="simple-container direction-column gap-8 on-background-text">
                <div 
                    class="
                        content-box 
                        align-center 
                        direction-row
                        padding-24 
                        border-radius-16 
                        justify-between 
                        cursor-pointer
                        hover-outline
                    "
                    data-shared_element_stepbro_build_info_container
                    onclick="toggleWSection('#w-sub-section-stepbro_build_info')"
                    >
                    <md-ripple></md-ripple>
                    <div class="label-large">Codemelon Build</div>
                    <span class="label-large simple-container align-center gap-8">
                        Información
                        <md-icon class=" filled">arrow_circle_right</md-icon>
                    </span>
                </div>

                <div 
                    class="
                        content-box 
                        align-center 
                        direction-row
                        padding-24 
                        border-radius-16 
                        justify-between 
                        cursor-pointer
                        hover-outline
                    "
                    data-shared_element_stepbro_notes_app_info_container
                    onclick="toggleWSection('#w-sub-section-notes_app_info')"
                    >
                    <md-ripple></md-ripple>
                    <div class="label-large">Melon Mind</div>
                    <span class="label-large simple-container align-center gap-8">
                        Información
                        <md-icon class=" filled">arrow_circle_right</md-icon>
                    </span>
                </div>

                <div 
                    class="
                        content-box 
                        align-center 
                        direction-row
                        padding-24 
                        border-radius-16 
                        justify-between 
                        cursor-pointer
                        hover-outline
                    "
                    onclick="window.open('https://api.whatsapp.com/send?phone=34644675909&text=%C2%A1Hola!%20Estoy%20interesado%20en%20recibir%20m%C3%A1s%20informaci%C3%B3n%20sobre%20Melon%20Mind.', '_blank');"
                    >
                    <md-ripple></md-ripple>
                    <div class="label-large simple-container aling-center gap-4"><md-icon class="dynamic">support_agent</md-icon>Soporte técnico</div>
                    <span class="label-large simple-container align-center gap-8">                    
                        <md-icon class=" filled">arrow_circle_right</md-icon>
                    </span>
                </div>

                <!-- <div 
                    class="
                        content-box 
                        align-center 
                        direction-row
                        padding-24 
                        border-radius-16 
                        justify-between 
                        cursor-pointer
                        hover-outline
                    "
                    onclick="toggleWSection('#w-sub-section-terms_of_use')"
                    >
                    <md-ripple></md-ripple>
                    <div class="label-large">Términos de uso</div>
                    <span class="label-large simple-container align-center gap-8">
                        <md-icon class=" filled">arrow_circle_right</md-icon>
                    </span>
                </div> -->
                
            </div>
            
            
            

        </div>

        <!-- Info subsections -->
        <div class="w-section padding-24 overflow-auto simple-container direction-column gap-16  grow-1" id="w-sub-section-notes_app_info">
            
            <div class="simple-container">
                <md-icon-button onclick="toggleWSection('#w-section-information')"><md-icon>arrow_back</md-icon></md-icon-button>
            </div>
            <div class="simple-container gpa-8 direction-column">
                <span class="headline-medium fit-content dm sans" data-shared_element_info_title>Melon Mind</span>
                <span class="body-large outline-text">Información sobre la app y el desarrollador</span>
            </div>
            <div class="simple-container direction-column gap-8" data-shared_element_stepbro_notes_app_info_container>
                <div class="content-box direction-row padding-24 border-radius-16 justify-between">
                    <div class="simple-container"><span class="label-large">Versión</span></div>
                    <div class="simple-container"><span class="body-large
                    ">Beta 1</span></div>
                </div>

                <div class="content-box padding-8 border-radius-16 on-background-tex">
                    <div class="simple-container direction-column gap-8 b-padding-8 padding-16">
                        <span class="label-large">Créditos</span>
                    </div>
                    
                    <div class="content-box light-color padding-24 border-radius-8 justify-between">
                        <div class="simple-container direction-column gap-8">
                            <div class="simple-container direction-column gap-4">
                                <span class="headline-small bricolage weight-500">Luis David Elizarraraz Mondaca</span>
                                <span class="body-medium outline-text">Desarrollador Full Stack | Arquitecto de Software | Diseñador de UI/UX | Fundador del proyecto Melon Mind con iniciativa como Stepbro Mind</span>
                            </div>

                            <div class="simple-container top-margin-8 gap-8">

                                <a href="https://www.youtube.com/@stepbro_davo" target="_blank" class="content-box outline-light-1 width-auto cursor-pointer border-radius-8 padding-16">
                                    <md-ripple></md-ripple>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M23.498 6.18598C23.3624 5.67526 23.095 5.20912 22.7226 4.83425C22.3502 4.45937 21.8858 4.18892 21.376 4.04998C19.505 3.54498 12 3.54498 12 3.54498C12 3.54498 4.495 3.54498 2.623 4.04998C2.11341 4.18917 1.64929 4.45972 1.27708 4.83456C0.904861 5.20941 0.637591 5.67542 0.502 6.18598C0 8.06998 0 12 0 12C0 12 0 15.93 0.502 17.814C0.637586 18.3247 0.904975 18.7908 1.27739 19.1657C1.64981 19.5406 2.11418 19.811 2.624 19.95C4.495 20.455 12 20.455 12 20.455C12 20.455 19.505 20.455 21.377 19.95C21.8869 19.8111 22.3513 19.5407 22.7237 19.1658C23.0961 18.7909 23.3635 18.3248 23.499 17.814C24 15.93 24 12 24 12C24 12 24 8.06998 23.498 6.18598ZM9.545 15.568V8.43198L15.818 12L9.545 15.568Z" fill="var(--md-sys-color-on-background)"/>
                                    </svg>
                                </a>
                                <a href="mailto:luisdavid.gris@gmail.com" target="_blank" class="content-box outline-light-1 width-auto cursor-pointer border-radius-8 padding-16">
                                    <md-ripple></md-ripple>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <g clip-path="url(#clip0_59_10)">
                                        <path d="M24 5.45703V19.366C24 20.27 23.268 21.002 22.364 21.002H18.545V11.73L12 16.64L5.455 11.73V21.003H1.636C1.42107 21.003 1.20825 20.9607 1.0097 20.8784C0.811145 20.7961 0.63075 20.6755 0.47882 20.5235C0.32689 20.3715 0.206404 20.191 0.124246 19.9924C0.0420884 19.7938 -0.000131068 19.581 3.05652e-07 19.366V5.45703C3.05652e-07 3.43403 2.309 2.27903 3.927 3.49303L5.455 4.64003L12 9.54803L18.545 4.63803L20.073 3.49303C21.69 2.28003 24 3.43403 24 5.45703Z" fill="var(--md-sys-color-on-background)"/>
                                        </g>
                                        <defs>
                                        <clipPath id="clip0_59_10">
                                        <rect width="24" height="24" fill="white"/>
                                        </clipPath>
                                        </defs>
                                    </svg>
                                </a>
                                
                            </div>

                        </div>    
                    </div>

                    <div class="content-box light-color padding-24 border-radius-8 justify-between">
                        <div class="simple-container direction-column gap-8">
                            <div class="simple-container direction-column gap-4">
                                <span class="headline-small bricolage weight-500">Álvaro Pérez March</span>
                                <span class="body-medium outline-text">Cofundador de Melon Mind | Estrategia, Marketing y Conexión con Psicólogos</span>
                            </div>


                        </div>    
                    </div>

                    
                </div>
                

            </div>
            
        </div>

        <div class="w-section padding-24 overflow-auto simple-container direction-column gap-16  grow-1" id="w-sub-section-stepbro_build_info">
            <div class="simple-container">
                <md-icon-button onclick="toggleWSection('#w-section-information')"><md-icon>arrow_back</md-icon></md-icon-button>
            </div>
            <div class="simple-container gpa-8 direction-column">
                <span class="headline-medium fit-content" data-shared_element_info_title>Codemelon Build</span>
                <span class="body-large outline-text">Información sobre la app y el desarrollador</span>
            </div>
            <div class="simple-container direction-column gap-8" data-shared_element_stepbro_build_info_container>
                <div class="content-box direction-row padding-24 border-radius-16 justify-between">
                    <div class="simple-container"><span class="label-large">Versión</span></div>
                    <div class="simple-container"><span class="body-large
                    ">Beta 1</span></div>
                </div>   
            </div>    
        </div>

        <div class="w-section padding-24 overflow-auto simple-container direction-column grow-1" style="padding-bottom:100px" id="w-sub-section-terms_of_use">
            <div class="simple-container bottom-margin-8">
                <md-filled-icon-button onclick="toggleWSection('#w-section-information')"><md-icon>arrow_back</md-icon></md-filled-icon-button>
            </div>
            <span class="headline-small dm-sans on-background-text weight-500 bottom-margin-8">Términos de uso</span>
            
            <div class="body-large on-background-text">Uso del software</div>
            <ul class="body-medium outline-text bottom-margin-8">
                <li>El usuario se compromete a utilizar el software únicamente para fines lícitos y de acuerdo con estos términos de uso.</li>
                <li>El usuario no podrá utilizar el software para fines ilegales, dañinos o que infrinjan los derechos de terceros.</li>
                <li>El usuario no podrá acceder al software de forma no autorizada ni intentar vulnerar sus medidas de seguridad.</li> 
            </ul>

            <div class="body-large on-background-text">Responsabilidad</div>
            <ul class="body-medium outline-text bottom-margin-8">
                <li>El autor no se hace responsable por los daños y perjuicios que puedan derivarse del uso del software, incluyendo la pérdida de datos, interrupción del servicio o errores en el funcionamiento.</li>
                <li>El usuario es el único responsable del uso que haga del software y de las consecuencias que puedan derivarse.</li>
            </ul>

            <div class="body-large on-background-text">Uso del software</div>
            <ul class="body-medium outline-text bottom-margin-8">
                <li>El autor se reserva el derecho de modificar estos términos de uso en cualquier momento y sin previo aviso.</li>
                <li>El usuario se compromete a revisar periódicamente estos términos de uso para estar informado de los cambios.</li>
            </ul>
        </div>

            <!-- Subscription subsection -->
    
    </holder>

    <div
        data-sub-section
        data-flip-id="animate"
        id="sub-section-subscription"
        class="simple-container direction-column absolute-screen full-width on-background-text top-padding-safe-area align-center"
        style="background:var(--md-sys-color-background);"
        >
        <div class="simple-container width-100">
                <md-icon-button name="button-close-subscription-sub-section"><md-icon>arrow_back</md-icon></md-icon-button>
            </div>
        <div class="simple-container direction-column gap-24 width-100 max-width-600">
            

            <div class="simple-container direction-column">
                <span class="display-large dm-sans top-margin-8">Suscripción</span>
            </div>

            <div class="simple-container gap-8 flex-wrap">
                <button 
                    active
                    data-w-section="w-section-subscriptions"
                    onclick="toggleWSection('#w-section-subscriptions')" 
                    class="style-2"
                    >
                    <md-ripple></md-ripple>
                    Suscripciones
                </button>
                <button 
                    data-w-section="w-section-invoices"
                    onclick="toggleWSection('#w-section-invoices')" 
                    class="style-2"
                    >
                    <md-ripple></md-ripple>
                    Facturas
                </button>

            </div>


            <div active class="w-section simple-container direction-column grow-1" id="w-section-subscriptions">
                <div name="table-subscriptions" class="simple-container direction-column gap-8"></div>
                <div class="simple-container"></div>
            </div>

            <div  class="w-section simple-container direction-column grow-1" id="w-section-invoices">
                <div name="table-invoices" class="simple-container direction-column gap-8"></div>
                <div class="simple-container"></div>
            </div>
            

            
        </div>
    </div>

    <md-dialog id="dialog-account" style="min-width: calc(-1600px + 100vw)">
        <div slot="headline">Cuenta</div>
        <form id="form-dialog-account" slot="content" method="dialog">
            <md-list style="border-radius:16px;">
            <md-list-item>
                <md-icon slot="start">tag</md-icon>
                <div slot="headline" id="response-account-id" name="account-id">...</div>
            </md-list-item>
            <md-list-item>
                <md-icon slot="start">mail</md-icon>
                <div slot="headline" id="response-account-email" name="account-email">...</div>
            </md-list-item>
            </md-list>
            <div class="simple-container direction-column gap-8 v-margin">

            <md-outlined-text-field 
                id="modify-account-username"
                name="account-username"
                label="Nombre de usuario" 
                role="presentation"
                style="margin-top:8px;"
                >
            </md-outlined-text-field>
            </div>
        </form>
        <div slot="actions">
            <md-text-button form="form-dialog-account" value="cancel">Cancelar</md-text-button>
            <md-filled-button name="button-modify-user-data" value="save">Guardar</md-filled-button>
        </div>
    </md-dialog>

    <md-dialog id="dialog-logout-confirmation">
        <div slot="headline">Cerrar sesión</div>
        <md-icon slot="icon" aria-hidden="true">logout</md-icon>
        <form id="form-dialog-logout-confirmation" slot="content" method="dialog">
            ¿Estas seguro de que quieres cerrar sesión?
        </form>
        <div slot="actions">
            <md-text-button form="form-dialog-logout-confirmation" value="cancel">Cancelar</md-text-button>
            <md-filled-tonal-button class="delete" value="save" name="button-logout">Cerrar sesión</md-filled-tonal-button>
        </div>
    </md-dialog>

</window>




<!-- <script>
    document.addEventListener("DOMContentLoaded", function(event) {
        // getUserData();
        syncUserData();
    });
</script> --><window
    id="window-send-suggestion"
    data-flip-id="animate"
    class="on-background-text"
    >
    <div class="simple-container padding-16">
        <md-icon-button onclick="toggleWindow();">
            <md-icon>close</md-icon>
        </md-icon-button>
    </div>
    <holder class="gap-16">
        <div class="simple-container direction-column gap-8">
            <span class="display-small bricolage weight-600 line-height-1">Enviar sugerencia<br> o reportar error</span>
            <span class="body-large outline-text">
                Si ha encontrado algún error o tiene sugerencias para mejorar la aplicación, le agradecemos que nos lo comunique.
            </span>
        </div>
        <form onsubmit="sendSuggestion(event)" id="send-suggestion-form" class="simple-container direction-column gap-16">
            <md-outlined-text-field 
                type="textarea" 
                label="Escribe aquí tu sugerencia o reporte de error" 
                style="min-height:180px;"
                id="send-suggestion-suggestion"    
            ></md-outlined-text-field>
            <div class="simple-container justify-right">
                <md-filled-button>
                    <md-icon slot="icon">send</md-icon>
                    Enviar
                </md-filled-button>
            </div>
        </form>
    </holder>

</window>
</transparent>
<transparent>
  <window
    id="window-trash"
    class="increased on-background-text dm-sans-all"
    data-flip-id="animate"
    >
    <div class="simple-container padding-16">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder class="align-center">
        <div class="simple-container direction-column width-100 max-width-800 gap-24 ">
            <div class="simple-container direction-column">
                <span class="display-large dm-sans">Papelera</span>
                <span class="body-normal outline-text">
                    Aquí puedes ver y restaurar todo lo que has eliminado.
                </span>
            </div>

            <!-- <button onclick="toggleWindow('#window-appt-data')" data-flip-id="animate">Hola mundo</button> -->

            <div class="simple-container gap-8 flex-wrap">
                <button
                    data-action="load-trash-appts"
                    data-w-section="w-section-trash-deleted-appts"
                    onclick="toggleWSection('w-section-trash-deleted-appts')"
                    class="style-2"
                    >
                    <md-ripple></md-ripple>
                    Citas eliminadas
                </button>
                <!-- <button
                    data-w-section="w-section-trash-deleted-patients"
                    class="style-2"
                    onclick="toggleWSection('w-section-trash-deleted-patients')"
                    >
                    <md-ripple></md-ripple>
                    Pacientes eliminados
                </button> -->
                <button
                    data-w-section="w-section-trash-deleted-notes"
                    class="style-2"
                    onclick="toggleWSection('w-section-trash-deleted-notes');"
                    name="button-display-deleted-notes"
                    >
                    <md-ripple></md-ripple>
                    Notas eliminadas
                </button>
                <!-- <button
                    class="style-2"
                    >
                    <md-ripple></md-ripple>
                    Consentimientos y autorizaciones
                </button> -->
                <!-- <button
                    data-w-section="w-section-trash-deleted-expenses"
                    class="style-2"
                    onclick="toggleWSection('w-section-trash-deleted-expenses')"
                    >
                    <md-ripple></md-ripple>
                    Gastos
                </button> -->
            </div>

            <!-- w section home -->
            <div active class="w-section simple-container padding-16 direction-column grow-1 align-center justify-around overflow-auto" style="position:absolute; inset:0; padding-bottom:64px;" id="w-section-trash-home">
                
                <div class="simple-container direction-column width-100 max-width-800 gap-24">

                    <div class="simple-container direction-column">
                        <span class="display-large dm-sans">Papelera</span>
                        <span class="body-large outline-text">
                            Aquí puedes ver y restaurar todo lo que has eliminado.
                        </span>
                    </div>

                    <div class="simple-container direction-column gap-8" style="margin-bottom:80px;">
                        <div data-action="load-trash-appts" onclick="toggleWSection('w-section-trash-deleted-appts')" class="content-box background outline-light-1 cursor-pointer width-auto  gap-16">
                            <md-ripple></md-ripple>
                            <md-icon class="pretty-minimal-medium padding-0 filled outline-text">schedule</md-icon>
                            <span class="headline-small line-height-1 weight-500">Citas eliminadas</span>
                        </div>
                        <!-- <div data-action="load-trash-patients" class="content-box background outline-light-1 cursor-pointer width-auto  gap-16">
                            <md-ripple></md-ripple>
                            <md-icon class="pretty-minimal-medium padding-0 filled outline-text">groups</md-icon>
                            <span class="headline-small line-height-1 weight-500">Pacientes eliminados</span>
                        </div> -->
                        <div data-action="load-trash-notes" onclick="toggleWSection('w-section-trash-deleted-notes');" name="button-display-deleted-notes" class="content-box background outline-light-1 cursor-pointer width-auto  gap-16">
                            <md-ripple></md-ripple>
                            <md-icon class="pretty-minimal-medium padding-0 filled outline-text">notes</md-icon>
                            <span class="headline-small line-height-1 weight-500">Notas eliminadas</span>
                        </div>
                    </div>

                </div>
               
            </div>

            <!-- w section appointments -->
            <div  class="w-section simple-container direction-column grow-1" id="w-section-trash-deleted-appts">
            
                <div 
                    id="trash-container-appts" 
                    class="simple-container direction-column gap-8"
                    >
                    <div 
                        name="container-filters"
                        class="simple-container justify-between gap-8 overflow-hidden direction-row-column" 
                        >
            
                        <div class="simple-container gap-8 overflow-auto max-width-100">
                            <select
                                name="filter_month"
                                class="no-reset"
                                >
                                <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                                <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                            </select>
            
                            <select
                                name="filter_year"
                                class="no-reset"
                                >
                                <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                                <option value="2023,2024,2025,2026">Años todos</option>
                            </select>
            
                            <select
                                name="filter_status"
                                class="no-reset"
                                >
                                <option value="" selected>Estado: Todos</option>
                                <option value="1">Pendiente</option>
                                <option value="2">Completada</option>
                                <option value="3">Cancelada</option>
                            </select>
            
                        </div>
            
                    </div>
                    <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                        <table name="container-table" class="style-4 adapt-to-mobile"></table>
                    </div>
                    <div name="container-pagination"></div>
                </div>

            </div>

            <!-- w section patients -->
            <div class="w-section simple-container direction-column grow-1" id="w-section-trash-deleted-patients">
                <div class="simple-container direction-column gap-4" id="trash-table-deleted-patients"></div>
                <div class="simple-container justify-center top-margin-16">
                    <md-filled-tonal-button id="trash-load-more-patients" disabled="true">Cargar más</md-filled-tonal-button>
                </div>
            </div>

            <div class="w-section simple-container direction-column grow-1 gap-16" id="w-section-trash-deleted-notes">
                <div class="simple-container direction-column gap-4" id="trash-table-deleted-notes"></div>
                <div class="simple-container"></div>
            </div>

            <div class="w-section simple-container direction-column grow-1" id="w-section-trash-deleted-expenses">
                <div class="simple-container direction-column grow-1 align-center justify-center outline-text gap-16 user-select-none top-margin-32">
                    <md-icon class="filled pretty-minimal" aria-hidden="true">border_clear</md-icon>
                    <span class="headline-small dm-sans outline-text width-100 max-width-600 text-center">
                        En desarrollo <br>
                        
                    </span>
                </div>
            </div>

        </div>
    </holder>
</window>

</transparent>
<transparent>
  <window 
    id="window-categories" 
    class="increased on-background-text dm-sans-all"
    data-flip-id="animate"
    >

    <div class="simple-container padding-16 gap-16 align-center justify-between">
        <div class="simple-container gap-16 align-center">
            <md-filled-tonal-icon-button class="solid" onclick="toggleWindow('#window-categories')">
                <md-icon>close</md-icon>
            </md-filled-tonal-icon-button>
            <span class="headline-small">Categorías</span>
        </div>
        <md-filled-button
            onclick="toggleWindow('#window-create-category', 'absolute')"
            data-flip-id="animate"
            >
            <md-icon slot="icon">add</md-icon>
            Categoría
        </md-filled-button>
    </div>
    <holder>
        <div 
            id="main-categories-container" 
            class="simple-container direction-column gap-8"
            >
            <div name="container-filters" class="hidden"></div>
            <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                <table name="container-table" class="style-4 adapt-to-mobile"></table>
            </div>
            <div name="container-pagination"></div>
        </div>
    </holder>

</window></transparent>

<transparent>
  <window
    id="window-create-patient"
    data-flip-id="animate"
    class="increased on-background-text"
    >
    <!-- <form onsubmit="" id="form-create-patient" class="simple-container direction-column grow-1"> -->
    <div class="simple-container padding-16 z-index-1">
        <md-icon-button type="button" onclick="toggleWindow();"><md-icon>close</md-icon></md-icon-button>
        <md-icon-button onclick="toggleWindowFullSize()" toggle="" class="hide-on-mobile" role="presentation" value=""><md-icon aria-hidden="true">expand_content</md-icon><md-icon slot="selected" aria-hidden="true">collapse_content</md-icon></md-icon-button>
    </div>
    
    <holder class="align-center">
        <form id="form-create-patient" onsubmit="PatientsManager.createPatient(event)" class="simple-container direction-column width-100 max-width-600 grow-1 gap-24 justify-center">

            <div class="simple-container direction-column width-100 user-select-none gap-8">
                <span class="display-small dm-sans weight-500 line-height-0-95">Agregar nuevo paciente</span>
                <span class="headline-small outline-text bottom-margin-8">Información básica del paciente</span>
                <!-- <span class="body-large outline-text dm-sans">Completa los campos a continuación para agregar un nuevo paciente</span> -->
            </div>

            <div class="simple-container direction-column gap-8">

                <div class="simple-container direction-column gap-8" name="minimum-data" id="create-patient-form-minimum-data">
                    <md-filled-text-field 
                        label="Nombre completo"
                        name="patient-name"
                    ></md-filled-text-field>
                    <div class="simple-container direction-column gap-4" name="patient-gender-selector-container">
                        <md-filled-select
                            label="Genero"
                            name="patient-gender"
                            >
                            <md-select-option value="Masculino">
                                <div slot="headline">Masculino</div>
                            </md-select-option>
                            <md-select-option value="Femenino">
                                <div slot="headline">Femenino</div>
                            </md-select-option>
                            <md-select-option value="No binario">
                                <div slot="headline">No binario</div>
                            </md-select-option>
                            <md-select-option value="Otro">
                                <div slot="headline">Otro</div>
                            </md-select-option>
    
                        </md-filled-select>
                    </div>
                    <md-filled-text-field 
                        label="Fecha de nacimiento"
                        type="date"
                        name="patient-birthdate"
                    ></md-filled-text-field>
                </div>

                <div class="simple-container direction-column gap-8 hidden top-margin-8" name="additional-data">
                    <span class="label-normal outline-text left-margin-8">Finanzas</span>
                    <md-filled-text-field 
                        label="Precio por cita"
                        type="number"
                        prefix-text="$"
                        name="patient-appt_price"
                    ></md-filled-text-field>

                    <span class="label-normal outline-text left-margin-8 top-margin-8">Contacto</span>
                    <md-filled-text-field 
                        label="Correo de contacto"
                        type="email"
                        name="patient-contact_email"
                    ></md-filled-text-field>
                    <md-filled-text-field 
                        label="Teléfono de contacto"
                        type="tel"
                        name="patient-contact_phone"
                    ></md-filled-text-field>
                    <md-filled-select
                        label="Tipo de teléfono"
                        name="patient-contact_phone_type"
                        >
                        <md-select-option value="Móvil/Celular">
                            <div slot="headline">Móvil / Celular</div>
                        </md-select-option>
                        <md-select-option value="Fijo/Casa">
                            <div slot="headline">Fijo / Casa</div>
                        </md-select-option>
                        <md-select-option value="Trabajo">
                            <div slot="headline">Trabajo</div>
                        </md-select-option>
                            <md-select-option value="">
                            <div slot="headline">-</div>
                        </md-select-option>
                    </md-filled-select>
                    
                    <span class="label-normal outline-text left-margin-8 top-margin-8">Educación</span>
                    <md-filled-text-field 
                        label="Centro de estudios"
                        name="patient-school"
                    ></md-filled-text-field>
                    <md-filled-text-field 
                        label="Nivel de estudios"
                        name="patient-school_grade"
                    ></md-filled-text-field>

                    <span class="label-normal outline-text left-margin-8 top-margin-8">Identificación</span>
                    <md-filled-text-field 
                        label="Identificación"
                        name="patient-identification"
                    ></md-filled-text-field>
                    <md-filled-select
                        label="Tipo de Identificación"
                        name="patient-identification_type"
                        >
                        <md-select-option value="DNI"><div slot="headline">DNI</div></md-select-option>
                        <md-select-option value="NIE"><div slot="headline">NIE</div></md-select-option>
                        <md-select-option value="CURP"><div slot="headline">CURP</div></md-select-option>
                        <md-select-option value="CURP"><div slot="headline">SSN</div></md-select-option>
                        <md-select-option value="CURP"><div slot="headline">CI</div></md-select-option>

                    </md-filled-select>

                    <span class="label-normal outline-text left-margin-8 top-margin-8">Otros</span>
                    <md-filled-text-field 
                        label="Dirección"
                        name="patient-address"
                    ></md-filled-text-field>
                    <md-filled-text-field 
                        label="Profesion"
                        name="patient-profession"
                    ></md-filled-text-field>
                    <md-filled-select
                        label="Estado cívil"
                        name="patient-marital_status"
                        >
                        <md-select-option value="Soltero/a"><div slot="headline">Soltero/a</div></md-select-option>
                        <md-select-option value="Casado/a"><div slot="headline">Casado/a</div></md-select-option>
                        <md-select-option value="Divorciado/a"><div slot="headline">Divorciado/a</div></md-select-option>
                        <md-select-option value="Viudo/a"><div slot="headline">Viudo/a</div></md-select-option>
                        <md-select-option value="Unión libre"><div slot="headline">Unión libre</div></md-select-option>
                        <md-select-option value="Otro"><div slot="headline">Otro</div></md-select-option>

                    </md-filled-select>

                </div>

                <div 
                    class="simple-container justify-between align-center gap-16 top-margin-16" 
                    style="
                        position: sticky;
                        bottom: -24px;
                        padding-bottom: 24px;
                        background: linear-gradient(360deg, var(--md-sys-color-background), transparent);
                        z-index: 1;
                    ">
                    <label class="simple-container gap-8 left-margin-8">
                        <md-checkbox aria-label="Definir datos adicionales" name="additional-data-checkbox"></md-checkbox>
                        Definir datos adicionales
                    </label>

                    <md-filled-button>
                        <md-icon slot="icon">person_add</md-icon>
                        <span data-text-content>Agregar paciente</span>
                    </md-filled-button>
                </div>

            </div>

        </form>
        <div class="content-box" style="visibility:hidden;"></div>

    </holder>

    <div class="overmessage padding-0" id="overmessage-create-patient-step-2" name="step-2">
        <div class="simple-container padding-16 position-absolute ">
            <md-filled-tonal-button type="button" onclick="toggleOvermessage('#overmessage-create-patient-step-2')"><md-icon slot="icon">arrow_back</md-icon>Ir atras</md-filled-tonal-button>
        </div>

        <div class="simple-container grow-1 align-center justify-center padding-24">
            <div class="simple-container direction-column width-100 max-width-600 gap-24">

                <div class="simple-container direction-column user-select-none gap-8">
                    <span class="display-small dm-sans weight-500">Agregar nuevo paciente</span>
                    <span class="headline-small outline-text bottom-margin-8">Información de contacto</span>
                </div>

                <div class="simple-container direction-column gap-8">
                    <md-filled-text-field 
                        label="Número de contacto"
                        type="tel"
                        name="patient-contact_phone"
                        class="no-reset"
                    ></md-filled-text-field>
                    <md-filled-text-field 
                        label="Correo de contacto"
                        type="email"
                        name="patient-contact_email"
                        class="no-reset"
                    ></md-filled-text-field>
                </div>

                <div class="simple-container justify-right">
                    <md-filled-button 
                        type="button" 
                        trailing-icon
                        name="go-step-3"
                        >
                        <md-icon slot="icon">arrow_forward</md-icon>
                        Siguiente
                    </md-filled-button>
                </div>

                <!-- <span class="body-large outline-text dm-sans">Completa los campos a continuación para agregar un nuevo paciente</span> -->
            </div>

        </div>

    </div>

    <!-- </form> -->
</window><window
    id="window-patient-data"
    data-flip-id="animate"
    class="increased on-background-text full-size"
    >
    
    <div class="simple-container padding-16 justify-between">
        <md-icon-button type="button" onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <md-filled-button type="submit" form="form-edit-patient">Guardar</md-filled-button>
    </div>
    <holder class="align-center gap-24">
        <form onsubmit="PatientsManager.editPatient(event)" id="form-edit-patient" class="simple-container width-100 align-center direction-column grow-1">
        <div class="simple-container direction-column width-100 max-width-600 bottom-margin-24">
            <span class="display-small dm-sans weight-500">Editar datos</span>
            <span class="body-large outline-text dm-sans">Aquí puedes editar los datos del paciente</span>
        </div>
        <div class="simple-container direction-column width-100 max-width-600 gap-8 grow-1">

            <span class="label-normal outline-text left-margin-8 top-margin-8">Información Personal</span>
            <md-filled-text-field 
                label="Nombre completo"
                name="patient-name"
                class="no-reset"
            ></md-filled-text-field>
            <md-filled-text-field 
                label="Genero"
                name="patient-gender"
                class="no-reset"
            ></md-filled-text-field>
            <md-filled-text-field 
                label="Fecha de nacimiento"
                type="date"
                name="patient-birthdate"
                class="no-reset"
            ></md-filled-text-field>
            <md-filled-select 
                label="Estado del paciente"
                name="patient-status"
                class="no-reset"
                >
                <md-select-option value="1">
                    <div slot="headline">Paciente activo</div>
                </md-select-option>
                <md-select-option value="2">
                    <div slot="headline">Paciente dado de alta</div>
                </md-select-option>
                <md-select-option value="3">
                    <div slot="headline">Paciente inactivo</div>
                </md-select-option>
            </md-filled-select>

            <span class="label-normal outline-text left-margin-8 top-margin-8">Finanzas</span>
            <md-filled-text-field
                label="Precio por cita"
                type="number"
                name="patient-appt_price"
                prefix-text="$"
            ></md-filled-text-field>

            <span class="label-normal outline-text left-margin-8 top-margin-8">Contacto</span>
            <md-filled-text-field 
                label="Correo de contacto"
                type="email"
                name="patient-contact_email"
                class="no-reset"
            ></md-filled-text-field>
            <md-filled-text-field 
                label="Teléfono de contacto"
                type="tel"
                name="patient-contact_phone"
                class="no-reset"
            ></md-filled-text-field>
            <md-filled-select
                label="Tipo de teléfono"
                name="patient-contact_phone_type"
                >
                <md-select-option value="Móvil/Celular">
                    <div slot="headline">Móvil / Celular</div>
                </md-select-option>
                <md-select-option value="Fijo/Casa">
                    <div slot="headline">Fijo / Casa</div>
                </md-select-option>
                <md-select-option value="Trabajo">
                    <div slot="headline">Trabajo</div>
                </md-select-option>
                    <md-select-option value="">
                    <div slot="headline">-</div>
                </md-select-option>
            </md-filled-select>

            <span class="label-normal outline-text left-margin-8 top-margin-8">Educación</span>
            <md-filled-text-field 
                label="Centro de estudios"
                name="patient-school"
                class="no-reset"
            ></md-filled-text-field>
            <md-filled-text-field 
                label="Nivel de estudios"
                name="patient-school_grade"
                class="no-reset"
            ></md-filled-text-field>

            <span class="label-normal outline-text left-margin-8 top-margin-8">Identificación</span>
            <md-filled-text-field 
                label="Identificación"
                name="patient-identification"
            ></md-filled-text-field>
            <md-filled-select
                label="Tipo de Identificación"
                name="patient-identification_type"
                >
                <md-select-option value="DNI"><div slot="headline">DNI</div></md-select-option>
                <md-select-option value="NIE"><div slot="headline">NIE</div></md-select-option>
                <md-select-option value="CURP"><div slot="headline">CURP</div></md-select-option>
                <md-select-option value="CURP"><div slot="headline">SSN</div></md-select-option>
                <md-select-option value="CURP"><div slot="headline">CI</div></md-select-option>

            </md-filled-select>

            <span class="label-normal outline-text left-margin-8 top-margin-8">Otros</span>
            <md-filled-text-field 
                label="Dirección"
                name="patient-address"
            ></md-filled-text-field>
            <md-filled-text-field 
                label="Profesion"
                name="patient-profession"
            ></md-filled-text-field>
            <md-filled-select
                label="Estado cívil"
                name="patient-marital_status"
                >
                <md-select-option value="Soltero/a"><div slot="headline">Soltero/a</div></md-select-option>
                <md-select-option value="Casado/a"><div slot="headline">Casado/a</div></md-select-option>
                <md-select-option value="Divorciado/a"><div slot="headline">Divorciado/a</div></md-select-option>
                <md-select-option value="Viudo/a"><div slot="headline">Viudo/a</div></md-select-option>
                <md-select-option value="Unión libre"><div slot="headline">Unión libre</div></md-select-option>
                <md-select-option value="Otro"><div slot="headline">Otro</div></md-select-option>

            </md-filled-select>
            
            <md-filled-text-field
                style="min-height: 300px;"
                label="Notas / Observaciones"
                type="textarea"
                name="patient-notes"          
            ></md-filled-text-field>

            <!-- <div class="simple-container flex-wrap gap-8">
                <div class="simple-container grow-1 basis-normal direction-column gap-8">
                    
                    
                </div>
                <div class="simple-container grow-1 basis-normal direction-column gap-8">
                    
                    
                    
                </div>
            </div>
            <div class="simple-container direction-column">
                
            </div>
            
            <div class="simple-container grow-1 direction-column">
                <md-filled-text-field
                    style="min-height: 300px;"
                    label="Notas / Observaciones"
                    type="textarea"
                    name="patient-notes"          
                ></md-filled-text-field>
            </div> -->

            
            <div class="content-box" style="visibility:hidden;"></div>
        </div>
        </form>
    </holder>
    
</window><window
    id="window-search-patient"
    class="increased slim h-auto"
    data-flip-id="animate"
    >
    <div class="simple-container padding-16 gap-16">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <span class="headline-medium dm-sans user-select-none">Buscador</span>
    </div>
    <holder class="on-background-text gap-0">
        <form onsubmit="PatientsManager.search(event)" class="simple-container gap-8 flex-wrap justify-right">
            <input id="search-patient-field" class="grow-1 rounded" type="search" autocomplete="off" placeholder="Buscar un paciente">
            <md-filled-button role="presentation" value="" has-icon=""><md-icon slot="icon" aria-hidden="true">search</md-icon>Buscar</md-filled-button>
        </form>
        <div id="response-search-patient-results" class="top-margin-8 simple-container direction-column gap-8"></div>
        <div class="simple-container width-100 container-info-empty-table grow-1"></div>
        <div class="simple-container" id="pagination-search"></div>
    </holder>
</window><window 
    id="window-patient-billing-data"
    data-flip-id="animate"
    class="increased semi-slim"
    >
    <div class="simple-container padding-16">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder >

        <div class="simple-container direction-column bottom-margin-24">
            <span class="display-small dm-sans weight-500">Datos fiscales</span>
            <span class="body-large outline-text dm-sans">Aquí puedes configurar los datos fiscales que se mostrarán en las facturas que generes para este paciente.</span>
        </div>

        <form 
            id="form-patient-billing-data"
            class="simple-container direction-column gap-16"
            autocomplete="off"
            >

            <span class="headline-small">Datos personales</span>
            <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">Nombre Completo</span>
                <input name="billing_name" class="background outline-1 focus-primary" type="text">
            </div>
            <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">NIF / CIF</span>
                <input name="billing_nif_cif" class="background outline-1 focus-primary" type="text">
            </div>

            <span class="headline-small top-margin-24">Direccion fiscal</span>
            <div class="simple-container flex-wrap gap-16">
                <div class="simple-container direction-column gap-8 grow-1">
                    <span class="label-large outline-text dm-sans">Calle</span>
                    <input name="billing_address_street" class="background outline-1 focus-primary" type="text">
                </div>
                <div class="simple-container direction-column gap-8 grow-1">
                    <span class="label-large outline-text dm-sans">Número, Apartamento, Puerta</span>
                    <input name="billing_address_number" class="background outline-1 focus-primary" type="text">
                </div>
            </div>
            <div class="simple-container flex-wrap gap-16">
                <div class="simple-container direction-column gap-8 grow-1">
                    <span class="label-large outline-text dm-sans">Ciudad</span>
                    <input name="billing_address_city" class="background outline-1 focus-primary" type="text">
                </div>
                <div class="simple-container direction-column gap-8 grow-1">
                    <span class="label-large outline-text dm-sans">Provincia</span>
                    <input name="billing_address_state" class="background outline-1 focus-primary" type="text">
                </div>
                <div class="simple-container direction-column gap-8 grow-1">
                    <span class="label-large outline-text dm-sans">Código Postal</span>
                    <input name="billing_address_zip_code" class="background outline-1 focus-primary" type="text">
                </div>
            </div>

            


            <div class="simple-container justify-right" style="background: linear-gradient(360deg, var(--md-sys-color-background), transparent); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; box-sizing:border-box;">
                <md-filled-button type="submit">Guardar</md-filled-button>
            </div>

        
        </form>

    </holder>
</window><window 
    id="window-create-appt"
    data-flip-id="animate"
    class="increased slim h-auto"
    >
    <div class="simple-container padding-16 align-center gap-8">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <!-- <span class="headline-small on-background-text">Agendar cita</span> -->
    </div>
    <holder class="on-background-text">
        <form 
            onsubmit="ApptsManager.createAppt(event)" 
            id="form-create-appt"
            class="simple-container direction-column gap-16"
            >

            <div class="simple-container gap-8 align-center bottom-margin-16">
                <md-icon class="pretty small filled">calendar_add_on</md-icon>
                <headline class="headline-medium weight-600 dm-sans">Agendar cita</headline>
            </div>

            <div class="simple-container direction-column gap-16 flex-wrap">
                <div class="simple-container direction-column gap-16 grow-1 basis-normal">
                    <div class="simple-container direction-column gap-8">
                        <div class="simple-container justify-between align-center">
                            <span class="label-normal outline-text left-margin-8">Paciente</span>
                            <span onclick="PatientsManager.changeToCreatePatientWindow()" class="background data-line cursor-pointer label-small outline-text left-margin-8"><md-ripple></md-ripple><md-icon class="dynamic">add</md-icon>Nuevo paciente</span>

                        </div>
                        <md-filled-select
                            label="Selecciona un paciente"
                            id="create-appt-patients_option_list"
                            name="appt-patient"
                            shrink='true'
                            >
                            <md-select-option value="0">
                                <div slot="headline">No hay pacientes</div>
                            </md-select-option>
                        </md-filled-select>
                    </div>
        
                    <div class="simple-container direction-column gap-8">
                        <span class="label-normal outline-text left-margin-8">Fecha y hora</span>
                        <input type="date" name="appt-date" onclick="this.showPicker()">
                        <input type="time" name="appt-time" onclick="this.showPicker()">
                    </div>
                </div>
                <div class="simple-container direction-column gap-16 grow-1 basis-normal hidden" name="additional-data">
                    <div class="simple-container direction-column gap-8">
                        <span class="label-normal outline-text left-margin-8">Datos adicionales</span>

                        <md-filled-select
                            label="Estado del pago"
                            id=""
                            name="appt-payment-status"
                            value="1"
                            class="no-reset"
                            >
                            <md-select-option value="1">
                                <md-icon slot="start" class="filled error-text">money_off</md-icon>
                                <div slot="headline">Pago pendiente</div>
                            </md-select-option>
                            <md-select-option value="2">
                                <md-icon slot="start" class="filled primary-text">check_circle</md-icon>
                                <div slot="headline">Pago completado</div>
                            </md-select-option>
                        </md-filled-select>
                        <md-filled-text-field
                            data-allow-empty="true"
                            label="Precio de cita"
                            type="number"
                            prefix-text="$"
                            name="appt-price"
                        ></md-filled-text-field>

                        <md-filled-select
                            name="appt-status" 
                            label="Estado de la cita"
                            >
                            <md-select-option value="1" selected>
                                <div slot="headline">Cita pendiente</div>
                            </md-select-option>
                            <md-select-option value="2">
                                <div slot="headline">Cita completada</div>
                            </md-select-option>
                            <md-select-option value="3">
                                <div slot="headline">Cita cancelada</div>
                            </md-select-option>
                        </md-filled-select>

                        <md-filled-text-field
                            data-allow-empty="true"
                            name="appt-concept" 
                            label="Nota de la cita"
                            >
                        </md-filled-text-field>

                        <md-filled-select
                            label="Modalidad"
                            name="appt-mode"
                            >
                            <md-select-option value="1">
                                <md-icon slot="start" class="filled">pin_drop</md-icon>
                                <div slot="headline">Presencial</div>
                            </md-select-option>
                            <md-select-option value="2">
                                <md-icon slot="start" class="filled">video_call</md-icon>
                                <div slot="headline">En línea</div>
                            </md-select-option>
                        </md-filled-select>

                        <md-filled-text-field
                            data-allow-empty="true"
                            class="hidden"
                            name="appt-meeting-url"
                            label="Enlace de la reunión"
                            pattern="https://.*"
                            placeholder="https://meet.google.com/..."
                            autocomplete="off"
                            type="url"
                            >
                        </md-filled-text-field>

                    </div>
                </div>
            </div>



            <div class="simple-container justify-between align-center gap-16 top-margin-8 bottom-margin-16" name="buttons-area">
                <label class="simple-container gap-8 left-margin-8 outline-text">
                    <md-checkbox aria-label="Definir datos adicionales" name="additional-data-checkbox"></md-checkbox>
                    Definir datos adicionales
                </label>
                <md-filled-button style="margin-left:auto;"><md-icon slot="icon" class="filled">calendar_add_on</md-icon>Agendar</md-filled-button>
            </div>

            

            <!-- <md-filled-text-field
                id="datepicker-test"
                labe="Fecha"
                type="date"
            ></md-filled-text-field> -->

        </form>
    </holder>
</window><window 
    id="window-create-appt-test"
    class="increased semi-slim on-background-text dm-sans-all create-appt-container window-create-appt"
    data-flip-id="animate"
    >
    <holder class="padding-0 direction-row gap-0 flex-wrap">

        <div class="left-side gap-16 max-width-100 overflow-hidden">

            <div class="simple-container justify-between flex-no-wrap max-width-100">

                <div class="simple-container gap-16 align-center overflow-auto">
                    <div>
                        <md-filled-tonal-icon-button class="solid" onclick="toggleWindow()"><md-icon>close</md-icon></md-filled-tonal-icon-button>
                    </div>
                    <span class="headline-small" style="overflow:hidden;text-overflow:ellipsis;text-wrap:nowrap;" data-role='sb-calendar-month-year'>[Mes seleccionado]</span>
                </div>
                <div class="simple-container gap-8">
                    <md-filled-tonal-icon-button class="solid" data-action='sb-calendar-prev'><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
                    <md-filled-tonal-icon-button class="solid" data-action='sb-calendar-next'><md-icon>arrow_forward</md-icon></md-filled-tonal-icon-button>
                </div>
            </div>

            <div class="simple-container small-numbers compact" id="create-appt-calendar" style="height:300px;"></div>

            <!-- <div class="simple-container" style="width:100%; height:300px; background:var(--md-sys-color-surface-container-low); border-radius:16px;"></div> -->


            <div class="simple-container direction-column">
                <label class="body-medium outline-text simple-container align-center padding-8 gap-8">
                    <md-checkbox class="small" data-role="checkbox-care-busy"></md-checkbox>
                    Tomar en cuenta espacios ocupados
                </label>
                <label class="body-medium outline-text simple-container align-center padding-8 gap-8">
                    <md-checkbox class="small" data-role="checkbox-care-availability"></md-checkbox>
                    Tomar en cuenta disponibilidad
                </label>
            </div>
        </div>

        <form class="right-side">

            <div class="main-container-time-slots" id="create-appt-time-main-slots-container">
                <div class="slots-header">
                    <md-icon-button type="button" data-action="close-time-slots"><md-icon>close</md-icon></md-icon-button>
                    <span class="body-large" data-role="time-slots-day-label">[Día]</span>
                    <div class="simple-container grow-1"></div>
                    <div class="container-custom-time-input" id="container-custom-time-input">
                        <span class="data-line cursor-pointer label-small weight-500" data-action='open-custom-time-input' style="max-height: fit-content;">Hora personalizada</span>

                        <div class="custom-time-content">
                            <div>
                                <md-filled-tonal-icon-button type="button" class="solid" data-action='close-custom-time-input'><md-icon>close</md-icon></md-filled-tonal-icon-button>

                            </div>
                            <span class="headline-medium weight-600 line-height-1">Elige una hora manualmente</span>

                            <div class="simple-container direction-column gap-8">
                                <span class="label-large outline-text dm-sans">Hora</span>
                                <input onclick="this.showPicker()" name="custom_time" class="background outline-1 focus-primary no-reset" type="time">
                            </div>
            
                            <div class="simple-container justify-right">
                                <md-filled-button data-action='set-custom-time-slot' type="button">Confirmar</md-filled-button>
                            </div>
                        </div>
                    </div>
                </div>
                <div
                    data-role="time-slots-container"
                    class="simple-container direction-column gap-4 padding-8 grow-1"
                    >
                    <button class="style-transparent inverted"><md-ripple></md-ripple>8:00 AM</button>
                    <button class="style-transparent inverted"><md-ripple></md-ripple>9:00 AM</button>
                    <button class="style-transparent inverted"><md-ripple></md-ripple>10:00 AM</button>
                    <button class="style-transparent inverted"><md-ripple></md-ripple>11:00 AM</button>
                    <button class="style-transparent inverted"><md-ripple></md-ripple>12:00 PM</button>
                    <button class="style-transparent inverted"><md-ripple></md-ripple>1:00 PM</button>
                </div>

               

            </div>

            <!-- <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">Nombre Completo</span>
                <input name="billing_name" class="transparent outline-1 focus-primary no-reset" type="text">
            </div> -->

            <md-filled-select
                label="Selecciona un paciente"
                data-role="select-patient"
                name="patient_id"
                shrink='true'
                >
                <md-select-option value="0">
                    <div slot="headline">No hay pacientes</div>
                </md-select-option> 
            </md-filled-select>

            <div class="simple-container direction-column gap-8 grow-1 overflow-auto">
                <!-- <span class="body-large weight-500 outline-text">Horarios seleccionados:</span> -->

                <div class="simple-container direction-column gap-4 grow-1" data-role="container-selected-slots">
                </div>
                    
            </div>

            <div class="simple-container justify-right" form="form-create-appts">
                <md-filled-button type="submit">Agendar</md-filled-button>
            </div>
            
        </form>

    </holder>
</window>

<div Popover id="popover-edit-event-slot" class="style-modern inverted dm-sans-all padding-8 top-padding-safe-area">
    
    <div class="content-box style-glass padding-8">
        <div class="simple-container align-center">
            <button popovertarget="popover-edit-event-slot" popoveraction="hide" class="style-transparent small-for-icon"><md-icon>close</md-icon><md-ripple></md-ripple></button>
        </div>
        <div class="simple-container direction-column gap-4 padding-8">
            <span class="body-large" data-role="event-slot-date">...</span>
            <span class="body-large weight-500" data-role="event-slot-time">...</span>
        </div>
    </div>


    <form class="simple-container direction-column gap-8 padding-8">
        <md-filled-select
            label="Estado del pago"
            id=""
            name="appt_payment_status"
            value="1"
            class="no-reset"
            >
            <md-select-option value="1">
                <md-icon slot="start" class="filled error-text">money_off</md-icon>
                <div slot="headline">Pago pendiente</div>
            </md-select-option>
            <md-select-option value="2">
                <md-icon slot="start" class="filled primary-text">check_circle</md-icon>
                <div slot="headline">Pago completado</div>
            </md-select-option>
        </md-filled-select>
        <md-filled-text-field
            data-allow-empty="true"
            label="Precio de cita"
            type="number"
            prefix-text="$"
            name="appt_price"
        ></md-filled-text-field>

        <md-filled-select
            name="appt_status" 
            label="Estado de la cita"
            >
            <md-select-option value="1" selected>
                <div slot="headline">Cita pendiente</div>
            </md-select-option>
            <md-select-option value="2">
                <div slot="headline">Cita completada</div>
            </md-select-option>
            <md-select-option value="3">
                <div slot="headline">Cita cancelada</div>
            </md-select-option>
        </md-filled-select>

        <md-filled-text-field
            data-allow-empty="true"
            name="appt_concept" 
            label="Nota de la cita"
            >
        </md-filled-text-field>

        <md-filled-select
            label="Categoría"
            data-role="select-category"
            name="category_id"
            shrink='true'
            >
            <md-select-option value="0">
                <div slot="headline">No tienes categorías</div>
            </md-select-option>
        </md-filled-select>

        <md-filled-select
            label="Modalidad"
            name="appt_mode"
            >
            <md-select-option value="1">
                <md-icon slot="start" class="filled">pin_drop</md-icon>
                <div slot="headline">Presencial</div>
            </md-select-option>
            <md-select-option value="2">
                <md-icon slot="start" class="filled">video_call</md-icon>
                <div slot="headline">En línea</div>
            </md-select-option>
        </md-filled-select>

        <md-filled-text-field
            data-allow-empty="true"
            class="hidden"
            name="appt_meeting_url"
            label="Enlace de la reunión"
            pattern="https://.*"
            placeholder="https://meet.google.com/..."
            autocomplete="off"
            type="url"
            >
        </md-filled-text-field>

        <div class="simple-container direction-column" type="submit" style="margin-top:8px;">
            <md-filled-button class="big squared">Guardar</md-filled-button>
        </div>

    </form>

    
</div><window
    id="window-appt-data"
    data-flip-id="animate"
    class="increased semi-slim h-auto dm-sans-all"
    >
    <div class="simple-container padding-24 b-padding-8 justify-between flex-wrap align-center gap-8">
        <div class="simple-container gap-8 align-center">
            <md-filled-tonal-icon-button class="solid" onclick="toggleWindow('#window-appt-data')"><md-icon>close</md-icon></md-filled-tonal-icon-button>
            <span class="headline-medium weight-500 dm-sans on-background-text">Cita</span>
        </div>
        <div class="simple-container gap-8">
            <div class="simple-container position-relative">
                <md-icon-button 
                    id="toggler-menu-appt-features"
                    onclick="toggleMenu('menu-appt-features')"
                    >
                    <md-icon>more_vert</md-icon>
                </md-icon-button>
                <md-menu anchor-corner="end-end" menu-corner="start-end" id="menu-appt-features" class="style-modern" style="min-width:264px; right:0;" anchor="toggler-menu-appt-features">
                    <md-menu-item data-action='open-appt-notes'>
                        <md-icon slot="start" aria-hidden="true" class="filled">article</md-icon>
                        <div slot="headline">Notas de la cita</div>
                    </md-menu-item>
                    <md-menu-item data-action='open-appt-log'>
                        <md-icon slot="start" aria-hidden="true" class="filled">history</md-icon>
                        <div slot="headline">Historial de cambios</div>
                    </md-menu-item>
                    <md-menu-item class="hidden" name="md-menu-item-appt-invoice">
                        <md-icon slot="start" aria-hidden="true" class="filled">euro</md-icon>
                        <div slot="headline">Facturas</div>
                    </md-menu-item>
                </md-menu>
            </div>
        </div>
    </div>
    <holder class="on-background-text gap-16">
        <div class="content-box light-color border-radius-24 padding-16 gap-8">
            <span class="label-normal outline-text">Paciente</span>
            <div class="simple-container gap-8  flex-wrap">
                <span class="body-large data-line hover-outline cursor-pointer" name="patient-name"><span class="outline-text"><i>Nombre del paciente</i></span></span>
                <span class="data-line body-large simple-container align-center cursor-pointer light-color" name="patient-direct-access"><md-ripple></md-ripple><md-icon class="dynamic outline-text">arrow_outward</md-icon></span>
            </div>
        </div>

        <form 
            id="form-edit-appt"
            class="simple-container direction-column gap-16"
            >

            <div class="display:none">
                <input type="hidden" name="appt_id" value="">
                <input type="hidden" name="patient_id" value="">
            </div>

            <div class="simple-container gap-16 flex-wrap">  

                <div class="simple-container direction-column gap-8 grow-1 basis-normal">
                    <span class="label-normal outline-text left-margin-8">Fecha y hora</span>
                    <input type="date" name="appt_date" onclick="this.showPicker()">
                    <input type="time" name="appt_time" onclick="this.showPicker()">
                </div>

                <div class="simple-container direction-column gap-8 grow-1 basis-normal">
                    <span class="label-normal outline-text left-margin-8">Datos generales</span>
                    <md-filled-select
                        name="appt_status" 
                        >
                        <md-select-option value="1">
                            <div slot="headline">Cita pendiente</div>
                        </md-select-option>
                        <md-select-option value="2">
                            <div slot="headline">Cita completada</div>
                        </md-select-option>
                        <md-select-option value="3">
                            <div slot="headline">Cita cancelada</div>
                        </md-select-option>
                    </md-filled-select>
                    <md-filled-text-field
                        name="appt_concept" 
                        label="Nota de la cita"
                        >
                    </md-filled-text-field>
                </div>
            </div>

            <div class="simple-container gap-16 flex-wrap">
                <div class="simple-container direction-column gap-8 grow-1 basis-normal">
                    <span class="label-normal outline-text left-margin-8">Finanzas</span>
                    <md-filled-text-field 
                        type="number"
                        name="appt_price"
                        prefix-text="$"
                        class=""
                        >
                    </md-filled-text-field>
                    <md-filled-select
                        id=""
                        name="appt_payment_status"
                        value="1"
                        >
                        <md-select-option value="1">
                            <md-icon slot="start" class="filled error-text">money_off</md-icon>
                            <div slot="headline">Pago pendiente</div>
                        </md-select-option>
                        <md-select-option value="2">
                            <md-icon slot="start" class="filled primary-text">check_circle</md-icon>
                            <div slot="headline">Pago completado</div>
                        </md-select-option>
                    </md-filled-select>
                </div>
                <div class="simple-container direction-column gap-8 grow-1 basis-normal">
                    <span class="label-normal outline-text left-margin-8">Modalidad</span>
                    <md-filled-select
                        name="appt_mode"
                        >
                        <md-select-option value="1">
                            <md-icon slot="start" class="filled">pin_drop</md-icon>
                            <div slot="headline">Presencial</div>
                        </md-select-option>
                        <md-select-option value="2">
                            <md-icon slot="start" class="filled">video_call</md-icon>
                            <div slot="headline">En línea</div>
                        </md-select-option>
                    </md-filled-select>

                    <md-filled-text-field
                        data-allow-empty="true"
                        class="hidden"
                        name="appt_meeting_url"
                        label="Enlace de la reunión"
                        pattern="https://.*"
                        placeholder="https://meet.google.com/..."
                        autocomplete="off"
                        type="url"
                        >
                    </md-filled-text-field>

                     <md-filled-select
                        label="Categoría"
                        data-role="select-category"
                        name="category_id"
                        shrink='true'
                        >
                        <md-select-option value="0">
                            <div slot="headline">No tienes categorías</div>
                        </md-select-option>
                    </md-filled-select>
                </div>
            </div>

            <div
                data-role="container-window-actions-normal" 
                class="simple-container direction-row-column justify-between gap-8 bottom-padding-safe-area mobile-bottom-action-bar"
                >
                <md-text-button
                    type="button"
                    data-action="appt-soft-delete"
                    >
                    <md-icon slot="icon">delete</md-icon>
                    Mover a papelera
                </md-text-button>
                <md-filled-button type="submit" class="dm-sans flex-0-1">Guardar cambios</md-filled-button>
            </div>

            <div
                data-role="container-window-actions-deleted" 
                class="simple-container direction-row-column gap-8 bottom-padding-safe-area mobile-bottom-action-bar justify-right hidden"
                >

                <md-filled-tonal-button
                    type="button"
                    data-action="appt-delete-permanently"
                    class="delete"
                    >
                    <md-icon slot="icon">delete_forever</md-icon>
                    Eliminar permanentemente
                </md-filled-tonal-button>
                <md-filled-button
                    type="button"
                    data-action='appt-soft-restore'
                    >
                    <md-icon slot="icon">restart_alt</md-icon>
                    Recuperar cita
                </md-filled-button>
            </div>

        </form>
    </holder>

    <div class="overmessage" id="overmessage-appt-data-action-logs">
        

        <div class="simple-container width-100 justify-center">
            <div class="simple-container direction-column width-100 max-width-800 gap-24">
                <div class="simple-container align-center gap-16">
                    <md-filled-tonal-icon-button onclick="toggleOvermessage();">
                        <md-icon>arrow_back</md-icon>
                    </md-filled-tonal-icon-button>
                    <span class="headline-small on-background-text">Historial de cambios</span>
                    <!-- <md-text-button onclick="toggleOvermessage(); "><md-icon slot="icon">arrow_back</md-icon>Volver</md-text-button> -->
                </div>
                <div 
                    class="simple-container direction-column gap-8 bottom-margin-24" 
                    data-role='container-appt-logs'
                    >
                </div>
            </div>
        </div>

        
    </div>

    <div class="overmessage align-center" id="overmessage-appt-data-notes">
        <div class="simple-container direction-column width-100 max-width-800 gap-24">
            
            <div class="simple-container justify-between gap-16">
                <div class="simple-container gap-16 align-center">
                    <md-filled-tonal-icon-button onclick="toggleOvermessage();">
                        <md-icon>arrow_back</md-icon>
                    </md-filled-tonal-icon-button>
                    <span class="headline-small on-background-text">Notas de la cita</span>
                </div>
                <div class="simple-container">
                    <md-filled-button
                        name="button-create-appt-note"
                        data-flip-id="animate"
                        >
                        <md-icon slot="icon">edit_square</md-icon>
                        Nueva nota
                    </md-filled-button>
                </div>
                <!-- <md-text-button onclick="toggleOvermessage(); "><md-icon slot="icon">arrow_back</md-icon>Volver</md-text-button> -->
            </div>

            <div class="simple-container direction-column gap-8" data-role="container-appt-notes" name="response-appt-notes-table-container"></div>
            <div class="simple-container"></div>
        </div>
    </div>

</window>
<window
    id="window-test-cfo"
    data-flip-id="animate"
    >
    <div class="simple-container padding-16 align-center gap-8">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <span class="body-large outline-text">Registrar paciente para otros </span>
    </div>
    <holder class="on-background-text">

        <form 
            class="simple-container direction-column gap-16" 
            id="form-cfo_test"
            onsubmit="PatientsManager.createPatientForOther(event)"
            >

            <div class="simple-container gap-8 flex-wrap align-center">
                <md-outlined-text-field
                    class="no-reset grow-1"
                    label="Id de origen" 
                    disabled="true"
                    value="361"
                ></md-outlined-text-field>
                <md-icon>arrow_forward</md-icon>
                <md-outlined-text-field
                    class="grow-1"
                    label="Id objetivo"
                    type="number"
                    id="test-create-patient_owner_id"
                ></md-outlined-text-field>
            </div>
            
            
            <md-outlined-text-field
                class="no-reset"
                label="Nombre del paciente"
                value="Nombre de prueba"
                id="test-create-patient_name"
            ></md-outlined-text-field>

            <div class="simple-container justify-right">
                <md-filled-button type="submit">
                    Registrar
                </md-filled-button>
            </div>

        </form>


    </holder>

</window><window
    id="window-test-create_permission"
    data-flip-id="animate"
    >
    <div class="simple-container padding-16 align-center gap-8">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <span class="body-large outline-text">Asignarción de permisos</span>
    </div>
    <holder>
        <form 
            class="simple-container direction-column gap-16" 
            id="form-test-create_permissions"
            onsubmit="PermissionsManager.createPermission(event)"
            >

            <md-outlined-text-field
                class="no-reset"
                label="Id de la acción"
                type="number"
                value="1"
                id="test-create-permission_action_id"
            ></md-outlined-text-field>

            <div class="simple-container gap-8 flex-wrap align-center">
                <md-outlined-text-field
                    class="no-reset grow-1"
                    label="Id de origen"
                    disabled="true"
                    value="361"
                ></md-outlined-text-field>
                <md-icon>arrow_forward</md-icon>
                <md-outlined-text-field
                    class="grow-1"
                    label="Id objetivo"
                    type="number"
                    id="test-create-permission_owner_id"
                ></md-outlined-text-field>
            </div>

            <div class="simple-container justify-right">
                <md-filled-button type="submit">
                    Asignar permisos
                </md-filled-button>
            </div>

        </form>
    </holder>

</window><window
    id="window-income"
    class="increased slim"
    >
    <div class="simple-container padding-16 position-absolute  z-index-1">
        <md-icon-button onclick="togglePrettyWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder class="padding-0">
        <div class="content-box gap-0 grow-1 justify-center basis-small user-select-none secondary-container on-secondary-containert-text hover-outline">
            <span class="label-normal" data-label>Ingresos estimados</span>
            <span class="headline-small dm-sans primary-text" data-value>$3,224.00</span>
        </div>
    </holder>

</window><window
    id="window-create-consent"
    class="increased on-background-text"
    data-flip-id="animate"
    >
    <div class="simple-container padding-16">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder class="align-center">

        <div class="simple-container direction-column width-100 max-width-800 gap-24">
            
            <div class="simple-container direction-column gap-8">
                <span class="display-small dm-sans weight-500 line-height-1" name="title">Generar Consentimiento Informado</span>
                <span class="body-normal outline-text" name="subtitle">
                    Personaliza y genera un consentimiento informado para el paciente <span name="patient-name"></span>
                </span>
            </div>

            <div class="simple-container width-100 outline-variant" style="height:1px"></div>

            <form id="form-create-consent" class="simple-container direction-column gap-4">
                <div class="content-box gap-0 direction-column user-select-none">
                    <span class="headline-small outline-text" name="field-title">Declaración de consentimiento del paciente</span>
                    <span class="body-small outline-text" name="field-subtitle">Este texto puede ser editado según el tratamiento o necesidades del paciente. Asegúrate de incluir todos los detalles relevantes.</span>
                </div>
                <md-filled-text-field 
                    type="textarea"
                    value="..."
                    style="min-height: 308px"
                    class="no-reset"   
                    placeholder="Escribe aquí el documento"
                    name="consent-declaration"
                ></md-filled-text-field>

                <div class="simple-container direction-column" style="width:100%;">
                    <span class="padding-16 headline-small dm-sans"><md-icon class="pretty small" style="margin-right:8px;">draw</md-icon>Firma del psicólogo(a)</span>
                    <canvas name="canvas-therapist-signature" class="hover-outline"style="width:100%; height: 300px;"></canvas>
                    <span class="body-medium dm-sans outline-text top-margin-8" >Firme en el espacio anterior para validar el consentimiento. Si necesita corregir su firma, presione 'Borrar firma'.</span>
                    <div class="simple-container top-margin-16 justify-between">
                        <md-outlined-button name="button-clear-canvas" type="button"><md-icon slot="icon">ink_eraser</md-icon>Borrar firma</md-outlined-button>
                    </div>
                </div>

                <span class="body-small outline-text bottom-margin-8">
                    Una vez generado, el consentimiento se puede enviar al paciente mediante un enlace seguro para su revisión y firma digital. Esto garantiza la validez y registro del acuerdo terapéutico.
                </span>

                <div class="simple-container justify-right gap-8">
                    <!-- <md-filled-tonal-button class="delete-light" type="button" onclick="toggleWindow()">Cancelar</md-filled-tonal-button> -->
                    <md-filled-button trailing-icon type="submit"><md-icon slot="icon">arrow_forward</md-icon><span name="button-submit-text">Generar consentimiento</span></md-filled-button>
                </div>

                <div class="simple-container padding-40"></div>

            </form>
        </div>

        


    </holder>

</window><window
    id="window-consent-share"
    data-flip-id="animate"
    class="on-background-text"
    >
    <div class="simple-container padding-16">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder>
        <div class="simple-container gap-8 direction-column align-center justify-center bottom-margin-16" name="success-message-parent">
            <md-icon class="pretty medium filled">check_circle</md-icon>
            <span class="headline-small dm-sanas text-center">Documento generado con éxito</span>
            <span class="body-medium text-center ">Ahora comparte el enlace y el código con el paciente para que pueda revisar y firmar el documento.</span>
        </div>

        <div class="simple-container gap-8 direction-column align-center justify-center bottom-margin-16" name="share-message-parent">
            <md-icon class="pretty medium filled">ios_share</md-icon>
            <span class="headline-small dm-sanas text-center">Compartir documento</span>
            <span class="body-medium text-center ">Envía el enlace y el código al paciente para que pueda revisar y firmar el documento.</span>
        </div>

        <div class="content-box border-radius-16 padding-16 gap-4 grow-1">
            <span class="label-normal user-select-none"> Enlace único para la firma</span>
            <span class="body-medium outline-text user-select-none bottom-margin-8">El paciente debe abrir este enlace para revisar y firmar el documento.</span>
            <div class="simple-container">
                <span class="body-large overflow-auto max-width-100 white-space-no-wrap data-line selectable" name="consent-url">...</span>
            </div>
            <div class="simple-container">
                <button class="style-6 hover-outline" name="button-copy-url">
                    <md-ripple></md-ripple>
                    Copiar enlace
                </button>
            </div>
        </div>

        <div class="content-box border-radius-16 padding-16 gap-4 grow-1">
            <span class="label-normal user-select-none">Código de acceso</span>
            <span class="body-medium outline-text user-select-none bottom-margin-8">El paciente deberá ingresar este código en el enlace para acceder al documento.</span>
            <div class="simple-container">
                <span class="body-large overflow-auto max-width-100 white-space-no-wrap data-line selectable" name="consent-code">...</span>
            </div>
            <div class="simple-container">
                <button class="style-6 hover-outline" name="button-copy-code">
                    <md-ripple></md-ripple>
                    Copiar código
                </button>

            </div>
        </div>
        
        <div class="simple-container direction-column justify-right">
            <md-filled-button name="button-copy-both" class="squared"><md-icon slot="icon">content_copy</md-icon>Copiar enlace y código</md-filled-button>
        </div>
        <div class="simple-container direction-column gap-4 top-margin-8 bottom-margin-24">
            <span class="body-medium outline-text">Próximamente</span>
            <div class="simple-container gap-8 flex-wrap">
                <md-filled-button disabled="true"><md-icon slot="icon">chat_bubble</md-icon>Enviar por WhatsAppp</md-filled-button>
                <md-filled-button disabled="true"><md-icon slot="icon">mail</md-icon>Enviar por Correo</md-filled-button>
            </div>
        </div>

    </holder>

    <div style="width:100%; height:48px; background:linear-gradient(to bottom, transparent 0%, var(--md-sys-color-background) 80%); position:absolute; bottom:0;"></div>

</window><window 
    id="window-consent-templates"
    class="increased on-background-text"
    data-flip-id="animate"
    >
    <form class="simple-container direction-column grow-1 overflow-hidden" id="form-consent-templates">
        <div class="simple-container padding-16 gap-16 justify-between">
            <md-icon-button type="button" onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
            <md-filled-button type="submit">Guardar cambios</md-filled-button>
        </div>
        <holder class="align-center">
            <div class="simple-container direction-column width-100 grow-1 max-width-1200 gap-24">

                <div class="simple-container direction-column">
                    <div class="simple-container direction-column gap-8">
                        <span class="display-small line-height-1 dm-sans">Plantilla predeterminada</span>
                        <span class="body-normal outline-text">
                            Configura la plantilla predeterminada para los consentimientos y autorizaciones de todos tus pacientes.
                        </span>
                    </div>
                    
                    <div class="content-box padding-16 outline-light-1 background border-radius-16" style="margin-top:16px;">
                        <span class="body-large dm-sans weight-500 outline-text">
                            Marcadores de reemplazo automático
                        </span>
                        <span class="body-medium dm-sans">
                            {{nombre}}, 
                            {{nacimiento}}, 
                            {{edad}}, 
                            {{género}}, 
                            {{dirección}}, 
                            {{teléfono}}, 
                            {{email}}, 
                            {{fecha_actual}},
                            {{numero_identidad}}
                        </span>
                    </div>
                </div>

                <div class="simple-container grow-1 gap-16 flex-wrap">
                    <div class="simple-container direction-column grow-1 basis-normal">
                        <md-outlined-text-field name="informed_consent" label="Plantilla de Consentimiento informado" type="textarea" style="resize:none; min-height:400px; height:100%;"></md-outlined-text-field>
                    </div>
                    <div class="simple-container direction-column grow-1 basis-normal">
                        <md-outlined-text-field name="data_consent" label="Plantilla de Autorización de datos" type="textarea" style="resize:none; min-height:400px; height:100%;"></md-outlined-text-field>
                    </div>
                </div>


        
            </div>
        </holder>
    </form>

</window><window
    id="window-create-expense"
    class="increased h-auto slim on-background-text"
    data-flip-id="animate"
    >
    <div class="simple-container padding-16">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder class="gap-16">

        <div class="simple-container gap-8 align-center bottom-margin-8">
            <md-icon class="pretty small filled">shopping_bag</md-icon>
            <headline class="headline-medium">Registrar gasto</headline>
        </div>

        <form id="form-create-expense" class="simple-container direction-column gap-8">
            <div class="simple-container direction-column gap-8" name="check-empty" id="check-empty-form-create-expense">

                <div class="simple-container justify-between align-center">
                    <span class="label-normal outline-text left-margin-8">Cantidad del gasto</span>
                    <!-- <span onclick="PatientsManager.changeToCreatePatientWindow()" class="data-line cursor-pointer label-small outline-text left-margin-8"><md-ripple aria-hidden="true"></md-ripple><md-icon class="dynamic" aria-hidden="true">add</md-icon>Nuevo paciente</span> -->
                </div>
                <md-filled-text-field name="expense-amount" placeholder="0.00" type="number" prefix-text="$"></md-filled-text-field>

                <div class="simple-container direction-column border-radius-16 position-relative overflow-hidden">
                    <md-ripple></md-ripple>
                    <input name="expense-date" type="date" onclick="this.showPicker()">
                </div>
                
            </div>
           
            <md-filled-text-field name="expense-description" type="textarea" placeholder="Descripción (opcional)" style="min-height:160px;"></md-filled-text-field>

            

            <div class="simple-container justify-right top-margin-8 bottom-margin-16">
                <md-filled-button type="submit">Guardar gasto</md-filled-button>
            </div>
        </form>

    </holder>
</window><window
    id="window-expense-data"
    data-flip-id="animate"
    class="increased slim h-auto on-background-text"
    >
    <div class="simple-container padding-16 justify-between flex-wrap align-center gap-8">
        <div class="simple-container gap-8 align-center">
            <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
            <span class="headline-small on-background-text">Gasto</span>
        </div>
        <div class="simple-container gap-8">
            <md-text-button
                onclick="TrashManager.openConfirmationDialog('expense')"
                >
                <md-icon slot="icon">delete</md-icon>
                Eliminar
            </md-text-button>
        </div>
    </div>
    <holder>

        <div class="content-box border-radius-16 padding-16 gap-4">
            <span class="label-normal outline-text user-select-none">Monto del gasto</span>
            <span class="body-large" name="expense-amount">...</span>
        </div>
        <div class="content-box border-radius-16 padding-16 gap-4">
            <span class="label-normal outline-text user-select-none">Fecha del gasto</span>
            <span class="body-large" name="expense-date">...</span>
        </div>

        <div class="content-box border-radius-16 padding-16 gap-4" style="min-height: 300px;">
            <span class="label-normal outline-text user-select-none">Descripción</span>
            <span class="body-large" name="expense-description">...</span>
        </div>

        

    </holder>

</window><window 
    id="window-note-info" 
    class="on-background-text increased slim h-auto" 
    data-flip-id="animate"
    >
    <div class="simple-container padding-16 gap-8 align-center">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <span class="headline-small dm-sans">Información</span>
    </div>
    <holder class="padding-16">
        <!-- <span class="headline-medium dm-sans">
            <md-icon class="dynamic" data-window-icon>info</md-icon>
            <span data-window-title>Información</span>
        </span> -->
        <div class="content-box direction-row light-color padding-16 dm-sans border-radius-16 justify-between">
            <span class="label-large">Título</span>
            <span class="label-large" name="note_title">...</span>
        </div>
        <div class="content-box direction-row light-color padding-16 dm-sans border-radius-16 justify-between">
            <span class="label-large">Fecha de creación</span>
            <span class="label-large" name="note_datetime">...</span>
        </div>
        <div class="content-box direction-row light-color padding-16 dm-sans border-radius-16 justify-between">
            <span class="label-large">Última modificación</span>
            <span class="label-large" name="last_updated">...</span>
        </div>
        <div class="content-box direction-row light-color padding-16 dm-sans border-radius-16 justify-between">
            <span class="label-large">Id</span>
            <span class="label-large" name="id">...</span>
        </div>

        <div class="content-box light-color padding-16 dm-sans border-radius-16 justify-between">
            <span class="label-large">Vinculación con cita</span>
            <div class="simple-container direction-column">
                <span class="label-large" name="appt_date">...</span>
                <span class="label-large" name="appt_time">...</span>
                <span class="label-large" name="appt_row_status"></span>
            </div>
        </div>
    </holder>
</window><window 
    id="window-note-link"
    data-flip-id="animate"
    class="increased slim"
    >
    <div class="simple-container padding-16 gap-8 align-center">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
    </div>
    <holder class="dm-sans on-background-text gap-16" data-holder-link>


    <div class="simple-container direction-column bottom-margin-24">
        <div class="simple-container justify-center bottom-margin-16">
            <md-icon class="pretty medium filled secondary-container on-secondary-container-text">attach_file_add</md-icon>
        </div>

        <span class="headline-medium text-center weight-500 text-wrap-pretty dm-sans line-height-1">
            Vincula esta nota con una cita
        </span>
        <p class="body-large outline-text text-center text-wrap-pretty dm-sans">
            Selecciona una cita para vincularla con esta nota.
        </p>
    </div>


        <form class="simple-container direction-column gap-8" name="note-link-appts-container">

            <div class="simple-container gap-8 overflow-auto border-radius-8" style="min-height:36px;" name="filters-container">
                <select 
                    class="no-reset style-2"
                    name="filter-month" 
                    >
                    <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                    <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                </select>
                <select 
                    class="no-reset style-2"
                    name="filter-year" 
                    >
                    <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                    <option value="2023,2024,2025,2026">Años todos</option>
                </select>
                <select 
                    class="no-reset style-2"
                    name="filter-status"
                    >
                    <option value="1,2,3">Todas las citas</option>
                    <option value="2">Citas completadas</option>
                    <option value="1">Citas pendientes</option>
                    <option value="3">Citas canceladas</option>
                </select>
            </div>

            <!-- table container, pagination container -->
            <div class="simple-container direction-column gap-4" name="table-container"></div>
            <div class="simple-container" name="pagination-container"></div>

            <div class="simple-container justify-right">
                <md-filled-button type="submit">
                    <md-icon slot="icon">arrow_forward</md-icon>
                    Vincular
                </md-filled-button>
            </div>

        </form>

        

    </holder>
    <holder class="dm-sans on-background-text gap-16 hidden" data-holder-unlink>


        <div class="simple-container direction-column bottom-margin-24">
            <div class="simple-container justify-center bottom-margin-16">
                <md-icon class="pretty medium filled primary-container on-primary-container-text">attach_file</md-icon>
            </div>

            <span class="headline-medium text-center weight-500 text-wrap-pretty dm-sans line-height-1">
                Esta nota está vinculada a una cita
            </span>
            <p class="body-large outline-text text-center text-wrap-pretty dm-sans">
                Actualmente esta nota está vinculada a una cita.
            </p>
        </div>
        <span class="body-large outline-text dm-sans">Detalles de la cita:</span>
        <div class="content-box border-radius-16 padding-16">
            <div class="simple-container gap-8">
                <span class="label-large outline-text">Fecha de la cita:</span>
                <span class="label-large" name="appt_date"></span>
            </div>
            <div class="simple-container gap-8">
                <span class="label-large outline-text">Hora de la cita:</span>
                <span class="label-large" name="appt_time"></span>
            </div>
        </div>

        <div class="simple-container justify-right">
            <md-filled-tonal-button class="delete" name="button-note-unlink">
                <md-icon slot="icon">attach_file_off</md-icon>
                Desvincular
            </md-filled-tonal-button>
            
        </div>

        

    </holder>
</window><window 
    id="window-schedule-picker"
    class="increased semi-slim"
    data-flip-id="animate"
    >
    <!-- <div class="simple-container position-absolute primary" style="inset:0; height:500px; background: linear-gradient(to bottom, var(--md-sys-color-secondary-container), transparent); opacity:0.2;"></div> -->
    
    <form id="form-schedule-picker" class="simple-container direction-column overflow-hidden max-height-100">
        <div class="simple-container padding-16 justify-between gap-4">
            <!-- <md-icon-button type="button" onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button> -->
            <md-filled-tonal-button class="solid-light" type="button" onclick="toggleWindow()">Salir sin guardar</md-filled-tonal-button>
            <md-filled-button type="submit">Guardar cambios</md-filled-button>
        </div>
        <holder class="on-background-text gap-24 transparent align-center" style="padding-bottom:48px;">

           
    
            <div class="simple-container direction-column">
                <span class="headline-medium weight-600 dm-sans text-center">Disponibilidad</span>
                <span class="body-large dm-sans outline-text text-center">Horas semanales</span>
            </div>
    
            <div class="simple-container direction-column" style="max-width:640px;" id="schedule-picker-container"></div>


            <div class="content-box border-radius-16 align-center justify-center padding-0 top-margin-24" style="background:transparent;">
                <span class="headline-small dm-sans weight-500">Agenda pública</span>
                <span class="body-large dm-sans outline-text text-center">Tus pacientes pueden agendar citas contigo a través del siguiente enlace:</span>
                <a name="response-availability-url" target="_blank" class="style-4 outline-light-1 on-background-text text-center flex-wrap align-center justify-center hover-outline"><md-icon class="dynamic hide-on-mobile">link</md-icon>melonmind.app/apps/mind/availability?therapist=<span name="response-user-special-token"></span></a>
                <!-- <button type="button" class="style-2 simple-container align-center gap-4" onclick="copyToClipboard('https://melonmind.app/apps/mind/availability?therapist=peseja7329%40cavoyar.com')"><md-icon class="dynamic">content_copy</md-icon><md-ripple></md-ripple>Copiar enlace</button> -->
            </div>
    
        </holder>
    </form>
</window><window
    id="window-select-appts"
    data-flip-id="animate"
    class="increased semi-slim"
    >
    <div class="simple-container padding-16 align-center">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <span class="headline-small outline-text weight-500">Selecciona las citas</span>
    </div>
    <holder>

        <form id="form-select-appts">
            <div id="container-select-appts" class="simple-container direction-column gap-16">
                <div name="container-filters" class="simple-container gap-8 t-padding-16">
                    <!-- date range selector -->
                    <div class="content-box direction-row transparent outline-light-1 flex-wrap padding-1 border-radius-16">
                        <div class="simple-container flex-1 direction-column gap-8">
                            <span class="label-large hide-on-mobile outline-text position-absolute" style="bottom:CALC(100% + 4px)">Fecha inicial del periodo</span>
                            <div class="simple-container direction-column border-radius-16 position-relative">
                                <md-ripple aria-hidden="true"></md-ripple>
                                <input type="date" onclick="this.showPicker()" name="filter_date_start" class="transparent">
                            </div>
                        </div>
                        <div class="simple-container direction-column justify-center gap-8  hide-on-mobile">
                            <md-icon aria-hidden="true">arrow_right_alt</md-icon>
                        </div>
                        <div class="simple-container flex-1 direction-column gap-8">
                            <span class="label-large hide-on-mobile outline-text position-absolute" style="bottom:CALC(100% + 4px)">Fecha final del periodo</span>
                            <div class="simple-container direction-column border-radius-16 position-relative">
                                <md-ripple aria-hidden="true"></md-ripple>
                                <input type="date" onclick="this.showPicker()" name="filter_date_end" class="transparent">
                            </div>
                        </div>
                    </div>
    
                </div>
                <div>
                    <div class="simple-container border-radius-16 overflow-auto padding-1 outline-light-1">
                        <table class="style-4" name="container-table"></table>
                    </div>
                </div>
                <div name="container-pagination"></div>
            </div>

            <div class="simple-container justify-right gap-8" style="background: linear-gradient(360deg, var(--md-sys-color-background), transparent); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; box-sizing:border-box; z-index:1;">
                <md-filled-tonal-button type="button" class="solid" onclick="toggleWindow()">Cancelar</md-filled-tonal-button>
                <md-filled-button type="submit" class="dm-sans">Seleccionar citas</md-filled-button>
            </div>
        </form>

    </holder>

</window><window
    id="window-edit-invoice-appt-row"
    data-flip-id="animate"
    class=""
    style="max-width:900px; height:auto;"    
    >
    <holder class="padding-24 gap-16">

        <span class="headline-medium dm-sans only-on-mobile">Editar fila</span>

        <form id="form-edit-invoice-appt-row" class="simple-container direction-column gap-8" autocomplete="off">
            <div class="simple-container gap-8 direction-row-column" data-row>
                <div class="simple-container direction-column gap-4" data-concept-container>
                    <span class="label-small outline-text">Concepto</span>
                    <input type="text" name="concept" class="width-100-mobile style-4 focus-primary">
                </div>
                <div class="simple-container direction-column gap-4" data-price-container>
                    <span class="label-small outline-text">Precio</span>
                    <input type="number" name="price" class="width-100-mobile style-4 focus-primary" >
                </div>
                <div class="simple-container direction-column gap-4" data-amount-container>
                    <span class="label-small outline-text">Cantidad</span>
                    <input type="number" name="amount" class="width-100-mobile style-4 focus-primary" value="1">
                </div>
                <div class="simple-container direction-column gap-4" data-iva-container>
                    <span class="label-small outline-text">IVA</span>
                    <input type="number" name="iva" class="width-100-mobile style-4 focus-primary" value="0%">
                </div>
                <div class="simple-container direction-column gap-4" data-irpf-container>
                    <span class="label-small outline-text">IRPF</span>
                    <input type="number" name="irpf" class="width-100-mobile style-4 focus-primary" value="0%">
                </div>
                <div class="simple-container direction-column gap-4" data-total-container>
                    <span class="label-small outline-text">Total</span>
                    <input type="number" name="total" class="width-100-mobile style-4 focus-primary" readonly>
                </div>
    
                
            </div>
            <div class="simple-container gap-8 justify-right">
                <md-filled-tonal-button type="button" data-button-1 class="solid" onclick="toggleWindow()">Cancelar</md-filled-tonal-button>
                <md-filled-button type="submit" data-button-2 >Guardar</md-filled-button>
            </div>
        </form>

    </holder>
</window><window
    id="window-add-invoice-appt-row"
    data-flip-id="animate"
    class="dialog"
    >
    <holder class="padding-24 gap-16">

        <span class="headline-medium dm-sans">Agregar Item</span>

        <form id="form-add-invoice-appt-row" class="simple-container direction-column gap-8" autocomplete="off">
            <div class="simple-container gap-8 direction-column" data-row>
                <div class="simple-container direction-column gap-4" data-concept-container>
                    <span class="label-small outline-text">Concepto</span>
                    <input type="text" name="concept" class="width-100-mobile style-4 focus-primary">
                </div>
                <div class="simple-container direction-column gap-4" data-price-container>
                    <span class="label-small outline-text">Precio</span>
                    <input data-allow-empty type="number" name="price" class="width-100-mobile style-4 focus-primary" >
                </div>
                <div class="simple-container direction-column gap-4" data-amount-container>
                    <span class="label-small outline-text">Cantidad</span>
                    <input type="number" name="amount" class="width-100-mobile style-4 focus-primary no-reset" value="1">
                </div>
                <div class="simple-container direction-column gap-4" data-iva-container>
                    <span class="label-small outline-text">IVA</span>
                    <input data-allow-empty type="number" name="iva" class="width-100-mobile style-4 focus-primary" value="0%">
                </div>
                <div class="simple-container direction-column gap-4" data-irpf-container>
                    <span class="label-small outline-text">IRPF</span>
                    <input data-allow-empty type="number" name="irpf" class="width-100-mobile style-4 focus-primary" value="0%">
                </div>
                <div class="simple-container direction-column gap-4" data-total-container>
                    <span class="label-small outline-text">Total</span>
                    <input data-allow-empty type="number" name="total" class="width-100-mobile style-4 focus-primary" readonly>
                </div>
    
                
            </div>
            <div class="simple-container gap-8 justify-right">
                <md-filled-tonal-button type="button" data-button-1 class="solid" onclick="toggleWindow()">Cancelar</md-filled-tonal-button>
                <md-filled-button type="submit" data-button-2 >Agregar</md-filled-button>
            </div>
        </form>

    </holder>
</window><window
    id="window-create-invoice-series"
    data-flip-id="animate"
    class="increased slim h-auto on-background-text dm-sans-all"
    >

    <div class="simple-container gap-16 align-center padding-16">
        <md-filled-tonal-icon-button class="solid" name="button-close"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
    </div>
    <holder class="gap-24">
        
        <span class="headline-large weight-600 line-height-1">Crear serie de facturación</span>

        <form class="simple-container direction-column gap-16" id="form-create-invoice-series" autocomplete="off">

            <div class="simple-container direction-column gap-4 grow-1">
                <span class="label-large outline-text dm-sans">Nombre de la serie</span>
                <input name="series_name" class="background outline-1 focus-primary" type="text">
            </div>
            <div class="simple-container direction-column gap-4 grow-1">
                <span class="label-large outline-text dm-sans">Formato de númeración</span>
                <input name="series_format" class="background outline-1 focus-primary" type="text" placeholder="Ejemplo: F[YY]%%%%%">
            </div>
            <div class="simple-container direction-column gap-4 grow-1">
                <span class="label-large outline-text dm-sans">Número de la primera factura</span>
                <input name="series_starting_number" class="background outline-1 focus-primary" type="number">
            </div>

            <div class="content-box border-radius-16 overflow-auto">
                <span class="label-large outline-text">Vista previa del formato de la serie</span>
                <span class="headline-large weight-500" name="series-preview"></span>
            </div>

            <div class="simple-container direction-column gap-4 grow-1">
                <span class="label-large outline-text dm-sans">Tipo de serie</span>
                <select name="series_type" class="background outline-1 focus-primary" style="border-radius: 16px; height: 52px;">
                    <option value="1">Ordinaria</option>
                    <option value="2">Rectificativa</option>
                </select>
            </div>

            <div class="simple-container justify-right top-margin-8">
                <md-filled-button type="submit">
                    <md-icon slot="icon">add</md-icon>Crear serie
                </md-filled-button>
            </div>

        </form>

    </holder>
</window><window
    id="window-finalize-invoice"
    data-flip-id="animate"
    class="dm-sans-all on-background-text "
    >

    <div class="simple-container padding-16 gap-16 align-center">
        <md-filled-tonal-icon-button class="solid" onclick="toggleWindow()"><md-icon>close</md-icon></md-filled-tonal-icon-button>
        <span class="headline-small outline-text">Marcar como definitiva</span>
    </div>

    <holder data-step="1" active>
        
        <div class="content-box overflow-auto">
            <span class="label-large outline-text">Número de factura</span>
            <span class="headline-large weight-500" name="next_invoice_number">...</span>
        </div>

        <form class="simple-container direction-column gap-24">
        
            <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">Fecha de emisión</span>
                <input name="invoice_date" class="background outline-1 focus-primary no-reset" type="date">
            </div>

            <div class="simple-container justify-right gap-8">
                <md-filled-tonal-button type="button" onclick="toggleWindow();" class="solid flex-0-1">Cancelar</md-filled-tonal-button>
                <md-filled-button class="flex-0-1" type="submit">Continuar</md-filled-button>
            </div>
        </form>


    </holder>
<!-- 
    <holder data-step="2" class="align-center justify-center">

        <div class="simple-container direction-column width-100 max-width-400">
            <div class="simple-container direction-column">
                <span class="headline-medium">¿Estás seguro(a) de convertir esta factura a definitiva?</span>
                <p class="body-large outline-text">
                    Una vez convertida a definitiva, no podrás modificarla ni eliminarla. 
                </p>
            </div>
        
            <div class="simple-container justify-right gap-8">
                <md-filled-tonal-button class="solid flex-0-1" name="button-cancel">Cancelar</md-filled-tonal-button>
                <md-filled-button class=" flex-0-1">Confirmar</md-filled-button>
            </div>

        </div>



    </holder> -->

</window><window
    id="window-rectify-invoice"
    data-flip-id="animate"
    class="on-background-text dm-sans-all increased slim h-auto"
    >
    <div class="simple-container padding-16 gap-16 align-center">
        <md-icon-button onclick="toggleWindow()"><md-icon>close</md-icon></md-icon-button>
        <!-- <span class="headline-small outline-text weight-500">Rectificar factura</span> -->
    </div>
    <holder>

        <span class="headline-large weight-600">
            Rectificar factura
        </span>
        
        
        <form 
            id="form-rectify-invoice"
            class="simple-container direction-column gap-16"
            >

            <div class="simple-container direction-column gap-8">
                <span class="body-large outline-text dm-sans">Selecciona la serie de facturación</span>
                <md-outlined-select 
                    name="series_id"
                    class="outline-light"
                    >
                    <md-select-option value="0">Selecciona una opción</md-select-option>
                </md-outlined-select>
            </div>

            <div class="simple-container direction-column gap-8">
                <span class="body-large outline-text dm-sans">Tipo de rectificación</span>
                <md-outlined-select 
                    name="rectification_reason_id"
                    class="outline-light"
                    >
                    <md-select-option value="0">Selecciona una opción</md-select-option>
                </md-outlined-select>

                <div class="simple-container direction-column padding-8" name="reason_description"></div>
            </div>

            <div class="simple-container direction-column gap-8">
                <span class="body-large outline-text dm-sans">Fecha de emisión</span>
                <input name="invoice_date" class="background outline-1 focus-primary" type="date">
            </div>

            <div class="simple-container direction-column gap-8">
                <span class="body-large outline-text dm-sans">Motivo de rectificación</span>
                <input name="rectification_notes" class="background outline-1 focus-primary" type="text">
            </div>

            <div class="simple-container justify-right gap-8">
                <md-filled-tonal-button type="button" onclick="toggleWindow();" class="solid flex-0-1">Cancelar</md-filled-tonal-button>
                <md-filled-button class="flex-0-1" type="submit">Rectificar</md-filled-button>
            </div>
            
        </form>

    </holder>
</window><window
    id="window-send-invoice-by-email"
    data-flip-id="animate"
    class="increased slim h-auto on-background-text dm-sans-all"
    >

    <div class="simple-container padding-16">
        <md-filled-tonal-icon-button class="solid" onclick="toggleWindow()"><md-icon>close</md-icon></md-filled-tonal-icon-button>
    </div>

    <holder class="justify-center gap-24">
        <span class="display-small weight-600 line-height-1">Enviar por correo</span>

        <form class="simple-container direction-column gap-16" id="form-send-invoice-by-email">

            <md-outlined-text-field name="email" label="Correo" class="no-reset"></md-outlined-text-field>

            <div class="simple-container justify-right">
                <md-filled-button type="submit" class="primary-container" trailing-icon>Enviar<md-icon slot="icon">send</md-icon></md-filled-button>
            </div>

        </form>
    </holder>

</window><window
    id="window-reminder-templates"
    data-flip-id="animate"
    class="increased semi-slim h-auto dm-sans-all on-background-text"
    >
    <form id="form-save-reminder-templates" class="simple-container direction-column overflow-hidden">
        <div class="simple-container gap-8 align-center padding-16 justify-between">
            <md-filled-tonal-icon-button type="button" class="solid" onclick="toggleWindow()"><md-icon>close</md-icon></md-filled-tonal-icon-button>
            <md-filled-button type="submit">Guardar</md-filled-button>
        </div>
        <holder>
            <div class="simple-container direction-column gap-8">
                <span class="display-small line-height-1 weight-500">Recordatorios</span>
                <span class="body-normal outline-text">
                    Personaliza el mensaje de recordatorio que se enviará a tus pacientes antes de sus citas.
                </span>
            </div>

            <div class="content-box padding-16 outline-light-1 background border-radius-16" style="margin-top:16px;">
                <span class="body-large dm-sans weight-500 outline-text">
                    Marcadores de reemplazo automático
                </span>
                <span class="body-medium dm-sans">
                    {{nombre}}, 
                    {{fecha}}, 
                    {{hora}},
                    {{profesional}},
                    {{enlace_con_texto}}
                </span>
            </div>

            <div class="simple-container grow-1 gap-8 flex-wrap">
                <div class="simple-container direction-column grow-1 basis-normal">
                    <md-filled-text-field name="email_template_content" label="Email" type="textarea" style="resize:none; min-height:400px; height:100%;"></md-filled-text-field>
                </div>
                <div class="simple-container direction-column grow-1 basis-normal">
                    <md-filled-text-field name="whatsapp_template_content" label="WhatsApp" type="textarea" style="resize:none; min-height:400px; height:100%;"></md-filled-text-field>
                </div>
            </div>

        </holder>
    </form>
</window><window
    id="window-calendars-list"
    data-flip-id="animate"
    class="increased semi-slim dm-sans-all on-background-text"
    >
    <holder 
        data-step="success-message"
        class="padding-24 align-center justify-around"
        >
        <div class="simple-container direction-column width-100 max-width-400 gap-32">
            <div class="simple-container direction-column align-center gap-24">
                <md-icon class="pretty-minimal primary-container-text filled">check_circle</md-icon>
                <span class="headline-large weight-600 text-center text-wrap-pretty">Google Calendar conectado</span>
            </div>

            <div class="simple-container direction-column">
                <md-filled-button 
                    name="button-go-create-calendar"
                    class="big squared" 
                    trailing-icon
                    >
                    <md-icon slot="icon">arrow_forward</md-icon>
                    Crear calendario
                </md-filled-button>
            </div>
        </div>

    </holder>

    <holder 
        data-step="create-calendar"
        class="padding-24 align-center justify-around"
        >
        <div class="simple-container direction-column width-100 max-width-400 gap-32">
            <div class="simple-container direction-column align-center gap-24">
                <md-icon class="pretty-minimal primary-container-text filled">calendar_add_on</md-icon>
                <span class="headline-large weight-600 text-center text-wrap-pretty">Crea un calendario para Google Calendar</span>
                <span class="body-large outline-text text-center ">Este calendario se añadirá a tu cuenta de Google y será utilizado para guardar todas tus citas automáticamente.</span>
            </div>

            <form
                id="form-create-google-calendar" 
                class="simple-container direction-column gap-16 padding-1"
                >

                <div class="simple-container direction-column gap-8">
                    <span class="label-large outline-text dm-sans">Nombre del calendario</span>
                    <input name="calendar_name" class="background outline-1 focus-primary no-reset" type="text">
                </div>
       

                <div class="simple-container direction-column">
                    <md-filled-button 
                        class="big squared" 
                        type="submit"
                        >
                        <md-icon slot="icon">check</md-icon>
                        Crear calendario
                    </md-filled-button>
                </div>
                
            </form>


        </div>
    </holder>


    

        

    <holder data-step="calendars-list" active class="padding-24 align-center">
        <div class="simple-container align-center gap-16 width-100">
            <md-filled-tonal-icon-button onclick="toggleWindow()" class="solid"><md-icon>close</md-icon></md-filled-tonal-icon-button>
            <!-- <span class="headline-small">Calendario</span> -->
        </div>
        <div class="simple-container direction-column gap-8 width-100 max-width-600 justify-around">

            <span class="display-small weight-500">Selecciona tus calendarios</span>
            <span class="body-large outline-text">
                Los eventos de estos calendarios se mostrarán en Melon Mind y se usarán para bloquear tu disponibilidad en la agenda pública.
            </span>

            <form id="form-calendars-list" class="simple-container direction-column gap-16">
    
                <div 
                    id="calendars-list-container"
                    class="simple-container direction-column"
                    name="calendars_list"
                    >
                </div>
    
                <div class="simple-container gap-8 justify-right">
                    <md-filled-tonal-button class="solid flex-1" type="button" onclick="toggleWindow()">Cancelar</md-filled-tonal-button>
                    <md-filled-button class="flex-1" type="submit">Guardar selección</md-filled-button>
                </div>
            
                <div class="content-box light-color hidden" name="container-go-create-calendar">
    
                    <md-icon>event_busy</md-icon>
    
                    <div class="simple-container direction-column gap-8">
                        <span class="weight-500 headline-small">Aún no tienes un calendario de Melon Mind</span>
                        <span class="body-large outline-text">Crea un calendario en Google Calendar para que todas tus citas de Melon Mind se sincronicen automáticamente.</span>
                    </div>
                    
                    <md-filled-button 
                        name="button-go-create-calendar-from-list"
                        class="big squared top-margin-16" 
                        type="button"
                        >
                        Crear calendario
                    </md-filled-button>
                </div>
    
            </form>
        </div>

    </holder>
</window><window
    id="window-create-category"
    data-flip-id="animate"
    class="increased slim h-auto on-background-text dm-sans-all"
    >
    <div class="simple-container padding-16 gap-16 align-center justify-between">
        <div class="simple-container gap-16 align-center">
            <md-filled-tonal-icon-button class="solid" onclick="toggleWindow('#window-create-category')">
                <md-icon>close</md-icon>
            </md-filled-tonal-icon-button>
            <span class="headline-small hide-on-mobile">Crear categoría</span>
        </div>
    </div>
    <holder class="justify-center gap-24">

        <span class="display-large line-height-1 weight-600 only-on-mobile">Crear categoría</span>

        <form class="simple-container direction-column gap-16" id="form-create-category">

            <md-filled-text-field autocomplete="off" label="Nombre" name="category_name"></md-filled-text-field>
            <md-filled-text-field autocomplete="off" label="Descripción" name="category_description" type="textarea"></md-filled-text-field>

            <div class="simple-container align-center gap-8 justify-between">
                <div class="simple-container align-center gap-16">
                    <span class="body-large weight-500">
                        Selecciona un color
                    </span>
                    <md-icon>arrow_right_alt</md-icon>
                </div>
                <input type="color" name="category_color" value="#005eff" class="no-reset"/>
            </div>

            <div class="simple-container justify-right gap-8 top-margin-16" >
                <md-filled-tonal-button type="button" class="solid flex-1" onclick="toggleWindow('#window-create-category')">Cancelar</md-filled-tonal-button>
                <md-filled-button type="submit" class="flex-1">Crear</md-filled-button>
            </div>

        </form>

    </holder>
</window></transparent>



<main>
  
  <md-linear-progress indeterminate style="position:absolute; width:100%; z-index:10;" id="main-app-loading-indicator"></md-linear-progress>
  <nav class="nav-style-10" id="nav-parent">
    
<span class="position-relative simple-container direction-column">

  <button 
    class="nav-button hide-on-mobile first-nav-element" 
    onclick="toggleMenu('menu-app-options')" 
    id="toggler-menu-app-options"
    data-flip-id="animate"
    >
    <md-ripple></md-ripple>
    <span class="icon-holder">
      
                    <span
                      class="header-account-circle" 
                      id="response-header-account-username-first-letter"
                      name="account-first-letter"
                    ></span>
                      <md-icon class="filled hidden">cognition</md-icon>
    </span>
    <md-icon class="filled hidden" style="margin-left:auto; opacity:0.24; scale:0.8; position:absolute; right: 16px;">expand_all</md-icon>
    <span>Melon Mind</span>
  </button> 

  <md-menu id="menu-app-options" class="style-modern" style="min-width:216px;" anchor="toggler-menu-app-options">
    <md-menu-item onclick="toggleWindow('#window-settings')" data-flip-id="animate">
      <md-icon slot="start" class="filled" aria-hidden="true">settings</md-icon>
      <div slot="headline" >Configuración</div>
    </md-menu-item>
    <md-menu-item onclick="window.location.href='index'">
      <md-icon slot="start" class="filled" aria-hidden="true">first_page</md-icon>
      <div slot="headline">Página principal</div>
    </md-menu-item>
  </md-menu>
</span>



<button 
  id="nav-button-section-home"
  class="nav-button" active
  data-section="section-home" 
  onclick="toggleSection('section-home')"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">home</span>
  </span>
  <span>Inicio</span>
</button>
<button 
  class="nav-button" 
  data-section="section-patients" 
  onclick="toggleSection('section-patients')"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">groups</span>
  </span>
  <span>Pacientes</span>
</button>
<button 
  class="nav-button" 
  id="nav-button-open-appointments"
  data-section="section-appointments-test" 
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">nest_clock_farsight_analog</span>
  </span>
  <span>Citas</span>
</button>
<!-- <button 
  class="nav-button" 
  data-section="section-calendar" 
  onclick="toggleSection('section-calendar')"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">event</span>
  </span>
  <span>Calendario</span>
</button> -->
<button 
  class="nav-button" 
  id="nav-button-open-calendar-test"
  data-section="section-calendar-test"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">event</span>
  </span>
  <span>Calendario</span>
</button>
<button
  id="nav-button-open-finance-section"
  class="nav-button"
  data-section="section-finance" 
  onclick="toggleSection('section-finance'); FinanceManager.displayFinance()"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <!-- <span class="material-symbols-rounded">account_balance_wallet</span> -->
    <span class="material-symbols-rounded" data-icon>wallet</span>
  </span>
  <span data-name>Finanzas</span>
</button>
<!-- <button 
  class="nav-button" 
  name="button-open-billing-section"
  data-section="section-billing" 
  onclick="toggleSection('section-billing');"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">euro</span>
  </span>
  <span>Facturación</span>
</button> -->






<button 
  class="nav-button label-button nav-action-button top-margin-24 hide-on-mobile"  
  data-section="section-diary"
  >
  <span>Opciones</span>
</button>

<button 
  class="nav-button hide-on-mobile nav-action-button"  
  data-action="open-create-appt-window"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">calendar_add_on</span>
  </span>
  <span>Agendar cita</span>
</button>

<button
  class="nav-button hide-on-mobile nav-action-button"
  onclick="PatientsManager.openCreatePatientWindow()"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">person_add</span>
  </span>
  <span>Nuevo paciente</span>
</button>
<button
  class="nav-button hide-on-mobile nav-action-button"
  onclick="ExpensesManager.openCreateExpenseWindow()"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">shopping_bag</span>
  </span>
  <span>Registrar gasto</span>
</button>

<button 
  class="nav-button hide-on-mobile nav-action-button"  
  name="button-open-shcedule-picker"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">event_available</span>
  </span>
  <span>Disponibilidad</span>
</button>

<button 
  class="nav-button hide-on-mobile nav-action-button"  
  data-action="load-categories"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">category</span>
  </span>
  <span>Categorías</span>
</button>

<button 
  class="nav-button hide-on-mobile nav-action-button"  
  name="button-open-create-invoice"
  data-flip-id="animate"
  data-feature="billing"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">note_add</span>
  </span>
  <span>Nueva factura</span>
</button>


<button
  class="nav-button hide-on-mobile nav-action-button"
  data-action='open-trash'
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder">
    <span class="material-symbols-rounded">delete</span>
  </span>
  <span>Abrir papelera</span>
</button>



<!-- <div class="simple-container top-margin-24">
  <button
    active
    class="style-2 nav-action-button hide-on-mobile primary-container on-primary-container-text"
    >
    <md-icon class="dynamic filled">rocket_launch</md-icon>
    <span>Continuar con Pro</span>
  </button>
</div> -->


<!-- <button
  class="nav-button hide-on-mobile nav-action-button"
  data-flip-id="animate"
  onclick="toggleSubSection('#sub-section-calendar-day', {animationType: 'from-origin'})"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder">
    <span class="material-symbols-rounded">preview</span>
  </span>
  <span>Test cEvent</span>
</button> -->




<div class="simple-container hide-on-mobile grow-1"></div>
<!-- <button 
  class="nav-button hide-on-mobile nav-action-button"  
  data-section="section-diary"
  onclick="toggleWindow('#window-send-bug')"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">bug_report</span>
  </span>
  <span>Reportar error</span>
</button> -->


<button 
  class="nav-button hide-on-mobile nav-action-button"  
  data-section="section-diary"
  onclick="toggleWindow('#window-send-suggestion')"
  data-flip-id="animate"
  >
  <md-ripple></md-ripple>
  <span class="icon-holder" >
    <span class="material-symbols-rounded">feedback</span>
  </span>
  <span>Dar feedback</span>
</button>


  </nav>
  <holder>
    <!-- <div class="simple-container" style="position:absolute; bottom:16px; right:16px; z-index:1">
      <md-fab label="Iniciar servicio" variant="primary" onclick="toggleWindow('#window-start-operation', '', 1)" data-flip-id="animate">
        <md-icon slot="icon">content_cut</md-icon>
      </md-fab>
    </div> -->
    <md-dialog id="dialog-confirm-appt-soft-delete">
  <div slot="headline">Mover a papelera</div>
  <md-icon slot="icon" aria-hidden="true">delete</md-icon>
  <form id="form-dialog-confirm-appt-soft-delete" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres mover esta cita a la papelera?<br>
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-confirm-appt-soft-delete" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button data-action="confirm-appt-soft-delete" class="delete" value="confirm">
      <md-icon slot="icon">delete</md-icon>
      Mover a papelera
    </md-filled-tonal-button>
  </div>
</md-dialog>

<md-dialog id="dialog-confirm-appt-soft-restore">
  <div slot="headline">Recuperar cita</div>
  <md-icon slot="icon" aria-hidden="true">restart_alt</md-icon>
  <form id="form-dialog-confirm-appt-soft-restore" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres mover esta cita a la papelera?<br>
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-confirm-appt-soft-restore" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-button data-action="confirm-appt-soft-restore" class="delete" value="confirm">
      <md-icon slot="icon">restart_alt</md-icon>
      Recuperar cita
    </md-filled-button>
  </div>
</md-dialog>

<md-dialog id="dialog-confirm-appt-delete-permanently">
  <div slot="headline">Eliminar permanentemente</div>
  <md-icon slot="icon" aria-hidden="true">delete_forever</md-icon>
  <form id="form-dialog-confirm-appt-delete-permanently" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres <span class="error-text weight-600">eliminar permanentemente</span> esta cita?<br>
    Esta acción <span class="error-text weight-600">no se puede deshacer</span>.
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-confirm-appt-delete-permanently" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button data-action="confirm-appt-delete-permanently" class="delete" value="confirm">
      <md-icon slot="icon">delete_forever</md-icon>
      Eliminar permanentemente
    </md-filled-tonal-button>
  </div>
</md-dialog>

<md-dialog id="dialog-confirm-category-delete-permanently">
  <div slot="headline">Eliminar permanentemente</div>
  <md-icon slot="icon" aria-hidden="true">delete_forever</md-icon>
  <form id="form-dialog-confirm-category-delete-permanently" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres <span class="error-text weight-600">eliminar permanentemente</span> esta categoría?<br>
    Esta acción <span class="error-text weight-600">no se puede deshacer</span>.
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-confirm-category-delete-permanently" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button data-action='confirm-category-delete-permanently' class="delete" value="confirm">
      <md-icon slot="icon">delete_forever</md-icon>
      Eliminar permanentemente
    </md-filled-tonal-button>
  </div>
</md-dialog>



<md-dialog id="dialog-confirm-appt-soft-restore">
  <div slot="headline">Recuperar</div>
  <md-icon slot="icon" aria-hidden="true">restart_alt</md-icon>
  <form id="form-dialog-confirm-appt-soft-restore" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres recuperar esta cita?<br>
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-confirm-appt-soft-restore" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-button data-action="confirm-appt-soft-restore" value="confirm">
      <md-icon slot="icon">restart_alt</md-icon>
      Recuperar
    </md-filled-button>
  </div>
</md-dialog>

<md-dialog id="dialog-confirm-appt-delete-permanently" type="alert">
  <div slot="headline">Eliminar permanentemente</div>
  <md-icon slot="icon" aria-hidden="true">delete_forever</md-icon>
  <form id="form-dialog-confirm-appt-delete-permanently" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres <span class="error-text weight-600">eliminar permanentemente</span> esta cita?<br>
    Esta acción <span class="error-text weight-600">no se puede deshacer</span>.
  </form>
  <div slot="actions" class="flex-wrap">
    <md-text-button form="form-dialog-confirm-appt-delete-permanently" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button data-action="confirm-appt-delete-permanently" class="delete" value="confirm">
      <md-icon slot="icon">delete_forever</md-icon>
      Eliminar permanentemente
    </md-filled-tonal-button>
  </div>
</md-dialog>


<md-dialog id="dialog-move-to-trash-confirmation">
  <div slot="headline">Mover a papelera</div>
  <md-icon slot="icon" aria-hidden="true">delete</md-icon>
  <form id="form-dialog-move-to-trash-confirmation" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres mover <span name="item-name"></span> a la papelera?<br>
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-move-to-trash-confirmation" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button name="button-confirm-move-to-trash" class="delete" value="confirm">
      <md-icon slot="icon" aria-hidden="true">delete</md-icon>
      Mover a papelera
    </md-filled-tonal-button>
  </div>
</md-dialog>


<md-dialog id="dialog-recover-from-trash-confirmation">
  <div slot="headline">Recuperar</div>
  <md-icon slot="icon" aria-hidden="true">restart_alt</md-icon>
  <form id="form-dialog-recover-from-trash-confirmation" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres recuperar <span name="item-name"></span>?<br>
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-recover-from-trash-confirmation" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-button name="button-confirm-recover-from-trash" class="" value="confirm">
      <md-icon slot="icon" aria-hidden="true">restart_alt</md-icon>
      Recuperar
    </md-filled-button>
  </div>
</md-dialog>

<md-dialog id="dialog-delete-forever-confirmation" type="alert">
  <div slot="headline">Eliminar permanentemente</div>
  <md-icon slot="icon" aria-hidden="true">delete_forever</md-icon>
  <form id="form-dialog-delete-forever-confirmation" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres <span class="error-text weight-600">eliminar permanentemente</span> <span name="item-name"></span>?<br>
    Esta acción <span class="error-text weight-600">no se puede deshacer</span>.
  </form>
  <div slot="actions" class="flex-wrap">
    <md-text-button form="form-dialog-delete-forever-confirmation" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button name="button-confirm-delete-forever" class="delete" value="confirm">
      <md-icon slot="icon" aria-hidden="true">delete_forever</md-icon>
      Eliminar permanentemente
    </md-filled-tonal-button>
  </div>
</md-dialog>

<md-dialog id="dialog-appt-data" class="width-100 max-width-800-m-24 ">
  <div slot="headline">
    <md-icon-button form="form-dialog-appt-data" value="cancel"><md-icon>close</md-icon></md-icon-button>
    <span slot="headline">Cita</span>
  </div>
  <form id="form-dialog-appt-data" slot="content" method="dialog" class="simple-container direction-column gap-16 on-background-text">
    <div class="simple-container gap-16 flex-wrap">

      <!-- name column -->
      <div class="content-box light-color border-radius-16 padding-16 gap-8">
        <span class="label-normal outline-text">Paciente</span>
        <div class="simple-container gap-8">
          <span class="body-large data-line hover-outline cursor-pointer" name="patient-name"><span class="outline-text"><i>Nombre del paciente</i></span></span>
          <!-- <span class="data-line body-large simple-container align-center cursor-pointer light-color"><md-ripple></md-ripple><md-icon class="dynamic outline-text">arrow_outward</md-icon></span> -->
        </div>
      </div>

      <!-- second row column 1 -->
      <div class="simple-container direction-column gap-8 grow-1 basis-normal">

        <span class="label-normal outline-text left-margin-8">Fecha y hora</span>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Fecha de la cita</span>
          <span class="body-large" name="appt-date">...</span>
        </div>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Hora de la cita</span>
          <span class="body-large" name="appt-time">...</span>
        </div>

      </div>

      <!-- second row column 2 -->
      <div class="simple-container direction-column gap-8 grow-1 basis-normal">
        <span class="label-normal outline-text left-margin-8">Datos generales</span>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Estado de la cita</span>
          <span class="body-large" name="appt-status">...</span>
        </div>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Nota de la cita</span>
          <span class="body-large" name="appt-concept">...</span>
        </div>
      </div>
    </div>

    <div class="simple-container gap-16 flex-wrap">

      <div class="simple-container direction-column gap-8 grow-1 basis-normal">
        <span class="label-normal outline-text left-margin-8">Finanzas</span>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Cobro por cita</span>
          <span class="body-large" name="appt-price">...</span>
        </div>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Estado del pago</span>
          <span class="body-large" name="appt-payment-status">...</span>
        </div>
      </div>

      <div class="simple-container direction-column gap-8 grow-1 basis-normal">
        <span class="label-normal outline-text left-margin-8">Modalidad</span>
        <div class="content-box border-radius-16 padding-16 gap-4">
          <span class="label-normal outline-text user-select-none">Modalidad</span>
          <span class="body-large" name="appt-mode">...</span>
        </div>
      </div>

    </div>


  </form>
  <div slot="actions" class="flex-wrap">
    <md-filled-tonal-button name="button-delete-forever" class="delete"><md-icon slot="icon">delete_forever</md-icon>Eliminar permanentemente</md-filled-tonal-button>
    <md-filled-button name="button-recover" ><md-icon slot="icon">restart_alt</md-icon>Recuperar cita</md-filled-button>
  </div>
</md-dialog>

<md-dialog id="dialog-patient-profile" class="width-100 max-width-800-m-24" >
  <div slot="headline">
    <md-icon-button form="form-dialog-patient-profile" value="cancel"><md-icon>close</md-icon></md-icon-button>
    <span slot="headline">Paciente</span>
  </div>
  <form id="form-dialog-patient-profile" slot="content" method="dialog" class="simple-container direction-column on-background-text gap-8">
    
    <!-- row 1 -->
    <div class="content-box light-color border-radius-16 padding-16 gap-8">
      <span class="label-normal outline-text">Paciente</span>
      <div class="simple-container gap-8 flex-wrap">
        <span class="body-large data-line hover-outline cursor-pointer" name="patient-name"><span class="outline-text"><i>Nombre del paciente</i></span></span>
        <span class="body-large data-line hover-outline cursor-pointer" name="patient-gender"><span class="outline-text"><i>...</i></span></span>
        <span class="body-large data-line hover-outline cursor-pointer" name="patient-age"><span class="outline-text"><i>...</i></span></span>
        <span class="body-large data-line hover-outline cursor-pointer" name="patient-birthdate"><span class="outline-text"><i>...</i></span></span>
      </div>
    </div>
    <!-- row 2 -->
    <div class="content-box border-radius-16 padding-16 gap-8">
      <span class="label-normal outline-text user-select-none weight-500">Estado del paciente</span>
      <span class="body-large" name="patient-status">...</span>
    </div>
    <!-- row 3 -->
    <div class="content-box border-radius-16 padding-16 gap-8">
      <span class="label-normal outline-text user-select-none weight-500">Contacto</span>
      <span class="body-large" name="patient-contact_phone">...</span>
      <span class="body-large" name="patient-contact_email">...</span>
    </div>
    <!-- row 4 -->
    <div class="simple-container gap-8 flex-wrap">
      <div class="content-box border-radius-16 padding-16 gap-4 grow-1 basis-normal">
        <span class="label-normal outline-text user-select-none">Escuela</span>
        <span class="body-large" name="patient-school">...</span>
      </div>
      <div class="content-box border-radius-16 padding-16 gap-4 grow-1 basis-normal">
        <span class="label-normal outline-text user-select-none">Grado escolar</span>
        <span class="body-large" name="patient-school_grade">...</span>
      </div>
    </div>
    <!-- row 5 -->
    <div class="simple-container gap-8 flex-wrap">
      <div class="content-box border-radius-16 padding-16 gap-4 grow-1 basis-normal">
        <span class="label-normal outline-text user-select-none">Precio por cita</span>
        <span class="body-large" name="patient-appt_price">...</span>
      </div>
    </div>
    <!-- row 6 -->
    <div class="simple-container direction-column">
      <md-filled-text-field
        disabled
        label="Notas del paciente" 
        type="textarea"
        name="patient-notes"
      ></md-filled-text-field>
    </div>
  </form>
  <div slot="actions" class="flex-wrap">
    <md-filled-tonal-button name="button-delete-forever" class="delete"><md-icon slot="icon">delete_forever</md-icon>Eliminar permanentemente</md-filled-tonal-button>
    <md-filled-button name="button-recover" ><md-icon slot="icon">restart_alt</md-icon>Recuperar paciente</md-filled-button>
  </div>
</md-dialog>



<md-dialog id="dialog-appt-created-message">
  <div slot="headline">Cita agendada</div>
  <md-icon slot="icon" class="filled" aria-hidden="true">verified</md-icon>
  <form id="form-dialog-appt-created-message" style="display:none;" slot="content" method="dialog">
  </form>
  <div slot="actions" class="flex-wrap">
    <md-text-button form="form-dialog-appt-created-message" data-flip-id="animate" onclick="ApptsManager.openCreateApptWindow()"><md-icon slot="icon">calendar_add_on</md-icon>Agendar otra cita</md-text-button>
    <md-filled-button form="form-dialog-appt-created-message">Aceptar</md-filled-button>
    <!-- <md-filled-tonal-button name="button-delete-forever" class="delete"><md-icon slot="icon">delete_forever</md-icon>Eliminar permanentemente</md-filled-tonal-button> -->
    <!-- <md-filled-button name="button-recover" ><md-icon slot="icon">restart_alt</md-icon>Recuperar cita</md-filled-button> -->
  </div>
</md-dialog>

<md-dialog id="dialog-appt-taken">
  <div slot="headline">Ya hay una cita</div>
  <md-icon slot="icon" aria-hidden="true" class="filled">warning</md-icon>
  <form id="form-dialog-appt-taken" slot="content" method="dialog">
    Ya existe una cita en la Fecha y Hora seleccionada<br>
    ¿Deseas continar?
  </form>
  <div slot="actions">
    <md-text-button form="form-dialog-appt-taken" value="cancel" role="presentation">Cancelar</md-text-button>
    <md-filled-tonal-button data-action="confirm" name="button-confirm-create-appt" form="form-dialog-appt-taken" onclick="" class="delete" value="confirm">
      Continuar
    </md-filled-tonal-button>
  </div>
</md-dialog>

<md-dialog id="dialog-note-data"class="width-100 max-width-800-m-24">
  <div slot="headline">
    <md-icon-button form="form-dialog-note-data" value="cancel"><md-icon>close</md-icon></md-icon-button>
    <span slot="headline">Nota</span>
  </div>
  <form id="form-dialog-note-data" slot="content" method="dialog" class="simple-container direction-column gap-8 on-background-text">
       
    <div class="simple-container gap-8 flex-wrap">
      <div class="content-box light-color border-radius-16 padding-16 gap-4 grow-1 basis-normal">
        <span class="label-normal outline-text user-select-none">Título</span>
        <span class="body-large" name="note-title">Notas de sesión</span>
      </div>

      <div class="content-box light-color border-radius-16 padding-16 gap-4 grow-1 basis-normal">
        <span class="label-normal outline-text user-select-none">Paciente</span>
        <span class="body-large" name="note-patient">Luis David Felipe</span>
      </div>
    </div>

    <div class="content-box background" style="padding:32px 24px;" name="note-content" class="tiptap">

    </div>


  </form>
  <div slot="actions" class="flex-wrap">
    <md-filled-tonal-button name="button-delete-forever" class="delete"><md-icon slot="icon">delete_forever</md-icon>Eliminar permanentemente</md-filled-tonal-button>
    <md-filled-button name="button-recover" ><md-icon slot="icon">restart_alt</md-icon>Recuperar nota</md-filled-button>
  </div>
</md-dialog>

<md-dialog id="dialog-delete-series-confirmation">
  <div slot="headline">Eliminar permanentemente</div>
  <md-icon slot="icon" aria-hidden="true">delete</md-icon>
  <form id="form-dialog-delete-series-confirmation" slot="content" method="dialog">
    ¿Estás seguro(a) de que quieres eliminar esta serie permanentemente?<br>
  </form>
  <div slot="actions" class="direction-row-column">
    <md-filled-tonal-button class="solid flex-0-1" form="form-dialog-delete-series-confirmation" value="cancel" role="presentation">Cancelar</md-filled-tonal-button>
    <md-filled-tonal-button name="button-confirm-delete" class="flex-0-1 delete" value="confirm">
      <md-icon slot="icon">delete</md-icon>
      Eliminar permanentemente
    </md-filled-tonal-button>
  </div>
</md-dialog><section id="section-home"  class="on-background-text dm-sans-all gap-16" active>

    <div class="simple-container justify-between align-center hide-on-mobile">
        <span class="headline-small">Inicio</span>
        <md-filled-button
            id="toggler-menu-home-create-actions"
            onclick="toggleMenu('menu-home-create-actions')"
            data-flip-id="animate"
            >
            <md-icon slot="icon">add</md-icon>
            Crear
        </md-filled-button>
        <md-menu id="menu-home-create-actions" class="style-modern dm-sans-all" style="min-width:264px;" anchor="toggler-menu-home-create-actions">
            <md-menu-item data-action="open-create-appt-window" data-flip-id="animate">
                <md-icon slot="start" class="filled">calendar_add_on</md-icon>
                <div slot="headline">Agendar cita</div>
            </md-menu-item>
            <md-menu-item data-flip-id="animate" onclick="PatientsManager.openCreatePatientWindow()">
                <md-icon slot="start" class="filled">person_add</md-icon>
                <div slot="headline">Agregar paciente</div>
            </md-menu-item>
        </md-menu>
    </div>

    <div class="container-dashboard">
        <div class="dashboard-card card-1">

            <div class="content-box light-color gap-24 main-mobile-container-display">
                <div class="simple-container direction-column">
                    <span class="headline-small weight-600">Hola 
                        peseja7329@cavoyar.com
                    </span>
                    <span class="body-medium outline-text" data-role="container-date-today">...</span>
                </div>

                <div class="simple-container direction-column gap-16">
                    <div class="simple-container direction-column main-mobile-display gap-8">
                        <span class="body-large weight-500 opacity-0-8 line-height-1">Hoy tienes</span>
                        <span class="display-medium weight-600 line-height-1" data-role="container-total-today-appts">...</span>
                    </div>

                    <!-- <div class="simple-container gap-8 hide-on-mobile">
                        <md-filled-button data-flip-id="animate" data-action="open-create-appt-window"><md-icon slot="icon">more_time</md-icon>Crear cita</md-filled-button>
                        <md-filled-tonal-icon-button onclick="PatientsManager.openCreatePatientWindow()" data-flip-id="animate"><md-icon>person_add</md-icon></md-filled-tonal-icon-button>
                    </div> -->
                </div>

                <div class="simple-container position-absolute bottom-16 right-16">
                    <button data-action="open-create-appt-window" title="Agendar cita este día" data-flip-id="animate" class="style-5 hover-scale-small">
                        <md-ripple></md-ripple>
                        <md-icon class="filled">calendar_add_on</md-icon>
                    </button>
                </div>

            </div>

        </div>
        <div class="dashboard-card card-2">

            <div class="content-box background outline-light-1 gap-0 justify-center">
                <!-- <md-icon class="outline-text filled b-padding-8 hide-on-mobile" style="--md-icon-size:40px">person_play</md-icon> -->
                <span class="headline-small dm-sans outline-text">Hoy:</span>
                <span class="headline-small weight-600 dm-sans" data-role='container-day-resume'>...</span>
                
            </div>
            
        </div>
        <div class="dashboard-card card-3">

            <div class="content-box background outline-light-1 gap-0 justify-center">
                <!-- <md-icon class="outline-text filled b-padding-8 hide-on-mobile" style="--md-icon-size:40px">arrow_circle_right</md-icon> -->
                <span class="headline-small dm-sans outline-text">Tu próxima cita:</span>
                <span class="headline-small weight-600 dm-sans" data-role="container-next-appt">...</span>
            </div>
        </div>
        <div class="dashboard-card card-4 direction-column">

            <div class="content-box background outline-light-1 padding-8 grow-1">
                <span class="headline-small weight-500 dm-sans padding-16 b-padding-0">Citas de hoy</span>
                <div 
                    id="container-today-appts" 
                    class="simple-container direction-column gap-8 grow-1"
                    >
                    <div 
                        name="container-filters"
                        class="simple-container justify-between gap-8 overflow-hidden direction-row-column" 
                        >
            
                        <div class="simple-container gap-8 overflow-auto max-width-100 h-padding-16 b-padding-8">

                            <button class="style-2 playful" name="filter_status" data-value="1" active>Pendientes<md-ripple></md-ripple></button>
                            <button class="style-2 playful" name="filter_status" data-value="2" >Completadas<md-ripple></md-ripple></button>
            
                        </div>
            
                    </div>
                    <div class="simple-container direction-column overflow-auto padding-1 border-radius-16 grow-1">
                        <div name="container-table" class="simple-container direction-column gap-4 grow-1"></div>
                    </div>
                    <div name="container-pagination"></div>
                </div>
                <!-- <div class="simple-container direction-column padding-16 b-padding-8">
                    <span class="body-large dm-sans">Citas de hoy</span>
                </div> -->
            </div>

            <div class="content-box background outline-light-1 only-on-mobile">
                <div class="simple-container direction-column">
                    <span class="headline-medium weight-500 dm-sans">Tu agenda pública</span>    
                </div>
                <div class="simple-container">
                    <button name="button-open-shcedule-picker" data-flip-id="animate" class="style-3 gap-8 simple-container primary-container on-primary-container-text dm-sans" style="border-radius:64px">
                        <md-icon class="dynamic">event_available</md-icon>
                        Configurar  Disponibilidad
                    </button>
                </div>
                <div class="simple-container direction-column gap-8">
                    <a target="_blank" name="response-availability-url" style="font-size:10px; color:var(--md-sys-color-outline)" class="style-4 outline-light-1  hover-outline"><md-icon class="dynamic hide-on-mobil">link</md-icon>melonmind.app/apps/mind/availability?therapist=<span name="response-user-special-token"></span></a>
                    <!-- <div class="simple-container">
                        <button type="button" class="style-2 simple-container align-center gap-4" onclick="copyToClipboard('https://melonmind.app/apps/mind/availability?therapist=peseja7329@cavoyar.com')"><md-icon class="dynamic">content_copy</md-icon><md-ripple></md-ripple>Copiar enlace</button>
                    </div> -->
                </div>
            </div>

        </div>
        <div class="dashboard-card card-5">

            <div class="content-box  padding-8 background outline-light-1">
                <div class="simple-container grow-1 gap-8 basis-small direction-column position-relative">

                    <div class="simple-container direction-row justify-between padding-16 b-padding-8">
                        <div class="simple-container direction-column justify-center gap-8">
                            <span class="headline-small dm-sans weight-500" name="account-username">Solicitudes de cita</span>
                            <div>
                                <button class="style-2 playful simple-container align-center gap-4" name="button-refresh-appt-requests"><md-icon class="dynamic">refresh</md-icon><md-ripple></md-ripple>Refrescar</button>
                            </div>
                            <!-- <span class="body-large outline-text dm-sans">
                                Puedes aceptar o rechazar cada solicitud.
                            </span> -->
                        </div>
                        <!-- <div class="simple-container align-center">
                            <button name="button-refresh-appt-requests"  class="style-6 outline-text background simple-container align-center gap-4"><md-icon class="dynamic">refresh</md-icon><md-ripple></md-ripple>Refrescar</button>

                        </div> -->
                        <!-- <md-icon-button name="button-refresh-appt-requests" class="hide-on-mobile"><md-icon>refresh</md-icon></md-icon-button> -->
                    </div>
                    
                    <div class="content-box transparent padding-0 gap-8 grow-1" style="background:transparent;" id="container-appts-requests">
                        <div name="conatiner-filters" class="hidden"></div>
                        <div class="simple-container direction-column gap-8 grow-1" name="container-table"></div>
                        <div name="container-pagination"></div>
                    </div>
                
                </div>
            </div>

        </div>
    </div>

    

  

    <!-- column 1 -->
    <!-- <div class="simple-container grow-1 basis-large direction-column gap-8">
        <div class="simple-container padding-16 t-padding-8 justify-between">
            <div class="simple-container direction-column">
                <span class="headline-medium dm-sans weight-600" name="account-username" id="response-home-user-name">Hola,
                    peseja7329@cavoyar.com                </span>
                <span class="body-large outline-text dm-sans" name="response-date-today">...</span>
            </div>
        </div>

        <div class="simple-container flex-wrap gap-8">
            <div class="content-box padding-32 primary-container on-primary-container-text gap-0 rounded grow-1 basis-normal user-select-none">
                <span class="headline-small dm-sans opacity-0-8">Hoy tienes</span>
                <span class="display-medium weight-600 dm-sans line-height-1" id="total-today-appts">...</span>
                <div class="simple-container position-absolute bottom-16 right-16">
                    <button
                        title="Agendar cita este día"
                        data-action="open-create-appt-window"
                        data-flip-id="animate" 
                        class="style-5 on-primary-container primary-container-text hover-scale-small"
                        >
                        <md-ripple></md-ripple>
                        <md-icon>calendar_add_on</md-icon>
                    </button>
                </div>
            </div>

            <div class="content-box padding-32 background outline-light-1 gap-0 overflow-hidden justify-center rounded grow-1 basis-normal">
                <span class="headline-small dm-sans opacity-0-8">Tu próxima cita:</span>
                <div class="simple-container overflow-hidden">
                </div>
                <span class="headline-small weight-600 dm-sans" id="response-home-next-appt">...</span>
                
            </div>

        </div>

        
        
        <div class="content-box background outline-light-1 padding-8 grow-1">
            <div class="simple-container direction-column padding-16 b-padding-8">
                <span class="body-large dm-sans">Citas de hoy</span>
                <span class="headline-medium weight-500 dm-sans" name="response-date-today">...</span>
            </div>
    
            <div class="simple-container left-margin-16 bottom-margin-16 gap-8">
                <button 
                    class="style-2"
                    data-w-section="w-section-today-appts-pending"
                    onclick="toggleWSection('w-section-today-appts-pending')"
                    id="button-w-section-today-appts-pending"
                    active
                    data-fip-id="animate"
                    >
                    <md-ripple></md-ripple>
                    Pendientes
                </button>
                <button 
                    class="style-2"
                    data-w-section="w-section-today-appts-completed"
                    onclick="toggleWSection('w-section-today-appts-completed')"
                    id="button-w-section-today-appts-completed"
                    data-fip-id="animate"
                    >
                    <md-ripple></md-ripple>
                    Completadas
                </button>
            </div>
    
            <div 
                class="w-section simple-container direction-column grow-1 padding-0"
                id="w-section-today-appts-pending"
                active
                >
                <div 
                    class="simple-container direction-column gap-8 grow-1" 
                    id="response-container-today-pending-appts-table"
                    >
                </div>
            </div>
            <div 
                class="w-section simple-container direction-column grow-1 padding-0"
                id="w-section-today-appts-completed"
                >
                <div 
                    class="simple-container direction-column gap-8 grow-1" 
                    id="response-container-today-completed-appts-table"
                    >
                </div>
            </div>

        </div>

        <div class="content-box background outline-light-1 only-on-mobile">
            <div class="simple-container direction-column">
                <span class="headline-medium weight-500 dm-sans">Tu agenda pública</span>    
            </div>
            <div class="simple-container">
                <button name="button-open-shcedule-picker" data-flip-id="animate" class="style-3 gap-8 simple-container primary-container on-primary-container-text dm-sans" style="border-radius:64px">
                    <md-icon class="dynamic">event_available</md-icon>
                    Configurar  Disponibilidad
                </button>
            </div>
            <div class="simple-container direction-column gap-8">
                <a target="_blank" name="response-availability-url" style="font-size:10px; color:var(--md-sys-color-outline)" class="style-4 outline-light-1  hover-outline"><md-icon class="dynamic hide-on-mobil">link</md-icon>melonmind.app/apps/mind/availability?therapist=<span name="response-user-special-token"></span></a>
            </div>
        </div>
    </div> -->


    <!-- column 2 -->
    <!-- <div class="simple-container grow-1 gap-8 basis-small direction-column position-relative">

        <div class="simple-container direction-row justify-between padding-16">
            <div class="simple-container direction-column">
                <span class="headline-small dm-sans weight-500" name="account-username">Solicitudes de cita</span>
                <span class="body-large outline-text dm-sans">
                    Puedes aceptar o rechazar cada solicitud.
                </span>
            </div>
            <div class="simple-container">
                <button name="button-refresh-appt-requests"  class="style-6 outline-text background top-margin-8 simple-container align-center gap-4"><md-icon class="dynamic">refresh</md-icon><md-ripple></md-ripple>Refrescar</button>

            </div>
        </div>
        
        <div class="content-box background outline-light-1 padding-8 gap-8 grow-1" id="container-appts-requests">
            <div name="conatiner-filters" class="hidden"></div>
            <div class="simple-container direction-column gap-8 grow-1" name="container-table"></div>
            <div name="container-pagination"></div>
        </div>
    
    </div> -->
    

</section><section id="section-patients"  class="on-background-text dm-sans-all">
    
    <!-- main section -->
    <div class="simple-container direction-column width-100 gap-8 flex-1 border-radius-16">

        <div class="simple-container justify-between align-center align-center gap-8 flex-wrap">
            <span class="headline-small on-background-text dm-sans">Pacientes</span>
            <div class="simple-container gap-8 mobile-direction-row-reverse">
                <md-filled-tonal-button onclick="PatientsManager.openSearchPatientWindow()" data-flip-id="animate" class="solid"><md-icon slot="icon">search</md-icon>Búscar</md-filled-tonal-button>
                <md-filled-button onclick="PatientsManager.openCreatePatientWindow()" data-flip-id="animate"><md-icon slot="icon">person_add</md-icon>Agregar paciente</md-filled-button>
            </div>
        </div>
        <div class="simple-container gap-8 flex-wrap" id="patients-stats-data-container" style="margin-top:8px;">
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Totales</span>
                <span class="headline-small dm-sans on-background-text" name="total-patients">...</span>
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Activos</span>
                <span class="headline-small dm-sans on-background-text" name="active-patients">...</span>
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">De alta</span>
                <span class="headline-small dm-sans on-background-text" name="discharged-patients">...</span>
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Inactivos</span>
                <span class="headline-small dm-sans on-background-text" name="inactive-patients">...</span>
            </div>
        </div>
        <div class="simple-container">
            <div class="simple-container gap-8 overflow-auto" id="container-patients-table-filters">
                <select name="filter-status" onchange="PatientsManager.applyTableFilters()">
                    <option value="all_status">Estado: Todos</option>
                    <option value="1">Estado: Activo</option>
                    <option value="2">Estado: Dado de alta</option>
                    <option value="3">Estado: Inactivo</option>
                </select>
                <select name="filter-order_by" onchange="PatientsManager.applyTableFilters()">
                    <option value="patient_name">Ordenar por: Nombre</option>
                    <option value="patient_status">Ordenar por: Estado</option>
                    <option value="patient_birthdate">Ordenar por: Edad</option>
                </select>
                <select name="filter-order" onchange="PatientsManager.applyTableFilters()">
                    <option value="ASC">Orden: Ascendente</option>
                    <option value="DESC">Orden: Descendente</option>
                </select>
            </div>
        </div>
        

        <div class="simple-container direction-column gap-8">
            <div id="response-container-patients_table" class="simple-container direction-column gap-4"></div>
            <div class="simple-container justify-center">
                <md-filled-tonal-button id="load-more-patients" disabled="true">Cargar más</md-filled-tonal-button>
            </div>
        </div>
        <!-- 
        <div class="simple-container gap-8">
            <md-filled-button data-flip-id="animate" onclick="toggleSubSection('#sub-section-patient-profile')">Abrir sub section</md-filled-button>
            <md-filled-button data-flip-id="animate" onclick="toggleSubSection('#sub-section-patient-profile-2')">Abrir sub section 2</md-filled-button>
            <md-filled-button data-flip-id="animate" onclick="toggleSubSection('#sub-section-patient-profile-2', {exclusive:true})">Abrir sub section 2 EXCLUSIVE</md-filled-button>
        </div> -->

    </div>


    <!-- sub section 1 -->
    <div 
        data-sub-section 
        data-flip-id="animate"
        id="sub-section-patient-profile"
        class="simple-container flex-1 on-background-text full-width top-padding-safe-area dm-sans absolute-screen justify-center" 
        style="background: var(--md-sys-color-background); box-sizing:border-box; backdrop-filter: none;"
        >
        <div class="simple-container direction-column grow-1 gap-8 overflow-auto border-radius-16 width-100">

            <!-- row 1 -->
            <div class="simple-container align-center justify-between gap-8">
                <div class="simple-container gap-8 align-center">
                    <md-filled-tonal-icon-button class="solid-light" onclick="toggleSubSection('#sub-section-patient-profile', {action:'close'})"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
                    <!-- <span class="headline-small on-background-text dm-sans">Perfil del paciente</span> -->
                </div>
                <div class="simple-container gap-8 flex-wrap">
                    <md-filled-tonal-button class="solid dm-sans" onclick='toggleWindow("#window-patient-data")' data-flip-id="animate"><md-icon slot="icon">edit</md-icon>Editar datos</md-filled-tonal-button>
                    <md-filled-button class="dm-sans" data-flip-id="animate" name="button-create-appt"><md-icon slot="icon">add</md-icon>Agendar cita</md-filled-button>
                </div>
            </div>

            <!-- row 2 -->
            <div class="content-box light-color direction-row gap-24 flex-wrap justify-center" >
                <!-- <div class="simple-container"><md-icon class="pretty filled">account_circle</md-icon></div> -->
                <div class="simple-container direction-column justify-center grow-1 gap-8">
                    <span class="headline-large weight-600 dm-sans line-height-1" name="patient-name"><span class="outline-text"><i>Nombre del paciente</i></span></span>
                    <div class="simple-container direction-column">
                        <span class="body-large dm-sans" name="patient-gender">...</span>
                        <span class="body-large dm-sans opacity-0-8" name="patient-age">...</span>
                        <span class="body-large dm-sans opacity-0-8" name="patient-birthdate">...</span>
                    </div>
                </div>
            </div>

            <div class="simple-container ">
                <div class="simple-container direction-column grow-1 border-radius-8 overflow-hidden">
                    <md-tabs class="style-modern">
                        <md-secondary-tab 
                            id="md-tab-patients-general" 
                            aria-controls="md-panel-patient-general"
                            onclick="toggleMdTab(this)"
                            class="dm-sans"
                            >
                            <md-icon slot="icon">person</md-icon>
                            Datos
                        </md-secondary-tab>
                        <md-secondary-tab 
                            id="md-tab-patients-appts" 
                            aria-controls="md-panel-patient-appts"
                            onclick="toggleMdTab(this);"
                            class="dm-sans"
                            >
                            <md-icon slot="icon">schedule</md-icon>
                            Citas
                        </md-secondary-tab>
                        <md-secondary-tab 
                            id="md-tab-patients-notes" 
                            aria-controls="md-panel-patient-notes"
                            onclick="toggleMdTab(this)"
                            class="dm-sans"
                            >
                            <md-icon slot="icon">clinical_notes</md-icon>
                            Historial clínico
                        </md-secondary-tab>
                        <md-secondary-tab 
                            id="md-tab-patients-consent" 
                            aria-controls="md-panel-patient-consent"
                            onclick="toggleMdTab(this); ConsentManager.loadPatientConsents();"
                            class="dm-sans"
                            >
                            <md-icon slot="icon">description</md-icon>
                            Consentimientos y autorizaciones
                        </md-secondary-tab>
                        <md-secondary-tab 
                            id="md-tab-patient-billing" 
                            aria-controls="md-panel-patient-billing"
                            onclick="toggleMdTab(this)"
                            class="dm-sans"
                            data-feature="billing"
                            >
                            <md-icon slot="icon">euro</md-icon>
                            Facturación
                        </md-secondary-tab>

                    </md-tabs>
                </div>

            </div>

            <div
                data-md-panel
                active
                class="simple-container direction-column gap-8 grow-1" 
                id="md-panel-patient-general" 
                role="tabpanel" 
                aria-labelledby="md-tab-patients-general"
                >
                
                <div class="simple-container direction-column gap-8">
                    <div class="content-box width-auto light-color border-radius-16 padding-16 gap-8">
                        <span class="label-normal dm-sans outline-text user-select-none weight-500">Estado del paciente</span>
                        <span class="body-large dm-sans weight-500" name="patient-status">...</span>
                    </div>
                    <div class="content-box width-auto light-color border-radius-16 padding-16 gap-4 grow-1">
                        <span class="label-normal dm-sans outline-text user-select-none">Precio por cita</span>
                        <span class="body-large dm-sans weight-500" name="patient-appt_price">...</span>
                    </div>
                </div>

                <div class="content-box padding-8 outline-light-1 border-radius-24 background">
                
                    <div class="content-box background border-radius-16 padding-16 gap-8" name="container-contact-data">
                        <span class="label-normal outline-text user-select-none weight-500">Contacto</span>
                        <span class="body-large" name="patient-contact_phone">...</span>
                        <span class="body-large" name="patient-contact_email">...</span>
                        <div class="simple-container gap-8 flex-wrap" name="patient-email-buttons">
                            <div class="simple-container direction-column width-100">
                                <div name="message-email-verified" class="data-line icon secondary-container primary-text weight-500 hidden"><md-icon class="dynamic filled">verified</md-icon>Correo verificado</div>
                                <div name="message-email-sent" class="data-line secondary-container primary-text weight-500 icon hidden"><md-icon class="dynamic">check</md-icon>Correo de verificación enviado</div>
                            </div>
                            <md-filled-button data-flip-id="animate" name="button-add-email" class="dm-sans hidden"><md-icon slot="icon">add</md-icon>Agregar correo</md-filled-button>
                            <md-filled-button name="button-verify-email" class="dm-sans hidden"><md-icon slot="icon">forward_to_inbox</md-icon>Enviar correo de verificación</md-filled-button>
                            <md-outlined-button name="button-resend-email" class="dm-sans hidden"><md-icon slot="icon">forward_to_inbox</md-icon>Volver a enviar</md-outlined-button>
                        </div>
                    </div>
    
                    <div class="content-box background flex-wrap border-radius-16 padding-16 gap-8">
                        <!-- Reminders -->
                        <div class="simple-container direction-column gap-4">
                            <span class="body-large weight-500 dm-sans">Recordatorios de citas</span>
                            <span class="label-large outline-text">El paciente recibirá recordatorios por correo para confirmar sus citas.</span>
                        </div>
                        <div class="simple-container direction-column gap-4">
                            <md-switch icons name="patient-reminders"></md-switch>
                            <div class="simple-container align-center gap-4 flex-wrap">
                                <select name="patient-reminders_channel" class="style-2">
                                    <option value="email">Email</option>
                                    <option value="whatsapp">WhatsApp</option>
                                </select>
                                <select name="patient-reminders_offset" class="style-2">
                                    <option value="2">2 horas de anticipación</option>
                                    <option value="4">4 horas de anticipación</option>
                                    <option value="8">8 horas de anticipación</option>
                                    <option value="12">12 horas de anticipación</option>
                                    <option value="24">24 horas de anticipación</option>
                                    <option value="48">48 horas de anticipación</option>
                                </select>
                                <button data-flip-id="animate" data-action="open-reminder-templates" class="style-2 dm-sans" style="height:36px;"><md-ripple></md-ripple>Personalizar mensaje</button>
                            </div>
                        </div>
    
                        <div class="entry-animation-1 content-box border-radius-16 padding-16 outline-1 on-error-container-text hidden" name="reminder-alert-message">
                            <div class="simple-container align-center gap-8 flex-wrap">
                                <md-icon class="">error</md-icon>
                                Los recordatorios estarán activos una vez el paciente confirme su correo.
                            </div>    
                        </div>
                    </div>
    
                    <div class="content-box background flex-wrap border-radius-16 padding-16 gap-8">
                        <!-- notifications -->
                        <div class="simple-container direction-column gap-4">
                            <span class="body-large weight-500 dm-sans">Notificaciones</span>
                            <span class="label-large outline-text">El paciente recibirá una notificación cada vez que se agende o edite una cita</span>
                        </div>
                        <div class="simple-container">
                            <md-switch icons name="patient-notifications"></md-switch>
                        </div>
    
                        <div class="entry-animation-1 content-box border-radius-16 padding-16 outline-1 on-error-container-text hidden" name="notifications-alert-message">
                            <div class="simple-container align-center gap-8 flex-wrap">
                                <md-icon class="">error</md-icon>
                                Las notififaciones estarán activas una vez el paciente confirme su correo.
                            </div>    
                        </div>
                    </div>
                </div>
                



                <div class="simple-container gap-8 flex-wrap">
                    <div class="content-box border-radius-16 padding-16 gap-4 grow-1 basis-normal">
                        <span class="label-normal outline-text user-select-none">Centro de estudios</span>
                        <span class="body-large" name="patient-school">...</span>
                    </div>
                    <div class="content-box border-radius-16 padding-16 gap-4 grow-1 basis-normal">
                        <span class="label-normal outline-text user-select-none">Nivel de estudios</span>
                        <span class="body-large" name="patient-school_grade">...</span>
                    </div>
                </div>

                <div class="content-box border-radius-16 padding-16 gap-8">
                    <span class="label-normal outline-text user-select-none weight-500">Identificación</span>
                    <span class="body-large" name="patient-identification">...</span>
                </div>

                <div class="content-box border-radius-16 padding-16 gap-8">
                    <span class="label-normal outline-text user-select-none weight-500">Dirección</span>
                    <span class="body-large" name="patient-address">...</span>
                </div>
                <div class="content-box border-radius-16 padding-16 gap-8">
                    <span class="label-normal outline-text user-select-none weight-500">Profesión</span>
                    <span class="body-large" name="patient-profession">...</span>
                </div>
                <div class="content-box border-radius-16 padding-16 gap-8">
                    <span class="label-normal outline-text user-select-none weight-500">Estado cívil</span>
                    <span class="body-large" name="patient-marital_status">...</span>
                </div>

                <div class="simple-container direction-column position-relative">
                    <md-filled-text-field
                        label="Notas / Observaciones" 
                        type="textarea"
                        style="min-height: 232px;"
                        name="patient-notes"
                    ></md-filled-text-field>
                    <md-icon 
                        class="pretty small ui-confirm-note-changes position-absolute bottom-8 right-8" 
                        title="Indicador de auto guardado"
                        name='ui-indicator-note-updated'
                        >
                        cloud_done
                    </md-icon>
                </div>
                <div class="simple-container bottom-margin-24 justify-between">
                    <md-text-button onclick="TrashManager.openConfirmationDialog('patient')"><md-icon slot="icon">delete</md-icon>Eliminar paciente</md-text-button>
                    <md-text-button
                        onclick="ApptsManager.openApptLog()"
                        disabled="true"
                        title="En desarrollo..."
                        >
                        <md-icon slot="icon">history</md-icon>
                        Historial de cambios
                    </md-text-button>
                </div>
            </div>

            <div 
                data-md-panel
                class="simple-container direction-column gap-8 grow-1" 
                id="md-panel-patient-appts" 
                role="tabpanel" 
                aria-labelledby="md-tab-patient-appts"
                >

                <div class="simple-container flex-wrap gap-8" id="patient-appts-stats">
                    <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Totales</span>
                        <span class="headline-small dm-sans on-background-text" name="total-appts">...</span>
                    </div>
                    <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Pendientes</span>
                        <span class="headline-small dm-sans on-background-text" name="total-pending-appts">...</span>
                    </div>
                    <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Completadas</span>
                        <span class="headline-small dm-sans on-background-text" name="total-completed-appts">...</span>
                        <!-- <md-icon class="absolute-card medium">event_available</md-icon> -->
                    </div>
                    <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Canceladas</span>
                        <span class="headline-small dm-sans on-background-text" name="total-cancelled-appts">...</span>
                        <!-- <md-icon class="absolute-card medium">event_busy</md-icon> -->
                    </div>
                    <div class="content-box gap-0 grow-1 basis-small user-select-none secondary-container on-secondary-containert-text hover-outline">
                        <span class="label-normal" data-label>Ingresos estimados</span>
                        <span class="headline-small dm-sans primary-text" name="total-income" data-value>...</span>
                    </div>
                </div>
                
                <div 
                    id="patient-appts-container" 
                    class="simple-container direction-column gap-8"
                    >
                    <div 
                        name="container-filters"
                        class="simple-container justify-between gap-8 overflow-hidden direction-row-column" 
                        >
            
                        <div class="simple-container gap-8 overflow-auto max-width-100">
                            <select
                                name="filter_month"
                                >
                                <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                                <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                            </select>
            
                            <select
                                name="filter_year"
                                >
                                <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                                <option value="2023,2024,2025,2026">Años todos</option>
                            </select>
            
                            <select
                                name="filter_status"
                                >
                                <option value="" selected>Estado: Todos</option>
                                <option value="1">Pendiente</option>
                                <option value="2">Completada</option>
                                <option value="3">Cancelada</option>
                            </select>
            
                        </div>
            
                    </div>
                    <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                        <table name="container-table" class="style-4 adapt-to-mobile"></table>
                    </div>
                    <div name="container-pagination"></div>
                </div>
            </div>

            <div
                data-md-panel
                class="simple-container direction-column gap-8 grow-1" 
                id="md-panel-patient-consent" 
                role="tabpanel" 
                aria-labelledby="md-tab-patient-consent"
                >
                <div class="content-box flex-wrap light-color gap-16">
                    <div class="simple-container direction-column">
                        <span class="headline-small dm-sans ">Autorizaciones y consentimientos</span>
                        <span class="body-medium outline-text">
                            Consulta y genera documentos importantes como consentimientos informados y autorizaciones de protección de datos.
                        </span>
                    </div>
                    <!-- <span class="body-normal outline-text dm-sans">
                        El consentimiento informado es un proceso en el que un paciente acepta un tratamiento o procedimiento médico después de recibir información completa sobre el tratamiento y los riesgos asociados. El consentimiento informado es un proceso legal que protege los derechos del paciente.
                    </span> -->
                    <div class="simple-container gap-8 flex-wrap justify-between">
                        <div class="simple-container flex-wrap gap-8">
                            <md-outlined-button onclick="ConsentManager.openCreateConsentWindow('informed_consent')" data-flip-id="animate"><md-icon slot="icon">post_add</md-icon>Nuevo consentimiento informado</md-outlined-button>
                            <md-outlined-button onclick="ConsentManager.openCreateConsentWindow('data_consent')" data-flip-id="animate"><md-icon slot="icon">post_add</md-icon>Nueva autorización de datos</md-outlined-button>
                        </div>
                        <md-filled-tonal-button name="button-open-consent-templates-window" onclick="" data-flip-id="animate" class="solid"><md-icon slot="icon">edit_note</md-icon>Configurar plantilla predeterminada</md-filled-tonal-button>
                    </div>
                </div>

                <div class="simple-container direction-column gap-8">

                    <div style="display: grid;grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));gap: 8px;" id="response-container-patient-consents_table"></div>

                </div>

            </div>
            
            <div
                data-md-panel
                class="simple-container direction-column gap-8 grow-1" 
                id="md-panel-patient-notes" 
                role="tabpanel" 
                aria-labelledby="md-tab-patient-notes"
                >


                <div class="content-box flex-wrap light-color gap-16">
                    <div class="simple-container direction-column">
                        <span class="headline-small dm-sans ">Historial clínico</span>
                        <span class="body-medium outline-text">
                            Registra información relevante sobre su historial, observaciones durante las consultas, y cualquier detalle adicional que pueda ser útil para su seguimiento.
                        </span>
                    </div>
                    <!-- <span class="body-normal outline-text dm-sans">
                        El consentimiento informado es un proceso en el que un paciente acepta un tratamiento o procedimiento médico después de recibir información completa sobre el tratamiento y los riesgos asociados. El consentimiento informado es un proceso legal que protege los derechos del paciente.
                    </span> -->
                    <div class="simple-container gap-8 flex-wrap">
                        <md-filled-button name="button-create-note" data-flip-id="animate"><md-icon slot="icon">edit_square</md-icon>Nueva nota</md-filled-button>
                    </div>
                </div>

                <div class="simple-container direction-column gap-8" name="response-notes-table-container"></div>
                <div class="simple-container"></div>
                

            </div>

            <div
                data-md-panel
                class="simple-container direction-column gap-8 grow-1 dm-sans-all" 
                id="md-panel-patient-billing" 
                role="tabpanel" 
                aria-labelledby="md-tab-patient-billing"
                data-feature="billing"
                >
                <div class="content-box flex-wrap light-color gap-16">
                    <div class="simple-container direction-column">
                        <span class="headline-small dm-sans ">Facturación</span>
                        <span class="body-medium outline-text">
                            Administra la facturación de tus pacientes, incluyendo el registro de pagos, emisión de recibos y seguimiento de cuentas pendientes.
                        </span>
                    </div>
                    <div class="simple-container gap-8 flex-wrap">
                        <md-switch icons id="switch-patient-billing-data"></md-switch>
                    </div>
                </div>

                <div class="simple-container flex-wrap gap-8">
                    <div
                        name="button-open-patient-billing-data"
                        data-flip-id="animate"
                        class="content-box padding-16 width-auto flex-1 background outline-light-1 cursor-pointer"
                        >
                        <md-ripple></md-ripple>
                        <div class="simple-container">
                            <div class="content-box padding-8 border-radius-8 width-auto">
                                <md-icon>docs</md-icon>
                            </div>
                        </div>
                        <span class="body-large">Datos fiscales</span>
                    </div>
                    <div
                        name="button-open-create-invoice"
                        data-patient-id=""
                        data-flip-id="animate"
                        class="content-box padding-16 width-auto flex-1 background outline-light-1 cursor-pointer"
                        >
                        <md-ripple></md-ripple>
                        <div class="simple-container">
                            <div class="content-box padding-8 border-radius-8 width-auto">
                                <md-icon>receipt</md-icon>
                            </div>
                        </div>
                        <span class="body-large">Crear factura</span>
                    </div>

                </div>

                <div class="simple-container gap-8 flex-wrap">
                    <div class="content-box background outline-light-1 gap-0 grow-1 basis-small user-select-none overflow-hidden">
                        <span class="label-normal dm-sans outline-text">Facturas totales</span>
                        <span class="headline-small dm-sans on-background-text" id="patient-total-invoices">...</span>
                    </div>       
                </div>

                <div id="patient-invoices-container" class="simple-container direction-column gap-8 height-100">
                    <div class="simple-container justify-between gap-8 overflow-hidden direction-row-column" name="container-filters">

                        <div class="simple-container gap-8 overflow-auto max-width-100">
                            <button class="style-2 rounded flex-0-1" name="filter_status" data-value="1" active>Borradores<md-ripple></md-ripple></button>
                            <button class="style-2 rounded flex-0-1" name="filter_status" data-value="2" >Definitivas<md-ripple></md-ripple></button>
                            <button class="style-2 rounded flex-0-1" name="filter_status" data-value="3" >Rectificativas<md-ripple></md-ripple></button>
                        </div>

                        <div class="simple-container gap-8 overflow-auto max-width-100">
                            <select
                                class="flex-0-1"
                                name="filter_series"
                                >
                                <option value="all" selected>Serie: Todas</option>
                            </select>         

                            <select
                                class="flex-0-1"
                                name="filter_month"
                                >
                                <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                                <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                            </select>
                
                            <select
                                class="flex-0-1"
                                name="filter_year"
                                >
                                <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                                <option value="2023,2024,2025,2026">Años todos</option>
                            </select>
                
                            <!-- <select
                                name="filter_status"
                                >
                                <option value="1">Borradores</option>
                                <option value="2">Definitivas</option>
                                <option value="3">Rectificativas</option>
                            </select> -->
                        </div>

                        <!-- <form id="form-search-invoice" class="simple-container gap-8" autocomplete="off">
                            <input style="width:200px;" type="text" class="style-5 grow-1" placeholder="Buscar por número o receptor" name="search_invoice">
                            <md-filled-icon-button class="solid"><md-icon>search</md-icon></md-filled-icon-button>
                        </form> -->


                    
                    </div>

                    <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                        <table name="container-table" class="style-4 adapt-to-mobile inter-all"></table>
                    </div>
                    
                    <table name="container-pagination"></table>
                </div>
            </div>

        </div>
    </div>

    <!-- sub section 2 -->
    <div
        data-sub-section
        data-flip-id="animate"
        id="sub-section-patient-consent"
        class="simple-container absolute-screen full-width top-padding-safe-area on-background-text"
        style="max-width:900px; width:100%; box-sizing:border-box; background: var(--md-sys-color-background);"
        >
        <div class="simple-container direction-column grow-1 align-center">

            <div class="simple-container direction-column gap-8 width-100 max-width-1200">
                <div class="simple-container justify-between">
                    <div class="simple-container gap-8">
                        <md-icon-button onclick="toggleSubSection('#sub-section-patient-consent', {action:'close'})"><md-icon>close</md-icon></md-icon-button>
                        <!-- <span class="headline-small dm-sans">Consentimiento Informado</span> -->
                    </div>
                    <div class="simple-container">
                        <md-text-button name="button-share-consent" data-flip-id="animate"><md-icon slot="icon">ios_share</md-icon>Compartir con paciente</md-text-button>
                        <!-- <md-icon-button name="button-share-consent" data-flip-id="animate"><md-icon>ios_share</md-icon></md-icon-button> -->
                        <!-- <md-icon-button><md-icon>edit</md-icon></md-icon-button> -->
                        <!-- <md-icon-button><md-icon>delete</md-icon></md-icon-button> -->
                    </div>
                </div>

                
                <!-- <div class="simple-container direction-column">
                    <span class="headline-small dm-sans">Consentimiento Informado</span>
                </div> -->

                <!-- <div class="simple-container width-100 outline-variant" style="height:1px; opacity:0.5;"></div> -->

                <!-- <div class="simple-container gap-4 align-center body-medium outline-text top-margin-8">
                    <md-icon class="filled dynamic" aria-hidden="true">contract</md-icon> Documento Oficial
                </div> -->

                <div class="content-box padding-0 gap-0 outline-1 overflow-hidden">
                    <div class="simple-container padding-16"><span class="body-medium outline-text"> <md-icon class="filled dynamic" aria-hidden="true">contract</md-icon> Documento Oficial</span></div>
                    <div class="simple-container background padding-24 direction-column" style="padding-bottom:48px !important;">
                        <span class="display-small weight-500" name="title">Consentimiento informado</span>
                        <p class="body-large" style="text-align:justify" name="consent-declaration">...</p>
                    
                        <div class="simple-container flex-wrap gap-8 top-margin-24">
                            <div class="simple-container direction-column grow-1 basis-normal">
                                <img class="width-100 signature" name="patient-signature-image" name="patient-signature" alt="Consentimiento Informado">
                                <span class="body-medium text-center" name="patient-tutor-text">Firma del paciente o tutor</span>
                            </div>
                            <div class="simple-container direction-column grow-1 basis-normal">
                                <img class="width-100 signature" name="therapist-signature-image" name="psychologist-signature" alt="Consentimiento Informado">
                                <span class="body-medium text-center">Firma del psicólogo</span>
                            </div>
                        </div>
                    </div>
                </div>
                


                <div class="content-box light-color border-radius-16 padding-16 gap-8">
                    <span class="label-normal outline-text user-select-none weight-500">Estado</span>
                    <span class="body-large" name="consent-status">...</span>
                </div>

                <div class="simple-container flex-wrap gap-8">
                    <div class="content-box border-radius-16 padding-16 gap-8 grow-1 basis-normal">
                        <span class="label-normal outline-text user-select-none weight-500">Fecha y hora de creación</span>
                        <span class="body-large" name="consent-creation-datetime">...</span>
                    </div>
                    <div class="content-box border-radius-16 padding-16 gap-8 grow-1 basis-normal">
                        <span class="label-normal outline-text user-select-none weight-500">Fecha y hora de firma</span>
                        <span class="body-large" name="consent-signature-datetime">...</span>
                    </div>
                </div>

                <div class="simple-container direction-column gap-4 top-margin-16 bottom-margin-40">
                    <span class="body-normal outline-text">Próximamente</span>
                    <div class="simple-container">
                        <md-filled-button disabled="true"><md-icon slot="icon">file_save</md-icon>Descargar como PDF</md-filled-button>
                    </div>
                </div>

            

                
            </div>

        </div>
    </div>


    
</section>
<section id="section-appointments-test" class="dm-sans-all gap-16">

    <div class="simple-container justify-between align-center">
        <span class="headline-small">Citas</span>
        <!-- <md-filled-button onclick="ApptsManager.openCreateApptWindow({openStyle: 'absolute'})" data-flip-id="animate" ><md-icon slot="icon">add</md-icon>Crear</md-filled-button> -->
        <md-filled-button class="style-cap" data-action="open-create-appt-window" data-flip-id="animate" ><md-icon slot="icon">add</md-icon>Agendar</md-filled-button>
    </div>

    <div class="simple-container direction-column gap-8">
        
        <div class="simple-container flex-wrap gap-8" id="main-container-appts-stats">
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Totales</span>
                <span class="headline-small dm-sans on-background-text" name="total-appts">...</span>
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Pendientes</span>
                <span class="headline-small dm-sans on-background-text" name="total-pending-appts">...</span>
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Completadas</span>
                <span class="headline-small dm-sans on-background-text" name="total-completed-appts">...</span>
                <!-- <md-icon class="absolute-card medium">event_available</md-icon> -->
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                <span class="label-normal outline-text">Canceladas</span>
                <span class="headline-small dm-sans on-background-text" name="total-cancelled-appts">...</span>
                <!-- <md-icon class="absolute-card medium">event_busy</md-icon> -->
            </div>
            <div class="content-box gap-0 grow-1 basis-small user-select-none secondary-container on-secondary-containert-text hover-outline">
                <span class="label-normal" data-label>Ingresos estimados</span>
                <span class="headline-small dm-sans primary-text" name="total-income" data-value>...</span>
            </div>
        </div>
    
        <div 
            id="main-container-appts" 
            class="simple-container direction-column gap-8"
            >
            <div 
                name="container-filters"
                class="simple-container justify-between gap-8 overflow-hidden direction-row-column" 
                >
    
                <div class="simple-container gap-8 overflow-auto max-width-100">
                    <select
                        name="filter_month"
                        >
                        <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                        <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                    </select>
    
                    <select
                        name="filter_year"
                        >
                        <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                        <option value="2023,2024,2025,2026">Años todos</option>
                    </select>
    
                    <select
                        name="filter_status"
                        >
                        <option value="" selected>Estado: Todos</option>
                        <option value="1">Pendiente</option>
                        <option value="2">Completada</option>
                        <option value="3">Cancelada</option>
                    </select>
    
                </div>
    
            </div>
            <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                <table name="container-table" class="style-4 adapt-to-mobile"></table>
            </div>
            <div name="container-pagination"></div>
        </div>

    </div>


</section><section id="section-calendar" class="gap-4">

    <div class="simple-container justify-between align-center align-center gap-8 flex-wrap bottom-margin-4">
        <span class="headline-small on-background-text dm-sans">Calendario</span>
        <div class="simple-container aling-center gap-8" id="container-calendar-filters">
            <div class="simple-container align-center gap-4 hide-on-mobile">
                <md-filled-tonal-icon-button onclick="CalendarManager.navigateCalendar('prev')" class="solid"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
                <md-filled-tonal-icon-button onclick="CalendarManager.navigateCalendar('next')" class="solid"><md-icon>arrow_forward</md-icon></md-filled-tonal-icon-button>
            </div>
            <div class="simple-container hide-on-mobile" id="folders-view-selector-parent">
                <span class="view-selector" data-view-style="normal" onclick="CalendarManager.changeViewStyle(this)" data-tooltip="Vista mensual" title="Vista mensual" active>
                    <md-ripple></md-ripple>
                    <md-icon>calendar_view_month</md-icon>
                </span>
                <span class="view-selector" data-view-style="view-style-weekly" onclick="CalendarManager.changeViewStyle(this)" data-tooltip="Vista semanal" title="Vista semanal">
                    <md-ripple></md-ripple>
                    <md-icon>view_week</md-icon>
                </span>
            </div>
            <select 
                name="filter-month" 
                onchange="CalendarManager.changeDateFilter(this)"
                >
                <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>            </select>
            <select 
                name="filter-year" 
                onchange="CalendarManager.changeDateFilter(this)"
                >
                <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>            </select>
        </div>
    </div>

    <div class="calendar-header hide-on-mobile" id="calendar-header-desktop">
        </div>
    <div class="calendar-header only-on-mobile" id="calendar-header-mobile">
        </div>

    <div class="calendar-container" style="overflow:initial;" id="calendar-container">
        </div>

    <!-- <div
        data-sub-section
        data-flip-id="animate"
        id="sub-section-calendar-day"
        class="simple-container absolute-screen top-padding-safe-area on-background-text"
        >
        <div class="simple-container direction-column grow-1 align-center">
            <div class="simple-container direction-column gap-8 width-100 max-width-800">
                <div class="simple-container justify-between">
                    <md-icon-button onclick="toggleSubSection('#sub-section-calendar-day')"><md-icon>close</md-icon></md-icon-button>
                    <md-filled-tonal-button class="solid" name="button-create-appt" data-flip-id="animate"><md-icon slot="icon">calendar_add_on</md-icon>Agendar cita este día</md-filled-tonal-button>
                </div>
                <span class="display-small weight-500 dm-sans" name="day-container">Martes 21 de enero</span>
                <div class="simple-container direction-column gap-4 calendar-expanded-event-container" name="appts-container"></div>
            </div>
        </div>
    </div> -->
</section><section id="section-finance" class="direction-row on-background-text gap-24">

    <div class="simple-container direction-column gap-8 grow-1 max-width-100">

        <div class="simple-container" data-feature="billing">
            <div class="simple-container direction-column grow-1 border-radius-8 overflow-hidden">

                <md-tabs class="style-3 slim">
                    <md-secondary-tab 
                        id="md-tab-finance-stats" 
                        aria-controls="md-panel-finance-stats"
                        onclick="toggleMdTab(this)"
                        class="dm-sans"
                        >
                        <md-icon slot="icon">show_chart</md-icon>
                        Estadísticas
                    </md-secondary-tab>
                    <md-secondary-tab 
                        id="md-tab-finance-invoices" 
                        aria-controls="md-panel-finance-invoices"
                        onclick="toggleMdTab(this);"
                        class="dm-sans"
                        >
                        <md-icon slot="icon">euro</md-icon>
                        Facturas
                    </md-secondary-tab>
                    <md-secondary-tab 
                        id="md-tab-finance-appts" 
                        aria-controls="md-panel-finance-appts"
                        onclick="toggleMdTab(this)"
                        class="dm-sans"
                        >
                        <md-icon slot="icon">schedule</md-icon>
                        Citas
                    </md-secondary-tab>
                </md-tabs>

            </div>
    
        </div>

        <div

            data-md-panel
            active
            id="md-panel-finance-stats"
            role="tabpanel"
            aria-labelledby="md-tab-finance-stats"
            class="simple-container direction-column gap-8 grow-1"
            >

            <div class="simple-container">
                <div class="simple-container grow-1 justify-between align-center gap-8">
                    <span class="headline-small on-background-text dm-sans">Finanzas</span>
                    <div class="simple-container gap-8 flex-wrap align-center" name="filters-container">
                        <select id="finance-source-filter" data-feature="billing">
                            <option value="appointments">Datos basados en citas</option>
                            <option value="invoices">Datos basados en facturas</option>
                        </select>
                        <select class="flex-0-1" name="filter-month" onchange="FinanceManager.changeDateFilter()">
                            <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                            <option value="all">Todos</option>
                        </select>
                        <select class="flex-0-1" name="filter-year" onchange="FinanceManager.changeDateFilter()">
                            <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                            <option value="all">Todos</option>
                        </select>
                        <md-filled-button class="flex-0-1" onclick="ExpensesManager.openCreateExpenseWindow()" data-flip-id="animate"><md-icon slot="icon">shopping_bag</md-icon>Registrar gasto</md-filled-button>
                    </div>
                </div>
            </div>
    
            <div class="simple-container grow-1 gap-8 flex-wrap">
    
                <div class="simple-container direction-column gap-8 flex-0-1">
                    <div class="content-box background outline-light-1 gap-0 grow-1 hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Citas completadas sin pagar</span>
                        <span class="headline-small dm-sans on-background-text top-margin-8" name="pending-income">...</span>
                    </div>
                    <div class="content-box background outline-light-1 gap-0 grow-1 hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Citas pagadas sin completar</span>
                        <span class="headline-small dm-sans on-background-text top-margin-8" name="uncompleted-appts-income">...</span>
                    </div>
                    <div class="content-box background outline-light-1 gap-0 grow-1 hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Próximos ingresos estimados</span>
                        <span class="headline-small dm-sans on-background-text top-margin-8" name="estimated-income">...</span>
                    </div>
                    <div class="content-box background outline-light-1 gap-0 grow-1 hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Promedio de ingresos</span>
                        <span class="headline-small dm-sans on-background-text top-margin-8" name="avarage-daily-income">...</span>
                        <span class="headline-small dm-sans on-background-text" name="avarage-weekly-income">...</span>
                    </div>
                    <div class="content-box background outline-light-1 gap-0 grow-1 hover-outline overflow-hidden">
                        <span class="label-normal outline-text">Promedio de gastos</span>
                        <span class="headline-small dm-sans on-background-text top-margin-8" name="avarage-daily-expenses">...</span>
                        <span class="headline-small dm-sans on-background-text" name="avarage-weekly-expenses">...</span>
                    </div>
                </div>
    
                <div class="simple-container grow-1 basis-large overflow-hidden">
    
                    <div class="simple-container grow-1 overflow-auto gap-8 flex-wrap">
                        <div class="simple-container direction-column gap-8 grow-1 basis-normal">
                            <div class="content-box outline-light-1 background overflow-hidden on-secondary-container-text">
                                <span class="headline-small dm-sans opacity-0-8">Ingresos</span>
                                <span class="display-medium weight-600 dm-sans line-height-1" name="income">$0.00</span>
                                <md-icon class="absolute-card filled">arrow_upward</md-icon>
                            </div>
                            <div class="content-box padding-8 grow-1">
                                <table id="response-container-income_table" class="style-3 "></table>
                            </div>
                        </div>
                        <div class="simple-container direction-column gap-8 grow-1 basis-normal">
                            <div class="content-box outline-light-1 background overflow-hidden on-error-container-text ">
                                <span class="headline-small dm-sans opacity-0-8">Gastos</span>
                                <span class="display-medium weight-600 dm-sans line-height-1" name="expenses">$0.00</span>
                                <md-icon class="absolute-card filled">arrow_downward</md-icon>
                            </div>
                            <div class="content-box padding-8 grow-1">
                                <table id="response-container-expenses_table" class="style-3"></table>
                                <div class="simple-container justify-center">
                                    <button class="style-2" id="load-more-expenses" disabled="true"><md-ripple></md-ripple>Cargar más</button>
                                </div>
                            </div>
                        </div>
                        <div class="simple-container direction-column gap-8 grow-1 basis-large">
                            <div class="content-box outline-light-1 background overflow-hidden" name="balance-parent" style="transition:background 500ms, color 500ms">
                                <span class="headline-small dm-sans opacity-0-8">Balance</span>
                                <span class="display-medium weight-600 dm-sans line-height-1" name="balance">$0.00</span>
                                <md-icon class="absolute-card filled centered">trending_flat</md-icon>
                            </div>
                            <div class="content-box padding-0 overflow-hidden light-color grow-1">
                                    
                                <div class="simple-container grow-1" id="response-container-income_chart" ></div>
                                
                            </div>
                        </div>
                    </div>
                
                </div> </div>
        </div>


        <div
            data-md-panel
            id="md-panel-finance-invoices"
            role="tabpanel"
            aria-labelledby="md-tab-finance-invoices"
            class="simple-container direction-column gap-8 grow-1"
            data-feature="billing"
            >

            <div class="simple-container align-center gap-8 justify-between">
                <span class="headline-small on-background-text dm-sans">Facturas</span>
                <md-filled-button name="button-open-create-invoice" data-flip-id="animate" ><md-icon slot="icon">note_add</md-icon>Crear factura</md-filled-button>
            </div>
            
            <div class="simple-container gap-8 flex-wrap">
                <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                    <span class="label-normal dm-sans outline-text">Facturas totales</span>
                    <span class="headline-small dm-sans on-background-text" id="billing-total-invoices">...</span>
                </div>       
            </div>

            <div id="main-invoices-container" class="simple-container direction-column gap-8">
                <div class="simple-container justify-between gap-8 overflow-hidden direction-row-column" name="container-filters">

                    <div class="simple-container gap-8 overrflow-auto max-width-100">
                        <button class="style-2 rounded flex-0-1" name="filter_status" data-value="1" active>Borradores<md-ripple></md-ripple></button>
                        <button class="style-2 rounded flex-0-1" name="filter_status" data-value="2,4" >Definitivas<md-ripple></md-ripple></button>
                        <button class="style-2 rounded flex-0-1" name="filter_status" data-value="3,5" >Rectificativas<md-ripple></md-ripple></button>
                    </div>

                    <div class="simple-container gap-8 overflow-auto max-width-100">
                        <select
                            class="flex-0-1"
                            name="filter_series"
                            >
                            <option value="all" selected>Serie: Todas</option>
                        </select>         

                        <select
                            class="flex-0-1"
                            name="filter_month"
                            >
                            <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                            <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                        </select>
            
                        <select
                            class="flex-0-1"
                            name="filter_year"
                            >
                            <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                            <option value="2023,2024,2025,2026">Años todos</option>
                        </select>
            
                        <!-- <select
                            name="filter_status"
                            >
                            <option value="1">Borradores</option>
                            <option value="2">Definitivas</option>
                            <option value="3">Rectificativas</option>
                        </select> -->
                    </div>

                    <!-- <form id="form-search-invoice" class="simple-container gap-8" autocomplete="off">
                        <input style="width:200px;" type="text" class="style-5 grow-1" placeholder="Buscar por número o receptor" name="search_invoice">
                        <md-filled-icon-button class="solid"><md-icon>search</md-icon></md-filled-icon-button>
                    </form> -->


                
                </div>

                <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                    <table name="container-table" class="style-4 adapt-to-mobile"></table>
                </div>
                
                <table name="container-pagination"></table>
            </div>

            
        </div>

        <div
            data-md-panel
            id="md-panel-finance-appts"
            role="tabpanel"
            aria-labelledby="md-tab-finance-appts"
            class="simple-container direction-column gap-8 grow-1"
            data-feature="billing"
            >


            <div class="simple-container gap-8 flex-wrap">
                <div class="content-box gap-0 grow-1 basis-small user-select-none light-color hover-outline overflow-hidden">
                    <span class="label-normal dm-sans outline-text">Citas totales</span>
                    <span class="headline-small dm-sans on-background-text" id="billing-total-appts">...</span>
                </div>       
            </div>


            <div 
                id="container-billing-appts" 
                class="simple-container direction-column gap-8"
                >
                <div 
                    name="container-filters"
                    class="simple-container justify-between gap-8 overflow-hidden direction-row-column" 
                    >

                    <div class="simple-container gap-8 max-width-100">
                        <button class="style-2 rounded flex-0-1" name="filter_invoiced" data-value="true" active>Facturadas<md-ripple></md-ripple></button>
                        <button class="style-2 rounded flex-0-1" name="filter_invoiced" data-value="false" >Sin facturar<md-ripple></md-ripple></button>
                    </div>

                    <div class="simple-container gap-8 overflow-auto max-width-100">
                        <select
                            name="filter_month"
                            >
                            <option value='1' >Enero</option><option value='2' >Febrero</option><option value='3' >Marzo</option><option value='4' >Abril</option><option value='5' >Mayo</option><option value='6' >Junio</option><option value='7' >Julio</option><option value='8' >Agosto</option><option value='9' selected>Septiembre</option><option value='10' >Octubre</option><option value='11' >Noviembre</option><option value='12' >Diciembre</option>                            <option value="1,2,3,4,5,6,7,8,9,10,11,12">Mes: Todos</option>
                        </select>
            
                        <select
                            name="filter_year"
                            >
                            <option value='2027' >Año 2027</option><option value='2026' >Año 2026</option><option value='2025' selected>Año 2025</option><option value='2024' >Año 2024</option><option value='2023' >Año 2023</option>                            <option value="2023,2024,2025,2026">Años todos</option>
                        </select>

                    </div>

                </div>
                <div class="simple-container overflow-auto padding-1 outline-light-1 border-radius-16">
                    <table name="container-table" class="style-4 adapt-to-mobile"></table>
                </div>
                <div name="container-pagination"></div>
            </div>
        
        </div>


    </div>
    
</section><section id="section-calendar-test">


    <div id="main-calendar-header" class="simple-container justify-between align-center">
        <span class="headline-small on-background-text dm-sans" id="main-calendar-title">Calendario</span>
        <div class="simple-container gap-8">
            
            

            
                        <md-text-button 
                            class="hide-on-mobile" 
                            name="button-connect-google-calendar" 
                            data-flip-id="animate"
                            >
                            <md-icon slot="icon">calendar_month</md-icon>
                            Conectar con Google Calendar
                        </md-text-button>
                               

            <div class="simple-container hide-on-mobile">
                <div class="simple-container" id="folders-view-selector-parent">
                    <span class="view-selector" data-action="view-dayGridMonth" data-tooltip="Vista mensual" title="Vista mensual">
                        <md-ripple></md-ripple>
                        <md-icon>calendar_view_month</md-icon>
                    </span>
                    <span class="view-selector" data-action="view-timeGridWeek" data-tooltip="Vista semanal" title="Vista semanal">
                        <md-ripple></md-ripple>
                        <md-icon>view_week</md-icon>
                    </span>
                </div>
            </div>
            <div class="simple-container gap-8">
                <md-filled-tonal-icon-button data-action="prev" class="solid"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
                <md-filled-tonal-icon-button data-action="next" class="solid"><md-icon>arrow_forward</md-icon></md-filled-tonal-icon-button>
            </div>
        </div>
    </div>
    <div id="main-calendar-container" class="grow-1">
    
    </div>


    <div
        data-sub-section
        data-flip-id="animate"
        id="sub-section-calendar-day"
        class="simple-container absolute-screen top-padding-safe-area on-background-text dm-sans-all"
        >
        <div class="simple-container direction-column grow-1 align-center max-width-100">
            <div class="simple-container direction-column gap-24 width-100 max-width-800 grow-1">
                <div class="simple-container justify-between gap-16" style="flex-wrap:nowrap">
                    <div class="simple-container gap-16 align-center overflow-auto">
                        <md-filled-tonal-icon-button class="solid" style="min-width:40px;" onclick="toggleSubSection('#sub-section-calendar-day')"><md-icon>close</md-icon></md-filled-tonal-icon-button>
                        <span class="headline-small weight-500" name="day-container" style="overflow:hidden;text-overflow:ellipsis;text-wrap:nowrap;"></span>
                    </div>
                    <!-- <md-filled-tonal-button class="solid" name="button-create-appt" data-flip-id="animate"><md-icon slot="icon">add</md-icon>Agendar cita este día</md-filled-tonal-button> -->
                    <md-filled-icon-button data-action='open-create-appt-window-by-date' data-flip-id="animate" style="min-width:40px;"><md-icon>add</md-icon></md-filled-icon-button>
                     <!-- <button class="style-2"><md-icon>add</md-icon></button> -->
                </div>

                <div class="overflow-hidden border-radius-64">
                    <md-tabs class="style-3">
                        <md-secondary-tab 
                            id="md-tab-day-calendar-list" 
                            aria-controls="md-panel-day-calendar-list"
                            onclick="toggleMdTab(this)"
                            class="dm-sans"
                            >
                            <md-icon slot="icon">view_agenda</md-icon>
                            Lista
                        </md-secondary-tab>
                        <md-secondary-tab 
                            id="md-tab-day-calendar-agenda" 
                            aria-controls="md-panel-day-calendar-agenda"
                            onclick="toggleMdTab(this)"
                            class="dm-sans"
                            >
                            <md-icon slot="icon">calendar_view_day</md-icon>
                            Agenda
                        </md-secondary-tab>
                    </md-tabs>
                </div>

                <!-- <span class="display-small weight-500 dm-sans only-on-mobile line-height-1 " name="day-container-mobile"></span> -->
                <div
                    data-md-panel
                    active
                    class="simple-container direction-column gap-8 grow-1" 
                    id="md-panel-day-calendar-list" 
                    role="tabpanel" 
                    aria-labelledby="md-tab-day-calendar-list"
                    >
                    <div class="simple-container direction-column gap-4 calendar-expanded-event-container" name="events-list-view"></div>
                </div>
                <div
                    data-md-panel
                    class="simple-container direction-column gap-8 grow-1" 
                    id="md-panel-day-calendar-agenda" 
                    role="tabpanel" 
                    aria-labelledby="md-tab-day-calendar-agenda"
                    >
                    <div class="simple-container direction-column gap-4 calendar-expanded-event-container grow-1" name="events-agenda-view"></div>
                </div>
            </div>
        </div>
    </div>
</section>  

    <div class="simple-container" style="position:absolute; bottom:16px; right:16px; z-index:1">
      <md-fab class="hover-scale-small" size="small" id="toggler-menu-app-actions" variant="primary" onclick="toggleMenu('menu-app-actions')"  data-flip-id="animate">
        <md-icon slot="icon">more_horiz</md-icon>
      </md-fab>
      <md-menu id="menu-app-actions" class="style-modern dm-sans-all" style="min-width:264px;" anchor="toggler-menu-app-actions">
        <md-menu-item data-action="open-create-appt-window" data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true" class="filled">calendar_add_on</md-icon>
          <div slot="headline">Agendar cita</div>
        </md-menu-item>
        <md-menu-item onclick="PatientsManager.openCreatePatientWindow()" data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true" class="filled">person_add</md-icon>
          <div slot="headline">Agregar paciente</div>
        </md-menu-item>
        <md-menu-item onclick="ExpensesManager.openCreateExpenseWindow()" data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true" class="filled">shopping_bag</md-icon>
          <div slot="headline">Registrar gasto</div>
        </md-menu-item>
        <md-menu-item name="button-open-shcedule-picker" data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true" class="filled">event_available</md-icon>
          <div slot="headline">Disponibilidad</div>
        </md-menu-item>
        <md-menu-item data-action="load-categories" data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true" class="filled">category</md-icon>
          <div slot="headline">Categorías</div>
        </md-menu-item>
        <md-menu-item data-action='open-trash' data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true" class="filled">delete</md-icon>
          <div slot="headline">Papelera</div>
        </md-menu-item>
        
              <md-menu-item name="button-connect-google-calendar">
                <md-icon slot="start" aria-hidden="true" class="filled">calendar_month</md-icon>
                <div slot="headline">Conectar con Google Calendar</div>
              </md-menu-item>
                    <md-menu-item onclick="toggleWindow('#window-settings')"  data-flip-id="animate">
          <md-icon slot="start" aria-hidden="true">settings</md-icon>
          <div slot="headline">Configuración</div>
        </md-menu-item>
        <md-menu-item onclick="toggleWindow('#window-send-suggestion')">
          <md-icon slot="start" aria-hidden="true" class="filled">feedback</md-icon>
          <div slot="headline">Dar feedback</div>
        </md-menu-item>
        <md-menu-item onclick="window.location.reload()">
          <md-icon slot="start" aria-hidden="true" class="filled">restart_alt</md-icon>
          <div slot="headline">Recargar app</div>
        </md-menu-item>
        <md-menu-item onclick="window.location.href='index'">
          <md-icon slot="start" aria-hidden="true" class="filled">first_page</md-icon>
          <div slot="headline">Página principal</div>
        </md-menu-item>
      </md-menu>
    </div>

  </holder>
  
  <!-- sub section 3 -->
<div
    data-allow-hard-exclusive="true"
    data-sub-section
    data-flip-id="animate"
    id="sub-section-patient-note"
    class="simple-container direction-column absolute-screen background wider top-padding-safe-area on-background-text"
    style="background: var(--md-sys-color-background); border-radius:24px; border: 1px solid var(--md-sys-color-surface-container-high); box-shadow:none; scroll-padding-bottom: 6rem; margin:4px; box-sizing: border-box;"
    >

    <div class="simple-container justify-between gap-8 bottom-margin-8">
        <div class="simple-container gap-8 align-center">
            <md-icon-button onclick="toggleSubSection('#sub-section-patient-note', {action:'close'})"><md-icon>close</md-icon></md-icon-button>
            <input autocomplete="off" style="font-family: 'Inter', sans-serif;" name="note-title" placeholder="Nota sin título" type="text" class="padding-8 background line-height-1 border-radius-8" maxlength="200">
        </div>
        <div class="simple-container gap-8 flex-wrap">
            <!-- <md-text-button class="solid dm-sans"><md-icon slot="icon">info</md-icon>Información</md-text-button> -->
            <!-- <md-text-button class="solid dm-sans"><md-icon slot="icon">delete</md-icon>Eliminar</md-text-button> -->
            <button
                name="button-note-link"
                class="style-7 for-icon on-background-text background gap-4"
                data-flip-id="animate"
                >
                <!-- this content is actaully created with javascript so this here does not matter much -->
                <md-ripple></md-ripple>
                <md-icon class="dynamic">link</md-icon>
                Vincular con una cita
            </button>
            <button  
                name="button-note-info"
                class="style-7 for-icon on-background-text background"
                data-flip-id="animate"
                >
                <md-ripple></md-ripple>
                <md-icon class="dynamic" data-window-icon>info</md-icon>
                <span data-window-title>Información</span>
            </button>
            <button 
                class="style-7 for-icon on-background-text background hover-delete"
                onclick="TrashManager.openConfirmationDialog('note')"
                >
                <md-ripple></md-ripple>
                <md-icon class="dynamic">delete</md-icon>
                Eliminar
            </button>
        </div>
    </div>
        
    <div class="content-box border-radius-16 background-blured-8 outline-light-1 gap-0 padding-8" style="position:sticky; top:0px; z-index:1;">
            <div id="patient-note-custom-menu-container"></div>
        </div>

    
    <div id="patient-note-editor-container" class="simple-container grow-1 direction-column"></div>

    <md-icon 
        class="pretty small ui-confirm-note-changes" 
        title="Indicador de auto guardado"
        name='ui-indicator-note-updated'
        style="opacity:0.3; position:sticky; bottom:0px; left:0px;"
        >
        cloud_done
    </md-icon>

</div>    <div
    data-allow-hard-exclusive="true"
    data-sub-section
    data-flip-id="animate"
    id="sub-section-invoice-data"
    class="simple-container direction-column gap-8 background style-window top-padding-safe-area on-background-text"
    style="background: var(--md-sys-color-background); max-width:900px; backdrop-filter:none;"
    >
    <style></style>

    <div class="simple-container justify-between" data-header>
        <div class="simple-container gap-16 align-center">
            <md-filled-tonal-icon-button class="solid" onclick="toggleSubSection('#sub-section-invoice-data', {action:'close'})"><md-icon>close</md-icon></md-filled-tonal-icon-button>
            <span class="headline-small weight-500 outline-text" name="window-title">Borrador de factura</span>
        </div>
        <div class="simple-container gap-8 align-center">
            
        </div>
        
    </div>


    <div class="content-box padding-16 background" name="dynamic-container-invoice-draft">
        <span class="labe-large dm-sans">Serie de facturación</span>
        <span class="headline-small weight-500" name="series_name">...</span>
    </div>

    <div class="simple-container padding-16 gap-8 flex-wrap background h-padding-16" name="dynamic-container-invoice-finalized">
        <div class="simple-container direction-column grow-1 basis-normal">
            <span class="labe-large dm-sans" name="finalized_series_name">...</span>
            <span class="headline-small weight-500" name="invoice_number">...</span>
            <span class="body-large outline-text" name="invoice_date">...</span>
        </div>
        <div class="simple-container align-center justify-right grow-1 basis-normal">
            <div name="verifactu_qr_code"></div>
        </div>
    </div>

    <div class="content-box padding-16 background v-padding-0" name="dynamic-container-invoice-rectified">
        <!-- <span class="labe-large dm-sans">Factura rectificada</span> -->

        <span class="label-large outline-text" name="reason_notes">...</span>
        <span class="label-large outline-text" name="reason_name_and_description"> </span>
        <span class="label-large outline-text" name="rectified_invoice_number"> </span>

    </div>

    <div class="simple-container flex-wrap outline-light-8 gap-8">
        <div class="content-box background padding-16 border-radius-16 grow-1 basis-normal">
            <span class="headline-small dm-sans weight-600">Receptor</span>

            <div class="simple-container direction-column gap-16">

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Nombre</span>
                    <input type="text" class="style-3 inline" name="patient_billing_name" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Nif / Cif</span>
                    <input type="text" class="style-3 inline" name="patient_billing_nif_cif" disabled>
                </div>    

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Calle</span>
                    <input type="text" class="style-3 inline" name="patient_billing_address_street" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Número, Apartamento, Puerta</span>
                    <input type="text" class="style-3 inline" name="patient_billing_address_number" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Ciudad</span>
                    <input type="text" class="style-3 inline" name="patient_billing_address_city" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Provincia</span>
                    <input type="text" class="style-3 inline" name="patient_billing_address_state" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Código Postal</span>
                    <input type="text" class="style-3 inline" name="patient_billing_address_zip_code" disabled>
                </div>

            </div>
        </div>
        <div class="content-box background padding-16 border-radius-16 gap-8 grow-1 basis-normal justify-between">
            <span class="headline-small dm-sans weight-600">Emisor</span>

            <div class="simple-container direction-column gap-16">

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Nombre</span>
                    <input type="text" class="style-3 inline" name="user_billing_name" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Nif / Cif</span>
                    <input type="text" class="style-3 inline" name="user_billing_nif_cif" disabled>
                </div>    

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Calle</span>
                    <input type="text" class="style-3 inline" name="user_billing_address_street" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Número</span>
                    <input type="text" class="style-3 inline" name="user_billing_address_number" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Ciudad</span>
                    <input type="text" class="style-3 inline" name="user_billing_address_city" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Provincia</span>
                    <input type="text" class="style-3 inline" name="user_billing_address_state" disabled>
                </div>

                <div class="simple-container direction-row-column gap-4">
                    <span class="label-medium simple-container align-center outline-text">Código Postal</span>
                    <input type="text" class="style-3 inline" name="user_billing_address_zip_code" disabled>
                </div>

            </div>
            
        </div>
    </div>

    <span class="headline-small dm-sans weight-600">Items</span>
    <div>
        <div class="simple-container border-radius-16 overflow-auto padding-1 outline-light-1">
            <table name="items_container" class="style-4"></table>
        </div>
    </div>

    <p name="invoice_notes" class="body-medium dm-sans outline-text text-center">...</p>

    <div class="simple-container gap-8 flex-wrap top-margin-24">

        <div class="content-box background outline-light-1 align-right width-auto grow-1 basis-large dm-sans-all">
            <div class="simple-container gap-16">
                <span class="body-large">Base imponible:</span>
                <span class="body-large" name="invoice_sub_total">...</span>
            </div>
            <div class="simple-container gap-16">
                <span class="body-large">IVA</span>
                <span class="body-large" name="invoice_total_iva">...</span>
            </div>
            <div class="simple-container gap-16">
                <span class="body-large">IRPF</span>
                <span class="body-large" name="invoice_total_irpf">...</span>
            </div>
            <div class="simple-container gap-16">
                <span class="headline-small weight-500">Total</span>
                <span class="headline-small weight-500" name="invoice_total">...</span>
            </div>
        </div>
        
    </div>

    <div name='dynamic-container-invoice-finalized' class="simple-container justify-between direction-row-column justify-between gap-8 bottom-padding-safe-area" style="backdrop-filter:blur(16px); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; padding-bottom: calc(env(safe-area-inset-bottom) + 24px); box-sizing:border-box;">

        
            <div class="simple-container gap-8 overflow-auto max-width-100">
                <md-text-button
                    name="button-rectify-invoice"
                    data-flip-id="animate"
                    class="flex-0-1"
                    >
                    <md-icon slot="icon">edit</md-icon>
                    Rectificar factura
                </md-text-button>
                <md-text-button
                    name="button-open-rectified"
                    data-flip-id="animate"
                    class="flex-0-1"
                    >
                    <md-icon slot="icon">visibility</md-icon>
                    Ver factura rectificada
                </md-text-button>
                <md-text-button
                    name="button-invoice-link"
                    target="_blank"
                    class="flex-0-1"
                    >
                    <md-icon slot="icon">open_in_new</md-icon>
                    Enlace
                </md-text-button>
                <md-text-button
                    name="button-send-by-email"
                    data-flip-id="animate"
                    class="flex-0-1"
                    >
                    <md-icon slot="icon">email</md-icon>
                    Enviar por correo
                </md-text-button>
            </div>

            <md-filled-tonal-button
                name="button-download-pdf"
                class="flex-0-1"
                >
                <md-icon slot="icon">download</md-icon>
                Descargar PDF
            </md-filled-tonal-button>


            



    </div>


    <div name='dynamic-container-invoice-draft' class="simple-container direction-row-column justify-between gap-8 bottom-padding-safe-area" style="backdrop-filter:blur(16px); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; padding-bottom: calc(env(safe-area-inset-bottom) + 24px); box-sizing:border-box;">

        <div class="simple-container gap-8">

            <button 
                data-flip-id="animate"
                name="button-delete"
                class="style-7 flex-0-1 justify-center background hover-delete"
                >
                <md-ripple></md-ripple>
                <md-icon class="dynamic">delete</md-icon>
                Eliminar
            </button>
            <button 
                data-flip-id="animate"
                name="button-edit"
                class="style-7 flex-0-1 justify-center hover-outline background"
                >
                <md-ripple></md-ripple>
                <md-icon class="dynamic">edit</md-icon>
                Editar
            </button>

        </div>

        
        <md-filled-button 
            type="submit" 
            class="dm-sans"
            data-flip-id="animate"
            name="button-finalize-invoice"
            >
            Marcar como definitiva
        </md-filled-button>
    </div>

</div>
<style>
    [name="verifactu_qr_code"]{
        width:100%;
        border-radius:12px;
    }

    @media only screen and (min-width: 680px){
        [name="verifactu_qr_code"]{
            position:absolute;
            width:120px;
            right:24px;
            top:24px;
        }
    }
</style><div
    data-allow-hard-exclusive="true"
    data-sub-section
    data-flip-id="animate"
    id="sub-section-create-invoice"
    class="simple-container direction-column gap-8 absolute-screen background wider top-padding-safe-area on-background-text"
    style="background: var(--md-sys-color-background); max-width:900px; backdrop-filter:none;"
    >
    
    <div class="simple-container justify-between">
        <div class="simple-container gap-16 align-center">
            <md-filled-tonal-icon-button class="solid" onclick="toggleSubSection('#sub-section-create-invoice', {action:'close'})"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
            <span class="headline-small weight-500 outline-text">Crear factura</span>
        </div>
        <div class="simple-container gap-8 align-center">
            <!-- <span class="headline-small weight-500 outline-text">#F2500001</span> -->
        </div>
        
    </div>

    <form 
        id="form-create-invoice"
        onsubmit="event.preventDefault();"
        autocomplete="off"
        class="simple-container direction-column gap-8"
        >

        <div class="content-box padding-16 border-radius-16 background ">
            <span class="headline-small dm-sans weight-600">Serie de facturación</span>

            <div class="simple-container direction-column gap-8">
                <span class="label-large outline-text dm-sans">Selecciona la serie de facturación</span>
                <!-- <input name="billing_nif_cif" class="background outline-1 focus-primary no-reset" type="text"> -->
                <md-outlined-select 
                    name="series_id"
                    class="outline-light"
                    >
                    <md-select-option value="0">Selecciona una opción</md-select-option>
                </md-outlined-select>
            </div>
        </div>

        <div class="simple-container flex-wrap outline-light-8 gap-8">
            <div class="content-box background padding-16 border-radius-16 grow-1 basis-normal">
                <span class="headline-small dm-sans weight-600">Receptor</span>
                <md-outlined-select name="patient_id" class="bottom-margin-24 outline-light">
                    <md-select-option value="0">Cargando pacientes...</md-select-option>
                </md-outlined-select>
                <div class="simple-container direction-column gap-16">

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nombre</span>
                        <input type="text" class="style-3 inline" name="patient_billing_name">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nif / Cif</span>
                        <input type="text" class="style-3 inline" name="patient_billing_nif_cif">
                    </div>    

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Calle</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_street">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Número, Apartamento, Puerta</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_number">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Ciudad</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_city">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Provincia</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_state">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Código Postal</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_zip_code">
                    </div>

                </div>
            </div>
            <div class="content-box background padding-16 border-radius-16 gap-8 grow-1 basis-normal justify-between">
                <span class="headline-small dm-sans weight-600">Emisor</span>

                <div class="simple-container direction-column gap-16">

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nombre</span>
                        <input type="text" class="style-3 inline" name="user_billing_name">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nif / Cif</span>
                        <input type="text" class="style-3 inline" name="user_billing_nif_cif" disabled>
                    </div>    

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Calle</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_street" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Número</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_number" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Ciudad</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_city" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Provincia</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_state" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Código Postal</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_zip_code" disabled>
                    </div>

                </div>
                
            </div>
        </div>

        <span class="headline-small dm-sans weight-600">Items</span>
        <table id="invoice-container-selected-appts" class="style-4"></table>

        <div class="simple-container justify-center gap-8">
            <md-filled-tonal-button 
                name="button-open-select-appts-window"
                data-flip-id="animate"
                type="button" 
                class="solid dm-sans"
                >
                <md-icon slot="icon">add</md-icon>
                Agregar cita
            </md-filled-tonal-button>
            <md-filled-tonal-button 
                name="button-open-add-item-window"
                data-flip-id="animate"
                type="button" 
                class="solid dm-sans"
                >
                <md-icon slot="icon">add</md-icon>
                Agregar item
            </md-filled-tonal-button>
        </div>


        <div class="simple-container gap-8 flex-wrap top-margin-24">
            <md-outlined-text-field 
                name="invoice_notes"
                class="outline-light width-auto grow-1 basis-normal"
                type="textarea"
                value="Servicio exento de IVA según el artículo 20 3a de la ley 37/1992 del Impuesto sobre el Valor Añadido."
            ></md-outlined-text-field>

            <div class="content-box background outline-light-1 align-right width-auto grow-1 basis-large dm-sans-all">
                <div class="simple-container gap-16">
                    <span class="body-large">Base imponible:</span>
                    <span class="body-large" name="invoice_sub_total">...</span>
                </div>
                <div class="simple-container gap-16">
                    <span class="body-large">IVA</span>
                    <span class="body-large" name="invoice_total_iva">...</span>
                </div>
                <div class="simple-container gap-16">
                    <span class="body-large">IRPF</span>
                    <span class="body-large" name="invoice_total_irpf">...</span>
                </div>
                <div class="simple-container gap-16">
                    <span class="headline-small weight-500">Total</span>
                    <span class="headline-small weight-500" name="invoice_total">...</span>
                </div>
            </div>
            
        </div>

        

        

        

        <div class="simple-container justify-right gap-8 bottom-padding-safe-area" style="z-index:1; backdrop-filter:blur(16px); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; box-sizing:border-box;">
            <md-filled-tonal-button type="button" class="solid flex-0-1" onclick="toggleSubSection('#sub-section-create-invoice', {action:'close'})">Cancelar</md-filled-tonal-button>
            <md-filled-button type="submit" class="dm-sans flex-0-1">Crear factura</md-filled-button>
        </div>


    </form>
    

</div>

<style>
    /* holder{
        overflow-y:hidden;
    } */
</style><div
    data-sub-section
    data-flip-id="animate"
    id="sub-section-edit-invoice"
    class="simple-container direction-column gap-8 absolute-screen background wider top-padding-safe-area on-background-text"
    style="background: var(--md-sys-color-background); max-width:900px; backdrop-filter:none;"
    >
    
    <div class="simple-container justify-between">
        <div class="simple-container gap-16 align-center">
            <md-filled-tonal-icon-button class="solid" onclick="toggleSubSection('#sub-section-edit-invoice', {action:'close'})"><md-icon>arrow_back</md-icon></md-filled-tonal-icon-button>
            <span class="headline-small weight-500 outline-text">Editar factura</span>
        </div>
        <div class="simple-container gap-8 align-center">
            <!-- <span class="headline-small weight-500 outline-text">#F2500001</span> -->
        </div>
        
    </div>

    <form 
        id="form-edit-invoice"
        onsubmit="event.preventDefault()"
        autocomplete="off"
        class="simple-container direction-column gap-8"
        >


        <div class="simple-container direction-column gap-8">
            <span class="label-large outline-text dm-sans">Selecciona la serie de facturación</span>
            <md-outlined-select 
                name="series_id"
                class="outline-light"
                >
                <md-select-option value="0">Selecciona una opción</md-select-option>
            </md-outlined-select>
        </div>

        <div class="simple-container flex-wrap outline-light-8 gap-8">
            <div class="content-box background padding-16 border-radius-16 grow-1 basis-normal">
                <span class="headline-small dm-sans weight-600">Receptor</span>
                
                <div class="simple-container direction-column gap-16">

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nombre</span>
                        <input type="text" class="style-3 inline" name="patient_billing_name">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nif / Cif</span>
                        <input type="text" class="style-3 inline" name="patient_billing_nif_cif">
                    </div>    

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Calle</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_street">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Número, Apartamento, Puerta</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_number">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Ciudad</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_city">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Provincia</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_state">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Código Postal</span>
                        <input type="text" class="style-3 inline" name="patient_billing_address_zip_code">
                    </div>

                </div>
            </div>
            <div class="content-box background padding-16 border-radius-16 gap-8 grow-1 basis-normal justify-between">
                <span class="headline-small dm-sans weight-600">Emisor</span>

                <div class="simple-container direction-column gap-16">

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nombre</span>
                        <input type="text" class="style-3 inline" name="user_billing_name">
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Nif / Cif</span>
                        <input type="text" class="style-3 inline" name="user_billing_nif_cif" disabled>
                    </div>    

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Calle</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_street" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Número</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_number" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Ciudad</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_city" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Provincia</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_state" disabled>
                    </div>

                    <div class="simple-container direction-row-column gap-4">
                        <span class="label-medium simple-container align-center outline-text">Código Postal</span>
                        <input type="text" class="style-3 inline" name="user_billing_address_zip_code" disabled>
                    </div>

                </div>
                
            </div>
        </div>

        <span class="headline-small dm-sans weight-600">Items</span>
        <div>
            <div class="simple-container border-radius-16 overflow-auto padding-1 outline-light-1">
                <table name="items_container" class="style-4"></table>
            </div>
        </div>

        <div class="simple-container justify-center gap-8">
            <md-filled-tonal-button 
                name="button-open-select-appts-window"
                data-flip-id="animate"
                type="button" 
                class="solid dm-sans"
                >
                <md-icon slot="icon">add</md-icon>
                Agregar cita
            </md-filled-tonal-button>
            <md-filled-tonal-button 
                name="button-open-add-item-window"
                data-flip-id="animate"
                type="button" 
                class="solid dm-sans"
                >
                <md-icon slot="icon">add</md-icon>
                Agregar item
            </md-filled-tonal-button>
        </div>


        <div class="simple-container gap-8 flex-wrap top-margin-24">
            <md-outlined-text-field 
                name="invoice_notes"
                class="outline-light width-auto grow-1 basis-normal"
                type="textarea"
                value="Servicio exento de IVA según el artículo 20 3a de la ley 37/1992 del Impuesto sobre el Valor Añadido."
            ></md-outlined-text-field>

            <div class="content-box background outline-light-1 align-right width-auto grow-1 basis-large dm-sans-all">
                <div class="simple-container gap-16">
                    <span class="body-large">Base imponible:</span>
                    <span class="body-large" name="invoice_sub_total">...</span>
                </div>
                <div class="simple-container gap-16">
                    <span class="body-large">IVA</span>
                    <span class="body-large" name="invoice_total_iva">...</span>
                </div>
                <div class="simple-container gap-16">
                    <span class="body-large">IRPF</span>
                    <span class="body-large" name="invoice_total_irpf">...</span>
                </div>
                <div class="simple-container gap-16">
                    <span class="headline-small weight-500">Total</span>
                    <span class="headline-small weight-500" name="invoice_total">...</span>
                </div>
            </div>
            
        </div>

        

        

        

        <div class="simple-container justify-right gap-8 bottom-padding-safe-area" style="z-index:1; backdrop-filter:blur(16px); position:sticky; bottom:-24px; width: calc(100% + 48px); margin:0 -24px; padding:16px 24px; box-sizing:border-box;">
            <md-filled-tonal-button type="button" class="solid flex-0-1" onclick="toggleSubSection('#sub-section-edit-invoice', {action:'close'})">Cancelar</md-filled-tonal-button>
            <md-filled-button type="submit" class="dm-sans flex-0-1">Guardar cambios</md-filled-button>
        </div>


    </form>
    
    

</div>

<md-dialog id="dialog-delete-invoice-draft-confirmation">
    <div slot="headline">Eliminar borrador de factura</div>
    <md-icon slot="icon" aria-hidden="true">delete</md-icon>
    <form id="form-dialog-delete-invoice-draft-confirmation" slot="content" method="dialog">
        ¿Estás seguro(a) de que quieres <span class="error-text">Eliminar permanentemente</span> este borrador de factura?
    </form>
    <div slot="actions" class="simple-container direction-row-column">
        <md-filled-tonal-button class="solid" form="form-dialog-delete-invoice-draft-confirmation" value="cancel">Cancelar</md-filled-tonal-button>
        <md-filled-tonal-button form="form-dialog-delete-invoice-draft-confirmation" name="button-confirm-delete-invoice-draft" class="delete" value="confirm">
        <md-icon slot="icon" aria-hidden="true">delete</md-icon>
            Eliminar permanentemente
        </md-filled-tonal-button>
    </div>
</md-dialog></main>

<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    registerAccess();
  });
</script>




<script src="js/general-functions.js?v=28"></script>

<script src="js/main.js?v=53" type="module"></script>


<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>

<!-- <script src="js/patients-functions.js?v=1.0.3"></script> -->
<!-- <script src="js/permissions-functions.js?v=1.0.0"></script> -->
<!-- <script src="js/appointments-functions.js?v=1.0.1"></script> -->




    <script>
      document.querySelector('MAIN').style.pointerEvents = 'none';
      document.querySelector('MAIN').style.opacity = '0';
      setTimeout(() => {
        document.querySelector('MAIN').innerHTML = '';
      }, 3000);
    </script>
      <message></message>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.0/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.0/Flip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/CustomEase.min.js"></script>
    <script src="/js/ui-functions.js?v=14"></script>

    <script src="/js/beautiful-windows.js?v=2"></script>
    <!-- <script src="/js/account-functions.js?v=7"></script> -->
    <script src="/js/suggestions-functions.js?v=7"></script>
  

  <!-- <script src="js/calories-functions.js?v=1"></script> -->

  <!-- <script>
    window.addEventListener('DOMContentLoaded', () => {
      const bg = getComputedStyle(document.documentElement)
                  .getPropertyValue('--md-sys-color-background').trim();
      const tx = getComputedStyle(document.documentElement)
                  .getPropertyValue('--md-sys-color-on-background').trim();
      window.desktop.setOverlay({
        color: bg,
        symbolColor: tx,
        height: 36
      });
    });
  </script> -->
</body>
</html>